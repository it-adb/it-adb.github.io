{"version":3,"file":"ClassManagement-BgOYzzar.js","sources":["../../src/hooks/useCourses.ts","../../src/pages/admin/ClassManagement.tsx"],"sourcesContent":["import { useQuery } from '@tanstack/react-query';\r\nimport type { UseQueryOptions } from '@tanstack/react-query';\r\nimport { apiService } from '../services/api';\r\nimport type { CourseWithClasses, GetCoursesParams } from '../types';\r\n\r\nexport function useCourses(\r\n  params?: GetCoursesParams,\r\n  options?: Omit<UseQueryOptions<CourseWithClasses[], Error>, 'queryKey' | 'queryFn'>\r\n) {\r\n  const key = ['courses', params?.kode_prodi ?? null, params?.semester ?? null, params?.include_classes ?? null] as const;\r\n  return useQuery<CourseWithClasses[], Error>({\r\n    queryKey: key,\r\n    queryFn: () => apiService.getCourses(params),\r\n    ...(options ?? {}),\r\n  });\r\n}\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { \r\n  Calendar, \r\n  BookOpen, \r\n  GraduationCap,\r\n  ChevronDown,\r\n  ChevronUp,\r\n  Search,\r\n  Filter,\r\n  Loader2,\r\n  AlertCircle,\r\n  Users\r\n} from 'lucide-react';\r\nimport type { CourseWithClasses } from '../../types';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useCourses } from '../../hooks/useCourses';\r\nimport { usePrograms } from '../../hooks/usePrograms';\r\nimport { extractString, extractNumber, extractDate } from '@/utils';\r\n\r\nconst ClassManagement: React.FC = () => {\r\n  const { currentSemester } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [courses, setCourses] = useState<CourseWithClasses[]>([]);\r\n  const [filteredCourses, setFilteredCourses] = useState<CourseWithClasses[]>([]);\r\n  const [programs, setPrograms] = useState<Array<{ kode_prodi: string; nama_prodi: string }>>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [expandedCourses, setExpandedCourses] = useState<Set<string>>(new Set());\r\n  const [filterProgram, setFilterProgram] = useState<string>('all');\r\n  const [filterYear, setFilterYear] = useState<string>('');\r\n  const [filterTerm, setFilterTerm] = useState<'1' | '2'>('1');\r\n\r\n  // Compute filterSemester from year and term\r\n  const filterSemester = useMemo(() => {\r\n    return filterYear ? `${filterYear}${filterTerm}` : '';\r\n  }, [filterYear, filterTerm]);\r\n\r\n  // React Query: programs and courses (cached)\r\n  const { data: programsData } = usePrograms();\r\n  const { data: coursesData, isLoading: isCoursesLoading, error: coursesError } = useCourses(\r\n    useMemo(() => (\r\n      filterSemester\r\n        ? { semester: filterSemester, include_classes: true }\r\n        : undefined\r\n    ), [filterSemester])\r\n  );\r\n\r\n  // Sync hook data into local state for filtering/expansion logic\r\n  useEffect(() => {\r\n    if (programsData) {\r\n      setPrograms(programsData);\r\n    }\r\n  }, [programsData]);\r\n\r\n  useEffect(() => {\r\n    // Filter courses based on search query and program filter\r\n    let filtered = courses;\r\n\r\n    // Search filter\r\n    if (searchQuery) {\r\n      filtered = filtered.filter(course => \r\n        course.nama_mk.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        course.kode_mk.toLowerCase().includes(searchQuery.toLowerCase())\r\n      );\r\n    }\r\n\r\n    // Program filter\r\n    if (filterProgram !== 'all') {\r\n      filtered = filtered.filter(course => course.kode_prodi === filterProgram);\r\n    }\r\n\r\n    setFilteredCourses(filtered);\r\n  }, [searchQuery, filterProgram, courses]);\r\n\r\n  // Sync filterYear and filterTerm with currentSemester when it changes\r\n  useEffect(() => {\r\n    if (currentSemester && !filterYear) {\r\n      const year = currentSemester.slice(0, 4);\r\n      const term = currentSemester.slice(4) as '1' | '2';\r\n      setFilterYear(year);\r\n      setFilterTerm(term);\r\n    }\r\n  }, [currentSemester, filterYear]);\r\n\r\n  // When courses hook resolves, propagate to local state and handle errors/loading\r\n  useEffect(() => {\r\n    setLoading(isCoursesLoading || (!filterYear && true));\r\n  }, [isCoursesLoading, filterYear]);\r\n\r\n  useEffect(() => {\r\n    if (coursesError) {\r\n      const msg = coursesError instanceof Error ? coursesError.message : 'Failed to load courses';\r\n      setError(msg);\r\n      setCourses([]);\r\n      setFilteredCourses([]);\r\n    } else {\r\n      setError(null);\r\n    }\r\n  }, [coursesError]);\r\n\r\n  useEffect(() => {\r\n    if (Array.isArray(coursesData)) {\r\n      const list = coursesData;\r\n      setCourses(list);\r\n      setFilteredCourses(list);\r\n    }\r\n  }, [coursesData]);\r\n\r\n  const toggleCourseExpand = (kode_mk: string) => {\r\n    const newExpanded = new Set(expandedCourses);\r\n    if (newExpanded.has(kode_mk)) {\r\n      newExpanded.delete(kode_mk);\r\n    } else {\r\n      newExpanded.add(kode_mk);\r\n    }\r\n    setExpandedCourses(newExpanded);\r\n  };\r\n\r\n  const getTotalSKS = (course: CourseWithClasses): number => {\r\n    return (course.sks_tatap_muka || 0) + \r\n           (course.sks_praktek || 0) + \r\n           (course.sks_prak_lapangan || 0) + \r\n           (course.sks_simulasi || 0);\r\n  };\r\n\r\n  const formatDate = (date: Date | null): string => {\r\n    if (!date) return '-';\r\n    return date.toLocaleDateString('id-ID', { day: '2-digit', month: 'short', year: 'numeric' });\r\n  };\r\n\r\n  const getModeColor = (mode?: string): string => {\r\n    switch (mode) {\r\n      case 'Online': return 'bg-blue-100 text-blue-700';\r\n      case 'Offline': return 'bg-green-100 text-green-700';\r\n      case 'Hybrid': return 'bg-purple-100 text-purple-700';\r\n      default: return 'bg-gray-100 text-gray-700';\r\n    }\r\n  };\r\n\r\n  const getSemesterLabel = (semester: string): string => {\r\n    if (!semester || semester.length < 5) return 'Unknown Semester';\r\n    const year = semester.slice(0, 4);\r\n    const term = semester.slice(4) === '1' ? 'Ganjil' : 'Genap';\r\n    const academicYear = `${year}/${parseInt(year) + 1}`;\r\n    return `${academicYear} ${term}`;\r\n  };\r\n\r\n  const totalCourses = filteredCourses.length;\r\n  const totalClasses = filteredCourses.reduce((sum, course) => sum + (course.classes?.length || 0), 0);\r\n\r\n  // Show loading if still fetching or if filterYear is not yet available\r\n  if (loading || !filterYear) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        <div className=\"flex items-center justify-center py-12\">\r\n          <Loader2 className=\"h-8 w-8 text-blue-600 animate-spin\" />\r\n          <span className=\"ml-3 text-gray-600\">\r\n            {!filterYear ? 'Loading semester information...' : 'Loading courses...'}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto\">\r\n      {/* Header */}\r\n      <div className=\"mb-6\">\r\n        <div className=\"flex items-center justify-between mb-2\">\r\n          <h1 className=\"text-2xl font-bold text-gray-900\">Class Management</h1>\r\n          <div className=\"flex items-center gap-2 text-sm\">\r\n            <Calendar className=\"h-4 w-4 text-gray-500\" />\r\n            <span className=\"text-gray-500\">Current Semester:</span>\r\n            <span className=\"font-medium text-gray-900\">{getSemesterLabel(currentSemester)}</span>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Stats Cards */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\r\n          <div className=\"card bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 bg-blue-600 rounded-lg\">\r\n                <BookOpen className=\"h-5 w-5 text-white\" />\r\n              </div>\r\n              <div>\r\n                <p className=\"text-sm text-blue-600 font-medium\">Total Courses</p>\r\n                <p className=\"text-2xl font-bold text-blue-900\">{totalCourses}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"card bg-gradient-to-br from-green-50 to-green-100 border-green-200\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 bg-green-600 rounded-lg\">\r\n                <GraduationCap className=\"h-5 w-5 text-white\" />\r\n              </div>\r\n              <div>\r\n                <p className=\"text-sm text-green-600 font-medium\">Total Classes</p>\r\n                <p className=\"text-2xl font-bold text-green-900\">{totalClasses}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters & Search */}\r\n      <div className=\"card mb-6\">\r\n        <div className=\"flex flex-col sm:flex-row gap-3\">\r\n          {/* Search */}\r\n          <div className=\"relative flex-1\">\r\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search by course name or code...\"\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              className=\"input-field pl-10 w-full\"\r\n            />\r\n          </div>\r\n\r\n          {/* Academic Year Filter */}\r\n          <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n            <Calendar className=\"h-5 w-5 text-gray-400 flex-shrink-0\" />\r\n            <div className=\"flex items-center gap-1\">\r\n              <input\r\n                type=\"number\"\r\n                value={filterYear}\r\n                onChange={(e) => setFilterYear(e.target.value)}\r\n                placeholder=\"Year\"\r\n                className=\"input-field w-[80px] text-center\"\r\n                min={new Date().getFullYear() - 10}\r\n                max={new Date().getFullYear() + 5}\r\n              />\r\n              <span className=\"text-gray-500 font-medium\">/</span>\r\n              <input\r\n                type=\"number\"\r\n                value={filterYear ? parseInt(filterYear) + 1 : ''}\r\n                disabled\r\n                className=\"input-field w-[80px] text-center bg-gray-50 text-gray-600\"\r\n                readOnly\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Semester Type Filter */}\r\n          <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n            <select\r\n              value={filterTerm}\r\n              onChange={(e) => setFilterTerm(e.target.value as '1' | '2')}\r\n              className=\"input-field min-w-[120px]\"\r\n            >\r\n              <option value=\"1\">Ganjil</option>\r\n              <option value=\"2\">Genap</option>\r\n            </select>\r\n          </div>\r\n\r\n          {/* Program Filter */}\r\n          <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n            <Filter className=\"h-5 w-5 text-gray-400 flex-shrink-0\" />\r\n            <select\r\n              value={filterProgram}\r\n              onChange={(e) => setFilterProgram(e.target.value)}\r\n              className=\"input-field min-w-[200px]\"\r\n            >\r\n              <option value=\"all\">All Programs</option>\r\n              {programs.map((prodi) => (\r\n                <option key={prodi.kode_prodi} value={prodi.kode_prodi}>\r\n                  {prodi.nama_prodi} ({prodi.kode_prodi})\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Error State */}\r\n      {error && (\r\n        <div className=\"card bg-red-50 border-red-200 mb-6\">\r\n          <div className=\"flex items-center gap-3 text-red-700\">\r\n            <AlertCircle className=\"h-5 w-5 flex-shrink-0\" />\r\n            <div>\r\n              <p className=\"font-medium\">Error loading courses</p>\r\n              <p className=\"text-sm text-red-600\">{error}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Courses List */}\r\n      {filteredCourses.length === 0 ? (\r\n        <div className=\"card text-center py-12\">\r\n          <BookOpen className=\"h-12 w-12 text-gray-300 mx-auto mb-3\" />\r\n          <p className=\"text-gray-500 mb-2\">No courses found</p>\r\n          <p className=\"text-sm text-gray-400\">\r\n            {searchQuery || filterProgram !== 'all'\r\n              ? 'Try adjusting your filters or search query' \r\n              : 'No courses available for this semester'}\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-2\">\r\n          {filteredCourses.map((course) => {\r\n            const isExpanded = expandedCourses.has(course.kode_mk);\r\n            const hasClasses = course.classes && course.classes.length > 0;\r\n            \r\n            return (\r\n              <div key={course.kode_mk} className=\"card hover:shadow-md transition-shadow\">\r\n                {/* Compact Course Header - Single Line */}\r\n                <div \r\n                  className=\"flex items-center justify-between gap-2 cursor-pointer\"\r\n                  onClick={() => hasClasses && toggleCourseExpand(course.kode_mk)}\r\n                >\r\n                  <div className=\"flex items-center gap-2 min-w-0 flex-1\">\r\n                    <div className=\"flex-shrink-0\">\r\n                      {hasClasses && (\r\n                        <div className=\"text-gray-400\">\r\n                          {isExpanded ? (\r\n                            <ChevronUp className=\"h-4 w-4\" />\r\n                          ) : (\r\n                            <ChevronDown className=\"h-4 w-4\" />\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    \r\n                    {/* Course Info */}\r\n                    <div className=\"min-w-0 flex-1\">\r\n                      <div className=\"flex items-center gap-2 flex-wrap\">\r\n                        <span className=\"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-medium rounded whitespace-nowrap\">\r\n                          {course.kode_mk}\r\n                        </span>\r\n                        <h3 className=\"text-sm font-semibold text-gray-900 truncate\">\r\n                          {course.nama_mk}\r\n                        </h3>\r\n                        {course.jenis_mk && (\r\n                          <span className=\"px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded whitespace-nowrap\">\r\n                            {course.jenis_mk}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Course Meta - Compact */}\r\n                    <div className=\"flex items-center gap-2 text-xs text-gray-500 flex-shrink-0\">\r\n                      <div className=\"flex items-center gap-0.5 whitespace-nowrap\">\r\n                        <GraduationCap className=\"h-3.5 w-3.5\" />\r\n                        <span>{getTotalSKS(course)} SKS</span>\r\n                      </div>\r\n                      \r\n                      {hasClasses && (\r\n                        <span className=\"px-1.5 py-0.5 bg-green-100 text-green-700 font-medium rounded whitespace-nowrap\">\r\n                          {course.classes!.length} classes\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Classes List (Expanded) */}\r\n                {isExpanded && hasClasses && (\r\n                  <div className=\"mt-3 pt-3 border-t border-gray-200 space-y-2\">\r\n                    {course.classes!.map((kelas) => (\r\n                      <div \r\n                        key={kelas.id}\r\n                        className=\"p-2 bg-gray-50 rounded text-xs hover:bg-gray-100 transition-colors group\"\r\n                      >\r\n                        <div className=\"flex items-center justify-between gap-2 flex-wrap\">\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <h4 className=\"font-medium text-gray-900 whitespace-nowrap\">\r\n                              Class {extractString(kelas.nama_kelas)}\r\n                            </h4>\r\n                            {extractString(kelas.mode_kuliah) && (\r\n                              <span className={`px-1.5 py-0.5 text-xs font-medium rounded whitespace-nowrap ${getModeColor(extractString(kelas.mode_kuliah))}`}>\r\n                                {extractString(kelas.mode_kuliah)}\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                          \r\n                          <div className=\"flex items-center gap-1.5 text-gray-600 flex-wrap\">\r\n                            {extractDate(kelas.tgl_mulai) && (\r\n                              <span className=\"whitespace-nowrap\">{formatDate(extractDate(kelas.tgl_mulai))}</span>\r\n                            )}\r\n                            {extractNumber(kelas.sks_tatap_muka) > 0 && (\r\n                              <span className=\"whitespace-nowrap\">{extractNumber(kelas.sks_tatap_muka)}SKS</span>\r\n                            )}\r\n                            <button\r\n                              onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                navigate(`/class-summary/${kelas.id}?courseCode=${encodeURIComponent(course.kode_mk)}&courseName=${encodeURIComponent(course.nama_mk)}&className=${encodeURIComponent(extractString(kelas.nama_kelas))}&sksTatapMuka=${extractNumber(kelas.sks_tatap_muka)}&sksPraktek=${extractNumber(kelas.sks_praktek)}&sksPrakLapangan=${extractNumber(kelas.sks_prak_lapangan)}&sksSimulasi=${extractNumber(kelas.sks_simulasi)}&from=admin/class-management`);\r\n                              }}\r\n                              className=\"ml-2 px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors flex items-center gap-1 whitespace-nowrap\"\r\n                              title=\"View attendance matrix\"\r\n                            >\r\n                              <Users className=\"h-3 w-3\" />\r\n                              <span>Attendance</span>\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        {extractString(kelas.bahasan) && (\r\n                          <p className=\"text-gray-600 mt-1\">\r\n                            {extractString(kelas.bahasan)}\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClassManagement;\r\n"],"names":["useCourses","params","options","key","useQuery","apiService","ClassManagement","currentSemester","useAuth","navigate","useNavigate","courses","setCourses","useState","filteredCourses","setFilteredCourses","programs","setPrograms","loading","setLoading","error","setError","searchQuery","setSearchQuery","expandedCourses","setExpandedCourses","filterProgram","setFilterProgram","filterYear","setFilterYear","filterTerm","setFilterTerm","filterSemester","useMemo","programsData","usePrograms","coursesData","isCoursesLoading","coursesError","useEffect","filtered","course","year","term","msg","list","toggleCourseExpand","kode_mk","newExpanded","getTotalSKS","formatDate","date","getModeColor","mode","getSemesterLabel","semester","totalCourses","totalClasses","sum","jsxs","jsx","Loader2","Calendar","BookOpen","GraduationCap","Search","e","Filter","prodi","AlertCircle","isExpanded","hasClasses","ChevronUp","ChevronDown","kelas","extractString","extractDate","extractNumber","Users"],"mappings":"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"}