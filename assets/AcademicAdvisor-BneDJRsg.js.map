{"version":3,"file":"AcademicAdvisor-BneDJRsg.js","sources":["../../src/pages/lecturer/AcademicAdvisor.tsx"],"sourcesContent":["import React, { useMemo, useState } from 'react';\r\nimport { Check, X, Notebook, User, FileText, Search } from 'lucide-react';\r\nimport type { AdvisorNote, KRSRequest, StudentSummary } from '../../types';\r\n\r\nconst mockAdvisees: StudentSummary[] = Array.from({ length: 12 }).map((_, i) => ({\r\n  id: `S${i + 1}`,\r\n  name: `Student ${i + 1}`,\r\n  studentId: `22010${(i + 1).toString().padStart(3, '0')}`,\r\n  program: 'Informatics',\r\n  semester: 5,\r\n  gpa: Math.round((3 + Math.random() * 1) * 100) / 100,\r\n  lastSemesterGPA: Math.round((3 + Math.random() * 1) * 100) / 100,\r\n}));\r\n\r\nconst mockRequests: KRSRequest[] = mockAdvisees.slice(0, 5).map((s, i) => ({\r\n  id: `KRS-${i + 1}`,\r\n  student: s,\r\n  semester: '2024/2025 Genap',\r\n  requestedCredits: 21 - i,\r\n  status: 'submitted',\r\n  submittedAt: new Date().toISOString(),\r\n}));\r\n\r\nconst AcademicAdvisor: React.FC = () => {\r\n  const [query, setQuery] = useState('');\r\n  const [requests, setRequests] = useState<KRSRequest[]>(mockRequests);\r\n  const [notes, setNotes] = useState<AdvisorNote[]>([]);\r\n  const [noteDraft, setNoteDraft] = useState('');\r\n  const [selectedStudent, setSelectedStudent] = useState<StudentSummary | null>(mockAdvisees[0]);\r\n\r\n  const advisees = useMemo(() => {\r\n    return mockAdvisees.filter(s => s.name.toLowerCase().includes(query.toLowerCase()) || s.studentId.includes(query));\r\n  }, [query]);\r\n\r\n  const approve = (id: string) => {\r\n    setRequests(prev => prev.map(r => (r.id === id ? { ...r, status: 'approved', decisionAt: new Date().toISOString() } : r)));\r\n  };\r\n  const reject = (id: string) => {\r\n    setRequests(prev => prev.map(r => (r.id === id ? { ...r, status: 'rejected', decisionAt: new Date().toISOString() } : r)));\r\n  };\r\n\r\n  const addNote = () => {\r\n    if (!selectedStudent || !noteDraft.trim()) return;\r\n    const newNote: AdvisorNote = {\r\n      id: `${Date.now()}`,\r\n      studentId: selectedStudent.id,\r\n      advisorId: 'L1',\r\n      date: new Date().toISOString(),\r\n      note: noteDraft.trim(),\r\n    };\r\n    setNotes(prev => [newNote, ...prev]);\r\n    setNoteDraft('');\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-2xl font-bold text-gray-900\">Academic Advisor</h1>\r\n        <div className=\"text-sm text-gray-500\">Approve KRS and track advisees</div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Advisee list */}\r\n        <div className=\"card\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <div className=\"font-semibold text-gray-900 inline-flex items-center\"><User className=\"h-4 w-4 mr-2\" /> Advisees</div>\r\n          </div>\r\n          <div className=\"mb-3 relative\">\r\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\r\n            <input\r\n              className=\"w-full pl-9 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n              placeholder=\"Search name or ID\"\r\n              value={query}\r\n              onChange={(e) => setQuery(e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"max-h-80 overflow-y-auto divide-y\">\r\n            {advisees.map(a => (\r\n              <button\r\n                key={a.id}\r\n                className={`w-full text-left py-2 px-2 hover:bg-gray-50 ${selectedStudent?.id === a.id ? 'bg-primary-50' : ''}`}\r\n                onClick={() => setSelectedStudent(a)}\r\n              >\r\n                <div className=\"font-medium text-gray-900\">{a.name}</div>\r\n                <div className=\"text-xs text-gray-600\">{a.studentId} • Semester {a.semester} • IPK {a.gpa}</div>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* KRS approvals */}\r\n        <div className=\"card\">\r\n          <div className=\"font-semibold text-gray-900 mb-3 inline-flex items-center\"><FileText className=\"h-4 w-4 mr-2\" /> KRS Submissions</div>\r\n          <div className=\"space-y-3\">\r\n            {requests.map(r => (\r\n              <div key={r.id} className=\"p-3 border rounded-lg\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <div className=\"font-medium text-gray-900\">{r.student.name} • {r.student.studentId}</div>\r\n                    <div className=\"text-xs text-gray-500\">{r.semester} • Requested SKS: {r.requestedCredits}</div>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    {r.status === 'submitted' ? (\r\n                      <>\r\n                        <button className=\"btn btn-primary inline-flex items-center\" onClick={() => approve(r.id)}>\r\n                          <Check className=\"h-4 w-4 mr-1\" /> Approve\r\n                        </button>\r\n                        <button className=\"btn inline-flex items-center\" onClick={() => reject(r.id)}>\r\n                          <X className=\"h-4 w-4 mr-1\" /> Reject\r\n                        </button>\r\n                      </>\r\n                    ) : (\r\n                      <div className={`text-sm font-medium ${r.status === 'approved' ? 'text-green-600' : 'text-red-600'}`}>{r.status.toUpperCase()}</div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Progress and notes */}\r\n        <div className=\"space-y-6\">\r\n          <div className=\"card\">\r\n            <div className=\"font-semibold text-gray-900 mb-2 inline-flex items-center\"><Notebook className=\"h-4 w-4 mr-2\" /> Progress Summary</div>\r\n            {selectedStudent ? (\r\n              <div className=\"text-sm text-gray-700 space-y-1\">\r\n                <div>Name: <span className=\"font-medium text-gray-900\">{selectedStudent.name}</span></div>\r\n                <div>ID: {selectedStudent.studentId}</div>\r\n                <div>Program: {selectedStudent.program}</div>\r\n                <div>Semester: {selectedStudent.semester}</div>\r\n                <div>IPS (Last): <span className=\"font-medium text-gray-900\">{selectedStudent.lastSemesterGPA}</span></div>\r\n                <div>IPK: <span className=\"font-medium text-gray-900\">{selectedStudent.gpa}</span></div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"text-sm text-gray-600\">Select a student to view progress</div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"card\">\r\n            <div className=\"font-semibold text-gray-900 mb-2\">Guidance Notes</div>\r\n            <div className=\"space-y-2\">\r\n              <textarea\r\n                className=\"w-full border rounded-lg px-3 py-2\"\r\n                rows={3}\r\n                placeholder=\"Add a new note...\"\r\n                value={noteDraft}\r\n                onChange={(e) => setNoteDraft(e.target.value)}\r\n              />\r\n              <div className=\"flex justify-end\">\r\n                <button className=\"btn btn-primary\" onClick={addNote}>Add Note</button>\r\n              </div>\r\n            </div>\r\n            <div className=\"mt-3 space-y-2 max-h-48 overflow-y-auto\">\r\n              {notes\r\n                .filter(n => !selectedStudent || n.studentId === selectedStudent.id)\r\n                .map(n => (\r\n                  <div key={n.id} className=\"p-2 border rounded\">\r\n                    <div className=\"text-xs text-gray-500\">{new Date(n.date).toLocaleString()}</div>\r\n                    <div className=\"text-sm text-gray-800\">{n.note}</div>\r\n                  </div>\r\n                ))}\r\n              {notes.filter(n => !selectedStudent || n.studentId === selectedStudent.id).length === 0 && (\r\n                <div className=\"text-sm text-gray-500\">No notes yet.</div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AcademicAdvisor;\r\n"],"names":["mockAdvisees","_","i","mockRequests","s","AcademicAdvisor","query","setQuery","useState","requests","setRequests","notes","setNotes","noteDraft","setNoteDraft","selectedStudent","setSelectedStudent","advisees","useMemo","approve","id","prev","reject","addNote","newNote","jsxs","jsx","User","Search","e","a","FileText","r","Fragment","Check","X","Notebook","n"],"mappings":"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"}