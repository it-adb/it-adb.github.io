{"version":3,"file":"index-CNp5Acia.js","sources":["../../src/components/ui/PageHeader.tsx","../../src/pages/admin/UserManagement/UserStatsCards.tsx","../../src/pages/admin/UserManagement/types.ts","../../src/pages/admin/UserManagement/UserTable.tsx","../../src/pages/admin/UserManagement/UserFormModal.tsx","../../src/hooks/useUsers.ts","../../src/services/api/client.ts","../../src/pages/admin/UserManagement/UserAssignments.tsx","../../src/pages/admin/UserManagement/useUserManagement.ts","../../src/pages/admin/UserManagement/index.tsx"],"sourcesContent":["import React from 'react';\r\nimport { ArrowLeft } from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\ninterface PageHeaderProps {\r\n  /** Page title */\r\n  title: string;\r\n  /** Optional subtitle/description */\r\n  subtitle?: string;\r\n  /** Optional back button (shows arrow icon) */\r\n  showBack?: boolean;\r\n  /** Custom back URL (defaults to -1 history) */\r\n  backUrl?: string;\r\n  /** Actions to render on the right side */\r\n  actions?: React.ReactNode;\r\n  /** Optional breadcrumbs */\r\n  breadcrumbs?: Array<{ label: string; href?: string }>;\r\n  /** Optional icon to display next to title */\r\n  icon?: React.ReactNode;\r\n}\r\n\r\n/**\r\n * Reusable page header component with title, subtitle, and optional actions\r\n */\r\nexport const PageHeader: React.FC<PageHeaderProps> = ({\r\n  title,\r\n  subtitle,\r\n  showBack = false,\r\n  backUrl,\r\n  actions,\r\n  breadcrumbs,\r\n  icon,\r\n}) => {\r\n  const navigate = useNavigate();\r\n\r\n  const handleBack = () => {\r\n    if (backUrl) {\r\n      navigate(backUrl);\r\n    } else {\r\n      navigate(-1);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"mb-6\">\r\n      {/* Breadcrumbs */}\r\n      {breadcrumbs && breadcrumbs.length > 0 && (\r\n        <nav className=\"flex mb-2\" aria-label=\"Breadcrumb\">\r\n          <ol className=\"flex items-center space-x-2 text-sm text-gray-500\">\r\n            {breadcrumbs.map((crumb, index) => (\r\n              <li key={index} className=\"flex items-center\">\r\n                {index > 0 && <span className=\"mx-2\">/</span>}\r\n                {crumb.href ? (\r\n                  <a \r\n                    href={crumb.href} \r\n                    className=\"hover:text-primary-600 transition-colors\"\r\n                  >\r\n                    {crumb.label}\r\n                  </a>\r\n                ) : (\r\n                  <span className=\"text-gray-700\">{crumb.label}</span>\r\n                )}\r\n              </li>\r\n            ))}\r\n          </ol>\r\n        </nav>\r\n      )}\r\n\r\n      {/* Header row */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-4\">\r\n          {showBack && (\r\n            <button\r\n              onClick={handleBack}\r\n              className=\"p-2 rounded-lg hover:bg-gray-100 transition-colors\"\r\n              aria-label=\"Go back\"\r\n            >\r\n              <ArrowLeft className=\"h-5 w-5 text-gray-600\" />\r\n            </button>\r\n          )}\r\n          \r\n          {icon && (\r\n            <div className=\"p-2 bg-primary-50 rounded-lg text-primary-600\">\r\n              {icon}\r\n            </div>\r\n          )}\r\n          \r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-gray-900\">{title}</h1>\r\n            {subtitle && (\r\n              <p className=\"mt-1 text-sm text-gray-500\">{subtitle}</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {actions && (\r\n          <div className=\"flex items-center gap-3\">\r\n            {actions}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageHeader;\r\n","/**\r\n * User Statistics Cards Component\r\n */\r\n\r\nimport React from 'react';\r\nimport { Users, Shield } from 'lucide-react';\r\nimport type { UserStats } from './types';\r\n\r\ninterface UserStatsCardsProps {\r\n  stats: UserStats;\r\n}\r\n\r\nexport const UserStatsCards: React.FC<UserStatsCardsProps> = ({ stats }) => {\r\n  const statItems = [\r\n    {\r\n      icon: Users,\r\n      label: 'Total Pengguna',\r\n      value: stats.total,\r\n      color: 'text-blue-600',\r\n      bgColor: 'bg-blue-50',\r\n    },\r\n    {\r\n      icon: Users,\r\n      label: 'Mahasiswa',\r\n      value: stats.students,\r\n      color: 'text-green-600',\r\n      bgColor: 'bg-green-50',\r\n    },\r\n    {\r\n      icon: Users,\r\n      label: 'Dosen',\r\n      value: stats.lecturers,\r\n      color: 'text-purple-600',\r\n      bgColor: 'bg-purple-50',\r\n    },\r\n    {\r\n      icon: Shield,\r\n      label: 'Admin',\r\n      value: stats.admins,\r\n      color: 'text-red-600',\r\n      bgColor: 'bg-red-50',\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\r\n      {statItems.map((item) => (\r\n        <div\r\n          key={item.label}\r\n          className=\"bg-white rounded-lg border border-gray-200 p-4\"\r\n        >\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm text-gray-500\">{item.label}</p>\r\n              <p className=\"text-2xl font-semibold text-gray-900\">{item.value}</p>\r\n            </div>\r\n            <div className={`p-3 rounded-lg ${item.bgColor}`}>\r\n              <item.icon className={`w-6 h-6 ${item.color}`} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserStatsCards;\r\n","/**\r\n * User Management Types\r\n * Shared types and utilities for the UserManagement module\r\n */\r\n\r\nimport type { BackendUser, Mahasiswa, Dosen, RoleAssignmentRequest, CreateUserRequest } from '@/types';\r\nimport { extractString } from '@/utils';\r\n\r\n/**\r\n * Extended user type with student/lecturer details\r\n */\r\nexport interface UserWithDetails extends BackendUser {\r\n  studentInfo?: Mahasiswa;\r\n  lecturerInfo?: Dosen;\r\n  lastLogin?: string;\r\n}\r\n\r\n/**\r\n * Form data for creating/editing users\r\n */\r\nexport interface UserFormData {\r\n  email: string;\r\n  name: string;\r\n  password: string;\r\n  roles: RoleAssignmentRequest[];\r\n}\r\n\r\n/**\r\n * Initial form data state\r\n */\r\nexport const initialFormData: UserFormData = {\r\n  email: '',\r\n  name: '',\r\n  password: '',\r\n  roles: [],\r\n};\r\n\r\n/**\r\n * User statistics interface\r\n */\r\nexport interface UserStats {\r\n  total: number;\r\n  students: number;\r\n  lecturers: number;\r\n  admins: number;\r\n  staff: number;\r\n}\r\n\r\n/**\r\n * Role color mapping\r\n */\r\nexport const getRoleColor = (role: string): string => {\r\n  switch (role) {\r\n    case 'admin':\r\n      return 'bg-red-100 text-red-800';\r\n    case 'lecturer':\r\n      return 'bg-blue-100 text-blue-800';\r\n    case 'student':\r\n      return 'bg-green-100 text-green-800';\r\n    case 'staff':\r\n      return 'bg-purple-100 text-purple-800';\r\n    case 'student_applicant':\r\n      return 'bg-yellow-100 text-yellow-800';\r\n    case 'alumni':\r\n      return 'bg-gray-100 text-gray-800';\r\n    default:\r\n      return 'bg-gray-100 text-gray-800';\r\n  }\r\n};\r\n\r\n/**\r\n * Role label mapping (Indonesian)\r\n */\r\nexport const getRoleLabel = (role: string): string => {\r\n  const labels: Record<string, string> = {\r\n    admin: 'Admin',\r\n    lecturer: 'Dosen',\r\n    student: 'Mahasiswa',\r\n    staff: 'Staff',\r\n    student_applicant: 'Pendaftar',\r\n    alumni: 'Alumni',\r\n    guest: 'Guest',\r\n  };\r\n  return labels[role] || role;\r\n};\r\n\r\n/**\r\n * Extract value from SQL NullString or plain value\r\n * Re-exported from @/utils for backward compatibility within this module\r\n */\r\nexport const getSqlValue = extractString;\r\n\r\n/**\r\n * Bulk user import types\r\n */\r\nexport interface BulkUserEntry extends CreateUserRequest {\r\n  // Additional fields for display\r\n  displayName?: string;\r\n}\r\n\r\n/**\r\n * Available roles for selection\r\n */\r\nexport const availableRoles = [\r\n  { value: 'admin', label: 'Admin' },\r\n  { value: 'staff', label: 'Staff' },\r\n  { value: 'lecturer', label: 'Dosen' },\r\n  { value: 'student', label: 'Mahasiswa' },\r\n  { value: 'alumni', label: 'Alumni' },\r\n  { value: 'student_applicant', label: 'Pendaftar' },\r\n] as const;\r\n\r\n","import React from 'react';\r\nimport { Edit, Trash2, Mail, Phone, ChevronLeft, ChevronRight, BookOpen } from 'lucide-react';\r\nimport type { UserWithDetails } from './types';\r\nimport { getRoleColor, getRoleLabel, getSqlValue } from './types';\r\n\r\ninterface UserTableProps {\r\n  users: UserWithDetails[];\r\n  loading: boolean;\r\n  currentPage: number;\r\n  totalUsers: number;\r\n  itemsPerPage: number;\r\n  onPageChange: (page: number) => void;\r\n  onEditUser: (user: UserWithDetails) => void;\r\n  onDeleteUser: (user: UserWithDetails) => void;\r\n  onManageAssignments: (user: UserWithDetails) => void;\r\n}\r\n\r\nexport const UserTable: React.FC<UserTableProps> = ({\r\n  users,\r\n  loading,\r\n  currentPage,\r\n  totalUsers,\r\n  itemsPerPage,\r\n  onPageChange,\r\n  onEditUser,\r\n  onDeleteUser,\r\n  onManageAssignments,\r\n}) => {\r\n  const totalPages = Math.ceil(totalUsers / itemsPerPage);\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg border border-gray-200\">\r\n      {/* Table */}\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full\">\r\n          <thead className=\"bg-gray-50 border-b border-gray-200\">\r\n            <tr>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Pengguna\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Role\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Entitas\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Kontak\r\n              </th>\r\n              <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Aksi\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"divide-y divide-gray-200\">\r\n            {loading ? (\r\n              <tr>\r\n                <td colSpan={5} className=\"px-6 py-12 text-center\">\r\n                  <div className=\"flex items-center justify-center\">\r\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n                    <span className=\"ml-2 text-gray-500\">Memuat data...</span>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ) : users.length === 0 ? (\r\n              <tr>\r\n                <td colSpan={5} className=\"px-6 py-12 text-center text-gray-500\">\r\n                  Tidak ada pengguna ditemukan\r\n                </td>\r\n              </tr>\r\n            ) : (\r\n              users.map((user) => (\r\n                <UserTableRow\r\n                  key={user.id}\r\n                  user={user}\r\n                  onEdit={onEditUser}\r\n                  onDelete={onDeleteUser}\r\n                  onManageAssignments={onManageAssignments}\r\n                />\r\n              ))\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* Pagination */}\r\n      {totalPages > 1 && (\r\n        <div className=\"px-6 py-4 border-t border-gray-200 flex items-center justify-between\">\r\n          <div className=\"text-sm text-gray-500\">\r\n            Menampilkan {(currentPage - 1) * itemsPerPage + 1} -{' '}\r\n            {Math.min(currentPage * itemsPerPage, totalUsers)} dari {totalUsers} pengguna\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <button\r\n              onClick={() => onPageChange(currentPage - 1)}\r\n              disabled={currentPage === 1}\r\n              className=\"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              <ChevronLeft className=\"w-4 h-4\" />\r\n            </button>\r\n            <span className=\"text-sm text-gray-700\">\r\n              Halaman {currentPage} dari {totalPages}\r\n            </span>\r\n            <button\r\n              onClick={() => onPageChange(currentPage + 1)}\r\n              disabled={currentPage === totalPages}\r\n              className=\"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              <ChevronRight className=\"w-4 h-4\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n/**\r\n * Individual user row component\r\n */\r\ninterface UserTableRowProps {\r\n  user: UserWithDetails;\r\n  onEdit: (user: UserWithDetails) => void;\r\n  onDelete: (user: UserWithDetails) => void;\r\n  onManageAssignments: (user: UserWithDetails) => void;\r\n}\r\n\r\nconst UserTableRow: React.FC<UserTableRowProps> = ({ user, onEdit, onDelete, onManageAssignments }) => {\r\n  const userName = getSqlValue(user.name) || user.email.split('@')[0];\r\n  const roles = user.roles || [];\r\n\r\n  // Get contact info from entity\r\n  const getContactInfo = () => {\r\n    if (user.studentInfo) {\r\n      return {\r\n        email: getSqlValue(user.studentInfo.email),\r\n        phone: getSqlValue(user.studentInfo.no_hp),\r\n      };\r\n    }\r\n    if (user.lecturerInfo) {\r\n      return {\r\n        email: getSqlValue(user.lecturerInfo.email),\r\n        phone: getSqlValue(user.lecturerInfo.no_hp),\r\n      };\r\n    }\r\n    return { email: user.email, phone: '' };\r\n  };\r\n\r\n  const contact = getContactInfo();\r\n\r\n  // Get entity info\r\n  const getEntityInfo = () => {\r\n    const entities: string[] = [];\r\n    \r\n    if (user.studentInfo) {\r\n      entities.push(`NIM: ${user.studentInfo.nim}`);\r\n    }\r\n    if (user.lecturerInfo) {\r\n      entities.push(`NIDN: ${getSqlValue(user.lecturerInfo.nuptk) || user.lecturerInfo.id}`);\r\n    }\r\n    \r\n    return entities;\r\n  };\r\n\r\n  const entityInfo = getEntityInfo();\r\n\r\n  return (\r\n    <tr className=\"hover:bg-gray-50\">\r\n      <td className=\"px-6 py-4\">\r\n        <div className=\"flex items-center\">\r\n          <div className=\"h-10 w-10 flex-shrink-0\">\r\n            <div className=\"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center\">\r\n              <span className=\"text-blue-600 font-medium text-sm\">\r\n                {userName.charAt(0).toUpperCase()}\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div className=\"ml-4\">\r\n            <div className=\"text-sm font-medium text-gray-900\">{userName}</div>\r\n            <div className=\"text-sm text-gray-500\">{user.email}</div>\r\n          </div>\r\n        </div>\r\n      </td>\r\n      <td className=\"px-6 py-4\">\r\n        <div className=\"flex flex-wrap gap-1\">\r\n          {roles.map((roleObj, idx) => (\r\n            <span\r\n              key={idx}\r\n              className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${getRoleColor(roleObj.role)}`}\r\n            >\r\n              {getRoleLabel(roleObj.role)}\r\n            </span>\r\n          ))}\r\n          {roles.length === 0 && (\r\n            <span className=\"text-gray-400 text-sm\">-</span>\r\n          )}\r\n        </div>\r\n      </td>\r\n      <td className=\"px-6 py-4\">\r\n        <div className=\"text-sm text-gray-900\">\r\n          {entityInfo.length > 0 ? (\r\n            entityInfo.map((info, idx) => (\r\n              <div key={idx}>{info}</div>\r\n            ))\r\n          ) : (\r\n            <span className=\"text-gray-400\">-</span>\r\n          )}\r\n        </div>\r\n      </td>\r\n      <td className=\"px-6 py-4\">\r\n        <div className=\"text-sm text-gray-500 space-y-1\">\r\n          {contact.email && (\r\n            <div className=\"flex items-center gap-1\">\r\n              <Mail className=\"w-3 h-3\" />\r\n              <span className=\"truncate max-w-[150px]\">{contact.email}</span>\r\n            </div>\r\n          )}\r\n          {contact.phone && (\r\n            <div className=\"flex items-center gap-1\">\r\n              <Phone className=\"w-3 h-3\" />\r\n              {contact.phone}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </td>\r\n      <td className=\"px-6 py-4 text-right\">\r\n        <div className=\"flex items-center justify-end gap-2\">\r\n          {(user.roles?.some((r) => r.role === 'student' || r.role === 'lecturer')) && (\r\n            <button\r\n              onClick={() => onManageAssignments(user)}\r\n              className=\"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors\"\r\n              title=\"Manage Assignments\"\r\n            >\r\n              <BookOpen className=\"w-4 h-4\" />\r\n            </button>\r\n          )}\r\n          <button\r\n            onClick={() => onEdit(user)}\r\n            className=\"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\r\n            title=\"Edit\"\r\n          >\r\n            <Edit className=\"w-4 h-4\" />\r\n          </button>\r\n          <button\r\n            onClick={() => onDelete(user)}\r\n            className=\"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n            title=\"Hapus\"\r\n          >\r\n            <Trash2 className=\"w-4 h-4\" />\r\n          </button>\r\n        </div>\r\n      </td>\r\n    </tr>\r\n  );\r\n};\r\n\r\nexport default UserTable;\r\n","/**\r\n * User Form Modal Component\r\n * Used for adding and editing users\r\n */\r\n\r\nimport React from 'react';\r\nimport { X, Loader, Trash2 } from 'lucide-react';\r\nimport type { UserFormData } from './types';\r\nimport { getRoleLabel, availableRoles } from './types';\r\nimport type { Mahasiswa, Dosen } from '@/types';\r\n\r\ninterface UserFormModalProps {\r\n  isOpen: boolean;\r\n  isEdit: boolean;\r\n  formData: UserFormData;\r\n  formError: string | null;\r\n  actionLoading: boolean;\r\n  students: Mahasiswa[];\r\n  lecturers: Dosen[];\r\n  onClose: () => void;\r\n  onSubmit: (e: React.FormEvent) => void;\r\n  onFormChange: (data: Partial<UserFormData>) => void;\r\n  onAddRole: (role: string) => void;\r\n  onRemoveRole: (index: number) => void;\r\n  onUpdateRoleEntity: (index: number, entityType: string, entityId: string) => void;\r\n}\r\n\r\nexport const UserFormModal: React.FC<UserFormModalProps> = ({\r\n  isOpen,\r\n  isEdit,\r\n  formData,\r\n  formError,\r\n  actionLoading,\r\n  students,\r\n  lecturers,\r\n  onClose,\r\n  onSubmit,\r\n  onFormChange,\r\n  onAddRole,\r\n  onRemoveRole,\r\n  onUpdateRoleEntity,\r\n}) => {\r\n  if (!isOpen) return null;\r\n\r\n  const title = isEdit ? 'Edit Pengguna' : 'Tambah Pengguna';\r\n  const submitLabel = isEdit ? 'Simpan Perubahan' : 'Tambah Pengguna';\r\n\r\n  return (\r\n    <>\r\n      {/* Backdrop */}\r\n      <div className=\"fixed inset-0 bg-black/50 z-40\" onClick={onClose} />\r\n      \r\n      {/* Modal */}\r\n      <div className=\"fixed inset-0 flex items-center justify-center z-50 p-4 pointer-events-none\">\r\n        <div className=\"bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto pointer-events-auto\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-200\">\r\n          <h2 className=\"text-lg font-semibold text-gray-900\">{title}</h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Form */}\r\n        <form onSubmit={onSubmit}>\r\n          <div className=\"px-6 py-4 space-y-4\">\r\n            {formError && (\r\n              <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm\">\r\n                {formError}\r\n              </div>\r\n            )}\r\n\r\n            {/* Email */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Email <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                value={formData.email}\r\n                onChange={(e) => onFormChange({ email: e.target.value })}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                placeholder=\"email@example.com\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Name */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Nama\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.name}\r\n                onChange={(e) => onFormChange({ name: e.target.value })}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                placeholder=\"Nama lengkap\"\r\n              />\r\n            </div>\r\n\r\n            {/* Password */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Password {!isEdit && <span className=\"text-red-500\">*</span>}\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                value={formData.password}\r\n                onChange={(e) => onFormChange({ password: e.target.value })}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                placeholder={isEdit ? 'Kosongkan jika tidak ingin mengubah' : 'Masukkan password'}\r\n                required={!isEdit}\r\n              />\r\n            </div>\r\n\r\n            {/* Roles */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Role\r\n              </label>\r\n              \r\n              {/* Existing roles */}\r\n              <div className=\"space-y-2 mb-3\">\r\n                {formData.roles.map((roleObj, idx) => (\r\n                  <RoleEntry\r\n                    key={idx}\r\n                    role={roleObj.role}\r\n                    entityId={roleObj.entity_id}\r\n                    students={students}\r\n                    lecturers={lecturers}\r\n                    onUpdateEntity={(entityType, entityId) =>\r\n                      onUpdateRoleEntity(idx, entityType, entityId)\r\n                    }\r\n                    onRemove={() => onRemoveRole(idx)}\r\n                  />\r\n                ))}\r\n              </div>\r\n\r\n              {/* Add role dropdown */}\r\n              <select\r\n                onChange={(e) => {\r\n                  if (e.target.value) {\r\n                    onAddRole(e.target.value);\r\n                    e.target.value = '';\r\n                  }\r\n                }}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                defaultValue=\"\"\r\n              >\r\n                <option value=\"\">+ Tambah Role</option>\r\n                {availableRoles\r\n                  .filter((r) => !formData.roles.some((fr) => fr.role === r.value))\r\n                  .map((r) => (\r\n                    <option key={r.value} value={r.value}>\r\n                      {r.label}\r\n                    </option>\r\n                  ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          <div className=\"px-6 py-4 border-t border-gray-200 flex justify-end gap-3\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\"\r\n              disabled={actionLoading}\r\n            >\r\n              Batal\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center gap-2\"\r\n              disabled={actionLoading}\r\n            >\r\n              {actionLoading && <Loader className=\"w-4 h-4 animate-spin\" />}\r\n              {submitLabel}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\n/**\r\n * Role entry component with entity selection\r\n */\r\ninterface RoleEntryProps {\r\n  role: string;\r\n  entityId?: string;\r\n  students: Mahasiswa[];\r\n  lecturers: Dosen[];\r\n  onUpdateEntity: (entityType: string, entityId: string) => void;\r\n  onRemove: () => void;\r\n}\r\n\r\nconst RoleEntry: React.FC<RoleEntryProps> = ({\r\n  role,\r\n  entityId,\r\n  students,\r\n  lecturers,\r\n  onUpdateEntity,\r\n  onRemove,\r\n}) => {\r\n  const showStudentSelect = role === 'student' || role === 'alumni';\r\n  const showLecturerSelect = role === 'lecturer';\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-2 p-2 bg-gray-50 rounded-lg\">\r\n      <span className=\"text-sm font-medium text-gray-700 min-w-[80px]\">\r\n        {getRoleLabel(role)}\r\n      </span>\r\n\r\n      {showStudentSelect && (\r\n        <select\r\n          value={entityId || ''}\r\n          onChange={(e) => onUpdateEntity('mahasiswa', e.target.value)}\r\n          className=\"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500\"\r\n        >\r\n          <option value=\"\">Pilih Mahasiswa</option>\r\n          {students.map((s) => (\r\n            <option key={s.nim} value={s.nim}>\r\n              {s.nim} - {s.nama || '(No Name)'}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      )}\r\n\r\n      {showLecturerSelect && (\r\n        <select\r\n          value={entityId || ''}\r\n          onChange={(e) => onUpdateEntity('dosen', e.target.value)}\r\n          className=\"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500\"\r\n        >\r\n          <option value=\"\">Pilih Dosen</option>\r\n          {lecturers.map((l) => (\r\n            <option key={l.id} value={l.id}>\r\n              {l.id} - {l.nama_dosen || '(No Name)'}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      )}\r\n\r\n      {!showStudentSelect && !showLecturerSelect && (\r\n        <span className=\"flex-1 text-sm text-gray-500\">\r\n          Tidak memerlukan entitas\r\n        </span>\r\n      )}\r\n\r\n      <button\r\n        type=\"button\"\r\n        onClick={onRemove}\r\n        className=\"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors\"\r\n      >\r\n        <Trash2 className=\"w-4 h-4\" />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserFormModal;\r\n","import { useQuery, useMutation, useQueryClient, type UseMutationOptions, type UseQueryOptions } from '@tanstack/react-query';\r\nimport { apiService, type MessageResponse } from '../services/api';\r\nimport type { BackendUser, PaginatedUsersResponse, CreateUserRequest, UpdateUserRequest, Mahasiswa, Dosen, BulkCreateUsersRequest } from '../types';\r\n\r\n// Users list with pagination/search\r\nexport function useUsersList(\r\n  params: { q?: string; limit?: number; offset?: number },\r\n  options?: Omit<UseQueryOptions<PaginatedUsersResponse, Error>, 'queryKey' | 'queryFn'>\r\n) {\r\n  const key = ['users', params.q ?? null, params.limit ?? null, params.offset ?? null] as const;\r\n  return useQuery<PaginatedUsersResponse, Error>({\r\n    queryKey: key,\r\n    queryFn: () => apiService.getUsers(params),\r\n    ...(options ?? {}),\r\n  });\r\n}\r\n\r\nexport const usersQueryRootKey = ['users'] as const;\r\n\r\n// Students and lecturers master lists (optionally filter by program)\r\nexport function useStudentsList(\r\n  kode_prodi?: string,\r\n  options?: Omit<UseQueryOptions<Mahasiswa[], Error>, 'queryKey' | 'queryFn'>\r\n) {\r\n  const key = ['students', kode_prodi ?? null] as const;\r\n  return useQuery<Mahasiswa[], Error>({\r\n    queryKey: key,\r\n    queryFn: () => apiService.getStudents(kode_prodi),\r\n    ...(options ?? {}),\r\n  });\r\n}\r\n\r\nexport function useLecturersList(\r\n  kode_prodi?: string,\r\n  options?: Omit<UseQueryOptions<Dosen[], Error>, 'queryKey' | 'queryFn'>\r\n) {\r\n  const key = ['lecturers', kode_prodi ?? null] as const;\r\n  return useQuery<Dosen[], Error>({\r\n    queryKey: key,\r\n    queryFn: () => apiService.getLecturers(kode_prodi),\r\n    ...(options ?? {}),\r\n  });\r\n}\r\n\r\n// Fetch single lecturer by id\r\nexport function useLecturerById(\r\n  id?: string,\r\n  options?: Omit<UseQueryOptions<Dosen, Error>, 'queryKey' | 'queryFn'>\r\n) {\r\n  const key = ['lecturer', id ?? null] as const;\r\n  return useQuery<Dosen, Error>({\r\n    queryKey: key,\r\n    queryFn: () => apiService.getLecturerByID(String(id)),\r\n    enabled: !!id,\r\n    ...(options ?? {}),\r\n  });\r\n}\r\n\r\n// User mutations\r\nexport function useCreateUser(\r\n  options?: UseMutationOptions<BackendUser, Error, CreateUserRequest>\r\n) {\r\n  const qc = useQueryClient();\r\n  return useMutation<BackendUser, Error, CreateUserRequest>({\r\n    mutationFn: (payload) => apiService.createUser(payload),\r\n    onSuccess: (...args) => {\r\n      // Invalidate all users queries\r\n      qc.invalidateQueries({ queryKey: usersQueryRootKey });\r\n      options?.onSuccess?.(...args);\r\n    },\r\n    ...options,\r\n  });\r\n}\r\n\r\nexport function useUpdateUser(\r\n  options?: UseMutationOptions<MessageResponse, Error, { id: number; data: UpdateUserRequest }>\r\n) {\r\n  const qc = useQueryClient();\r\n  return useMutation<MessageResponse, Error, { id: number; data: UpdateUserRequest}>({\r\n    mutationFn: ({ id, data }) => apiService.updateUser(id, data),\r\n    onSuccess: (...args) => {\r\n      qc.invalidateQueries({ queryKey: usersQueryRootKey });\r\n      options?.onSuccess?.(...args);\r\n    },\r\n    ...options,\r\n  });\r\n}\r\n\r\nexport function useDeleteUser(\r\n  options?: UseMutationOptions<MessageResponse, Error, { id: number }>\r\n) {\r\n  const qc = useQueryClient();\r\n  return useMutation<MessageResponse, Error, { id: number }>({\r\n    mutationFn: ({ id }) => apiService.deleteUser(id),\r\n    onSuccess: (...args) => {\r\n      qc.invalidateQueries({ queryKey: usersQueryRootKey });\r\n      options?.onSuccess?.(...args);\r\n    },\r\n    ...options,\r\n  });\r\n}\r\n\r\nexport function useBulkCreateUsers(\r\n  options?: UseMutationOptions<MessageResponse, Error, BulkCreateUsersRequest>\r\n) {\r\n  const qc = useQueryClient();\r\n  return useMutation<MessageResponse, Error, BulkCreateUsersRequest>({\r\n    mutationFn: (payload) => apiService.bulkCreateUsers(payload),\r\n    onSuccess: (...args) => {\r\n      qc.invalidateQueries({ queryKey: usersQueryRootKey });\r\n      options?.onSuccess?.(...args);\r\n    },\r\n    ...options,\r\n  });\r\n}\r\n\r\n// Entity mutations used by bulk import flows\r\nexport function useCreateStudent(\r\n  options?: UseMutationOptions<MessageResponse, Error, import('../types').CreateMahasiswaRequest>\r\n) {\r\n  const qc = useQueryClient();\r\n  return useMutation<MessageResponse, Error, import('../types').CreateMahasiswaRequest>({\r\n    mutationFn: (payload) => apiService.createStudent(payload),\r\n    onSuccess: (...args) => {\r\n      qc.invalidateQueries({ queryKey: ['students'] });\r\n      options?.onSuccess?.(...args);\r\n    },\r\n    ...options,\r\n  });\r\n}\r\n\r\nexport function useCreateLecturer(\r\n  options?: UseMutationOptions<MessageResponse, Error, import('../types').CreateDosenRequest>\r\n) {\r\n  const qc = useQueryClient();\r\n  return useMutation<MessageResponse, Error, import('../types').CreateDosenRequest>({\r\n    mutationFn: (payload) => apiService.createLecturer(payload),\r\n    onSuccess: (...args) => {\r\n      qc.invalidateQueries({ queryKey: ['lecturers'] });\r\n      options?.onSuccess?.(...args);\r\n    },\r\n    ...options,\r\n  });\r\n}\r\n","/**\r\n * API Client - Base HTTP client with authentication\r\n * Handles token management, request/response, and error handling\r\n */\r\n\r\nimport { apiLogger } from '@/utils/logger';\r\n\r\n// Re-export types for backward compatibility\r\nexport type { SqlNullString } from '@/types';\r\n\r\nconst API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8080';\r\n\r\n/**\r\n * Decode JWT token without verification (for client-side expiration check)\r\n */\r\nfunction decodeJWT(token: string): { exp?: number; iat?: number } | null {\r\n  try {\r\n    const base64Url = token.split('.')[1];\r\n    if (!base64Url) return null;\r\n    const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n    const jsonPayload = decodeURIComponent(\r\n      atob(base64)\r\n        .split('')\r\n        .map((c) => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2))\r\n        .join('')\r\n    );\r\n    return JSON.parse(jsonPayload);\r\n  } catch (error) {\r\n    apiLogger.error('Failed to decode JWT:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport interface ApiError {\r\n  error: string;\r\n}\r\n\r\nexport interface MessageResponse {\r\n  message: string;\r\n}\r\n\r\n/**\r\n * Core API Client class handling HTTP requests and authentication\r\n */\r\nexport class ApiClient {\r\n  private baseUrl: string;\r\n  private accessToken: string | null = null;\r\n  private refreshToken: string | null = null;\r\n  private tokenOperationInProgress = false;\r\n  private refreshPromise: Promise<string> | null = null;\r\n  private refreshTimerId: ReturnType<typeof setTimeout> | null = null;\r\n  private onAuthError: (() => void) | null = null;\r\n\r\n  constructor(baseUrl: string = API_BASE_URL) {\r\n    this.baseUrl = baseUrl;\r\n    this.loadTokensFromStorage();\r\n  }\r\n\r\n  setAuthErrorHandler(handler: () => void): void {\r\n    this.onAuthError = handler;\r\n  }\r\n\r\n  private loadTokensFromStorage(): void {\r\n    try {\r\n      this.accessToken = localStorage.getItem('accessToken');\r\n      this.refreshToken = localStorage.getItem('refreshToken');\r\n      \r\n      if (this.accessToken) {\r\n        this.scheduleTokenRefresh();\r\n      }\r\n    } catch (error) {\r\n      apiLogger.error('Error loading tokens from storage:', error);\r\n      this.accessToken = null;\r\n      this.refreshToken = null;\r\n    }\r\n  }\r\n\r\n  private scheduleTokenRefresh(): void {\r\n    if (this.refreshTimerId) {\r\n      clearTimeout(this.refreshTimerId);\r\n      this.refreshTimerId = null;\r\n    }\r\n\r\n    if (!this.accessToken || !this.refreshToken) {\r\n      return;\r\n    }\r\n\r\n    const payload = decodeJWT(this.accessToken);\r\n    if (!payload || !payload.exp) {\r\n      return;\r\n    }\r\n\r\n    const now = Math.floor(Date.now() / 1000);\r\n    const expiresIn = payload.exp - now;\r\n    const refreshIn = Math.max(0, expiresIn - 120);\r\n\r\n    apiLogger.log(`Token expires in ${expiresIn}s, scheduling refresh in ${refreshIn}s`);\r\n\r\n    this.refreshTimerId = setTimeout(async () => {\r\n      try {\r\n        apiLogger.log('Proactively refreshing access token...');\r\n        await this.refreshAccessToken();\r\n      } catch (error) {\r\n        apiLogger.error('Proactive token refresh failed:', error);\r\n      }\r\n    }, refreshIn * 1000);\r\n  }\r\n\r\n  setTokens(accessToken: string, refreshToken?: string): void {\r\n    if (this.tokenOperationInProgress) {\r\n      apiLogger.warn('Token operation already in progress');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      this.tokenOperationInProgress = true;\r\n      this.accessToken = accessToken;\r\n      localStorage.setItem('accessToken', accessToken);\r\n      \r\n      if (refreshToken) {\r\n        this.refreshToken = refreshToken;\r\n        localStorage.setItem('refreshToken', refreshToken);\r\n      }\r\n      \r\n      this.scheduleTokenRefresh();\r\n    } finally {\r\n      this.tokenOperationInProgress = false;\r\n    }\r\n  }\r\n\r\n  clearTokens(): void {\r\n    if (this.tokenOperationInProgress) {\r\n      apiLogger.warn('Token operation already in progress');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      this.tokenOperationInProgress = true;\r\n      \r\n      if (this.refreshTimerId) {\r\n        clearTimeout(this.refreshTimerId);\r\n        this.refreshTimerId = null;\r\n      }\r\n      \r\n      this.accessToken = null;\r\n      this.refreshToken = null;\r\n      this.refreshPromise = null;\r\n      localStorage.removeItem('accessToken');\r\n      localStorage.removeItem('refreshToken');\r\n    } finally {\r\n      this.tokenOperationInProgress = false;\r\n    }\r\n  }\r\n\r\n  hasTokens(): boolean {\r\n    return Boolean(this.accessToken);\r\n  }\r\n\r\n  /**\r\n   * Make an HTTP request with automatic token handling and retry\r\n   */\r\n  async request<T>(\r\n    endpoint: string,\r\n    options: RequestInit = {},\r\n    isRetry: boolean = false\r\n  ): Promise<T> {\r\n    const url = `${this.baseUrl}${endpoint}`;\r\n    const headers: Record<string, string> = {\r\n      'Content-Type': 'application/json',\r\n    };\r\n\r\n    if (options.headers) {\r\n      Object.entries(options.headers).forEach(([key, value]) => {\r\n        if (typeof value === 'string') {\r\n          headers[key] = value;\r\n        }\r\n      });\r\n    }\r\n\r\n    if (this.accessToken) {\r\n      headers['Token'] = this.accessToken;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(url, {\r\n        ...options,\r\n        headers,\r\n      });\r\n\r\n      if (response.status === 401 && this.refreshToken && !isRetry && !endpoint.includes('/auth/refresh')) {\r\n        apiLogger.log('Access token expired, attempting to refresh...');\r\n        \r\n        try {\r\n          if (!this.refreshPromise) {\r\n            this.refreshPromise = this.refreshAccessToken().finally(() => {\r\n              this.refreshPromise = null;\r\n            });\r\n          }\r\n          \r\n          await this.refreshPromise;\r\n          return this.request<T>(endpoint, options, true);\r\n        } catch (refreshError) {\r\n          apiLogger.error('Token refresh failed:', refreshError);\r\n          this.clearTokens();\r\n          if (this.onAuthError) {\r\n            this.onAuthError();\r\n          }\r\n          throw new Error('Session expired. Please login again.');\r\n        }\r\n      }\r\n\r\n      if (!response.ok) {\r\n        const error: ApiError = await response.json().catch(() => ({\r\n          error: `HTTP ${response.status}: ${response.statusText}`,\r\n        }));\r\n        \r\n        const errorMessage = `${error.error || response.statusText} (HTTP ${response.status})`;\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      return response.json();\r\n    } catch (error) {\r\n      apiLogger.error('API request failed:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh the access token using the refresh token\r\n   */\r\n  async refreshAccessToken(): Promise<string> {\r\n    if (!this.refreshToken) {\r\n      throw new Error('No refresh token available');\r\n    }\r\n\r\n    const url = `${this.baseUrl}/auth/refresh`;\r\n    const headers: Record<string, string> = {\r\n      'Content-Type': 'application/json',\r\n    };\r\n\r\n    try {\r\n      const response = await fetch(url, {\r\n        method: 'POST',\r\n        headers,\r\n        body: JSON.stringify({ refresh_token: this.refreshToken }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const error: ApiError = await response.json().catch(() => ({\r\n          error: `HTTP ${response.status}: ${response.statusText}`,\r\n        }));\r\n        throw new Error(error.error || 'Token refresh failed');\r\n      }\r\n\r\n      const data = await response.json() as { access_token: string; refresh_token?: string };\r\n      this.setTokens(data.access_token, data.refresh_token);\r\n      \r\n      apiLogger.log('Access token refreshed successfully');\r\n      return data.access_token;\r\n    } catch (error) {\r\n      apiLogger.error('Failed to refresh access token:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Convenience methods for HTTP verbs\r\n  get<T>(endpoint: string): Promise<T> {\r\n    return this.request<T>(endpoint, { method: 'GET' });\r\n  }\r\n\r\n  post<T>(endpoint: string, body?: unknown): Promise<T> {\r\n    return this.request<T>(endpoint, {\r\n      method: 'POST',\r\n      body: body ? JSON.stringify(body) : undefined,\r\n    });\r\n  }\r\n\r\n  put<T>(endpoint: string, body?: unknown): Promise<T> {\r\n    return this.request<T>(endpoint, {\r\n      method: 'PUT',\r\n      body: body ? JSON.stringify(body) : undefined,\r\n    });\r\n  }\r\n\r\n  delete<T>(endpoint: string): Promise<T> {\r\n    return this.request<T>(endpoint, { method: 'DELETE' });\r\n  }\r\n}\r\n\r\n// Singleton instance\r\nexport const apiClient = new ApiClient();\r\n\r\nexport default apiClient;\r\n","/**\r\n * User Assignments Component\r\n * Manages class enrollments for students and teaching assignments for lecturers\r\n */\r\n\r\nimport React, { useState, useMemo } from 'react';\r\nimport { X, Plus, BookOpen, Users, Trash2, Save, Loader } from 'lucide-react';\r\nimport type { UserWithDetails } from './types';\r\nimport { useCourses, useLecturerAssignments } from '@/hooks';\r\nimport { apiService } from '@/services';\r\nimport type { CreateEnrollmentRequest, CreateDosenPengajarRequest, DosenPengajar, KelasResponse } from '@/types';\r\nimport { extractString, extractNumber } from '@/utils';\r\n\r\ninterface UserAssignmentsProps {\r\n  user: UserWithDetails;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  currentSemester?: string;\r\n}\r\n\r\nexport const UserAssignments: React.FC<UserAssignmentsProps> = ({\r\n  user,\r\n  isOpen,\r\n  onClose,\r\n  currentSemester,\r\n}) => {\r\n  const [activeTab, setActiveTab] = useState<'enrollments' | 'teaching'>('enrollments');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState<string | null>(null);\r\n\r\n  // Enrollment management (for students)\r\n  const [enrollments, setEnrollments] = useState<{ kode_mk: string; id_kelas?: number }[]>([]);\r\n  const [newEnrollment, setNewEnrollment] = useState({ kode_mk: '', id_kelas: '' });\r\n\r\n  // Teaching assignment management (for lecturers)\r\n  const [teachingAssignments, setTeachingAssignments] = useState<DosenPengajar[]>([]);\r\n  const [newAssignment, setNewAssignment] = useState({\r\n    kode_mk: '',\r\n    id_kelas: '',\r\n    sks_ajar: '',\r\n    tatap_muka: '',\r\n  });\r\n  const [showAddAssignmentForm, setShowAddAssignmentForm] = useState(false);\r\n\r\n  // Fetch courses with classes\r\n  const { data: courses = [] } = useCourses({ \r\n    semester: currentSemester, \r\n    include_classes: true \r\n  });\r\n  \r\n  // Flatten classes from all courses\r\n  const classes = useMemo(() => {\r\n    const allClasses: KelasResponse[] = [];\r\n    courses.forEach((course) => {\r\n      if (course.classes && Array.isArray(course.classes)) {\r\n        allClasses.push(...course.classes);\r\n      }\r\n    });\r\n    return allClasses;\r\n  }, [courses]);\r\n\r\n  const studentRole = user?.roles?.find((r) => r.role === 'student');\r\n  const lecturerRole = user?.roles?.find((r) => r.role === 'lecturer');\r\n  \r\n  const { data: lecturerAssignmentsData } = useLecturerAssignments(\r\n    lecturerRole?.entity_id && currentSemester\r\n      ? { id_dosen: lecturerRole.entity_id, semester: currentSemester }\r\n      : undefined\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    if (lecturerAssignmentsData) {\r\n      setTeachingAssignments(lecturerAssignmentsData);\r\n    }\r\n  }, [lecturerAssignmentsData]);\r\n\r\n  // Load enrollments for student\r\n  React.useEffect(() => {\r\n    if (isOpen && studentRole?.entity_id && currentSemester) {\r\n      loadEnrollments();\r\n    }\r\n  }, [isOpen, studentRole?.entity_id, currentSemester]);\r\n\r\n  const loadEnrollments = async () => {\r\n    if (!studentRole?.entity_id || !currentSemester) return;\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n    try {\r\n      const data = await apiService.getEnrollments(studentRole.entity_id, currentSemester);\r\n      setEnrollments(data.map((e) => ({\r\n        kode_mk: extractString(e.kode_mk) || '',\r\n        id_kelas: extractNumber(e.id_kelas) ?? undefined,\r\n      })));\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to load enrollments');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAddEnrollment = () => {\r\n    if (!newEnrollment.kode_mk) {\r\n      setError('Please select a course');\r\n      return;\r\n    }\r\n\r\n    const classId = newEnrollment.id_kelas ? Number(newEnrollment.id_kelas) : undefined;\r\n    \r\n    // Check if already enrolled\r\n    if (enrollments.some((e) => e.kode_mk === newEnrollment.kode_mk && e.id_kelas === classId)) {\r\n      setError('Already enrolled in this class');\r\n      return;\r\n    }\r\n\r\n    setEnrollments([...enrollments, { kode_mk: newEnrollment.kode_mk, id_kelas: classId }]);\r\n    setNewEnrollment({ kode_mk: '', id_kelas: '' });\r\n    setError(null);\r\n  };\r\n\r\n  const handleRemoveEnrollment = (index: number) => {\r\n    setEnrollments(enrollments.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const handleSaveEnrollments = async () => {\r\n    if (!studentRole?.entity_id || !currentSemester) return;\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n    setSuccess(null);\r\n\r\n    try {\r\n      const payload: CreateEnrollmentRequest[] = enrollments.map((e) => ({\r\n        nim: studentRole.entity_id!,\r\n        kode_mk: e.kode_mk,\r\n        semester: currentSemester,\r\n        id_kelas: e.id_kelas,\r\n      }));\r\n\r\n      await apiService.updateEnrollments(studentRole.entity_id, currentSemester, payload);\r\n      setSuccess('Enrollments saved successfully!');\r\n      setTimeout(() => setSuccess(null), 3000);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to save enrollments');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAddTeachingAssignment = async () => {\r\n    if (!lecturerRole?.entity_id || !newAssignment.kode_mk || !newAssignment.id_kelas || !currentSemester) {\r\n      setError('Please fill in all required fields');\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n    try {\r\n      const payload: CreateDosenPengajarRequest = {\r\n        id_dosen: lecturerRole.entity_id,\r\n        id_kelas: newAssignment.id_kelas,\r\n        kode_mk: newAssignment.kode_mk,\r\n        semester: currentSemester,\r\n        sks_ajar: newAssignment.sks_ajar ? parseInt(newAssignment.sks_ajar, 10) : undefined,\r\n        tatap_muka: newAssignment.tatap_muka ? parseInt(newAssignment.tatap_muka, 10) : undefined,\r\n      };\r\n\r\n      await apiService.createLecturerAssignment(payload);\r\n      setSuccess('Teaching assignment created successfully');\r\n      setNewAssignment({ kode_mk: '', id_kelas: '', sks_ajar: '', tatap_muka: '' });\r\n      setShowAddAssignmentForm(false);\r\n\r\n      // Reload assignments\r\n      if (lecturerRole?.entity_id && currentSemester) {\r\n        const updated = await apiService.getLecturerAssignments({\r\n          id_dosen: lecturerRole.entity_id,\r\n          semester: currentSemester,\r\n        });\r\n        setTeachingAssignments(updated);\r\n      }\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to add teaching assignment');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRemoveTeachingAssignment = async (assignmentId: number) => {\r\n    if (!confirm('Are you sure you want to remove this teaching assignment?')) return;\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n    try {\r\n      await apiService.deleteLecturerAssignment(assignmentId);\r\n      setSuccess('Teaching assignment removed successfully');\r\n      setTeachingAssignments(teachingAssignments.filter((a) => a.id !== assignmentId));\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to remove teaching assignment');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Get unique course codes from classes\r\n  const availableCourses = useMemo(() => {\r\n    const coursesMap = new Map<string, string>();\r\n    classes.forEach((cls: KelasResponse) => {\r\n      const kode = extractString(cls.kode_mk);\r\n      if (kode && !coursesMap.has(kode)) {\r\n        coursesMap.set(kode, kode);\r\n      }\r\n    });\r\n    return Array.from(coursesMap.values());\r\n  }, [classes]);\r\n\r\n  // Get classes for selected course\r\n  const availableClasses = useMemo(() => {\r\n    if (!newEnrollment.kode_mk) return [];\r\n    return classes.filter((cls: KelasResponse) => extractString(cls.kode_mk) === newEnrollment.kode_mk);\r\n  }, [classes, newEnrollment.kode_mk]);\r\n\r\n  if (!isOpen || !user) return null;\r\n\r\n  const isStudent = !!studentRole;\r\n  const isLecturer = !!lecturerRole;\r\n\r\n  return (\r\n    <>\r\n      {/* Backdrop */}\r\n      <div className=\"fixed inset-0 bg-black/50 z-40\" onClick={onClose} />\r\n      \r\n      {/* Modal */}\r\n      <div className=\"fixed inset-0 flex items-center justify-center z-50 p-4 pointer-events-none\">\r\n        <div className=\"bg-white rounded-xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto pointer-events-auto\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-200 sticky top-0 bg-white z-10\">\r\n            <h2 className=\"text-lg font-semibold text-gray-900\">\r\n              Manage Assignments - {extractString(user.name) || user.email}\r\n            </h2>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\r\n            >\r\n              <X className=\"w-5 h-5\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Tabs */}\r\n          {isStudent && isLecturer && (\r\n            <div className=\"px-6 pt-4 border-b border-gray-200\">\r\n              <div className=\"flex gap-4\">\r\n                <button\r\n                  onClick={() => setActiveTab('enrollments')}\r\n                  className={`pb-2 px-1 border-b-2 font-medium text-sm transition-colors ${\r\n                    activeTab === 'enrollments'\r\n                      ? 'border-blue-600 text-blue-600'\r\n                      : 'border-transparent text-gray-500 hover:text-gray-700'\r\n                  }`}\r\n                >\r\n                  <Users className=\"w-4 h-4 inline mr-2\" />\r\n                  Class Enrollments\r\n                </button>\r\n                <button\r\n                  onClick={() => setActiveTab('teaching')}\r\n                  className={`pb-2 px-1 border-b-2 font-medium text-sm transition-colors ${\r\n                    activeTab === 'teaching'\r\n                      ? 'border-blue-600 text-blue-600'\r\n                      : 'border-transparent text-gray-500 hover:text-gray-700'\r\n                  }`}\r\n                >\r\n                  <BookOpen className=\"w-4 h-4 inline mr-2\" />\r\n                  Teaching Assignments\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Content */}\r\n          <div className=\"p-6 space-y-4\">\r\n            {/* Alerts */}\r\n            {error && (\r\n              <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm\">\r\n                {error}\r\n              </div>\r\n            )}\r\n            {success && (\r\n              <div className=\"p-3 bg-green-50 border border-green-200 rounded-lg text-green-600 text-sm\">\r\n                {success}\r\n              </div>\r\n            )}\r\n\r\n            {/* Enrollments Tab */}\r\n            {(activeTab === 'enrollments' || !isLecturer) && isStudent && (\r\n              <div className=\"space-y-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <h3 className=\"text-sm font-medium text-gray-900\">Student Enrollments</h3>\r\n                  <span className=\"text-xs text-gray-500\">\r\n                    Semester: {currentSemester || 'N/A'}\r\n                  </span>\r\n                </div>\r\n\r\n                {/* Add New Enrollment */}\r\n                <div className=\"border border-gray-200 rounded-lg p-4 space-y-3\">\r\n                  <h4 className=\"text-sm font-medium text-gray-700\">Add Enrollment</h4>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\r\n                    <select\r\n                      value={newEnrollment.kode_mk}\r\n                      onChange={(e) => setNewEnrollment({ ...newEnrollment, kode_mk: e.target.value, id_kelas: '' })}\r\n                      className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                    >\r\n                      <option value=\"\">Select Course</option>\r\n                      {availableCourses.map((code) => (\r\n                        <option key={code} value={code}>\r\n                          {code}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n\r\n                    <select\r\n                      value={newEnrollment.id_kelas}\r\n                      onChange={(e) => setNewEnrollment({ ...newEnrollment, id_kelas: e.target.value })}\r\n                      className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                      disabled={!newEnrollment.kode_mk}\r\n                    >\r\n                      <option value=\"\">Any Class</option>\r\n                      {availableClasses.map((cls: KelasResponse) => (\r\n                        <option key={cls.id} value={cls.id}>\r\n                          {extractString(cls.nama_kelas) || `Class ${cls.id}`}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n\r\n                    <button\r\n                      onClick={handleAddEnrollment}\r\n                      className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm flex items-center justify-center gap-2\"\r\n                      disabled={!newEnrollment.kode_mk}\r\n                    >\r\n                      <Plus className=\"w-4 h-4\" />\r\n                      Add\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Current Enrollments */}\r\n                <div className=\"border border-gray-200 rounded-lg overflow-hidden\">\r\n                  {enrollments.length === 0 ? (\r\n                    <div className=\"p-8 text-center text-gray-500 text-sm\">\r\n                      No enrollments yet. Add courses above.\r\n                    </div>\r\n                  ) : (\r\n                    <table className=\"w-full text-sm\">\r\n                      <thead className=\"bg-gray-50\">\r\n                        <tr>\r\n                          <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                            Course Code\r\n                          </th>\r\n                          <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                            Class\r\n                          </th>\r\n                          <th className=\"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase\">\r\n                            Action\r\n                          </th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody className=\"divide-y divide-gray-200\">\r\n                        {enrollments.map((enrollment, idx) => {\r\n                          const cls = classes.find((c: KelasResponse) => c.id === enrollment.id_kelas);\r\n                          return (\r\n                            <tr key={idx} className=\"hover:bg-gray-50\">\r\n                              <td className=\"px-4 py-3 font-medium text-gray-900\">\r\n                                {enrollment.kode_mk}\r\n                              </td>\r\n                              <td className=\"px-4 py-3 text-gray-600\">\r\n                                {cls ? extractString(cls.nama_kelas) || `Class ${cls.id}` : 'Any Class'}\r\n                              </td>\r\n                              <td className=\"px-4 py-3 text-right\">\r\n                                <button\r\n                                  onClick={() => handleRemoveEnrollment(idx)}\r\n                                  className=\"p-1 text-red-600 hover:bg-red-50 rounded transition-colors\"\r\n                                >\r\n                                  <Trash2 className=\"w-4 h-4\" />\r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })}\r\n                      </tbody>\r\n                    </table>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Save Button */}\r\n                <div className=\"flex justify-end\">\r\n                  <button\r\n                    onClick={handleSaveEnrollments}\r\n                    disabled={isLoading}\r\n                    className=\"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 disabled:opacity-50\"\r\n                  >\r\n                    {isLoading ? (\r\n                      <>\r\n                        <Loader className=\"w-4 h-4 animate-spin\" />\r\n                        Saving...\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <Save className=\"w-4 h-4\" />\r\n                        Save Enrollments\r\n                      </>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Teaching Assignments Tab */}\r\n            {(activeTab === 'teaching' || !isStudent) && isLecturer && (\r\n              <div className=\"space-y-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <h3 className=\"text-sm font-medium text-gray-900\">Teaching Assignments</h3>\r\n                  <button\r\n                    onClick={() => setShowAddAssignmentForm(!showAddAssignmentForm)}\r\n                    disabled={isLoading}\r\n                    className=\"px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm flex items-center gap-2 disabled:opacity-50\"\r\n                  >\r\n                    <Plus className=\"w-4 h-4\" />\r\n                    Add Assignment\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Add Assignment Form */}\r\n                {showAddAssignmentForm && (\r\n                  <div className=\"p-4 bg-gray-50 border border-gray-200 rounded-lg space-y-3\">\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\r\n                      {/* Course Selection */}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                          Course <span className=\"text-red-600\">*</span>\r\n                        </label>\r\n                        <select\r\n                          value={newAssignment.kode_mk}\r\n                          onChange={(e) => setNewAssignment({ ...newAssignment, kode_mk: e.target.value })}\r\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"\r\n                        >\r\n                          <option value=\"\">Select course...</option>\r\n                          {Array.from(new Set(classes.map((c: KelasResponse) => extractString(c.kode_mk)))).map((kode) => (\r\n                            <option key={kode} value={kode || ''}>\r\n                              {kode}\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n\r\n                      {/* Class Selection */}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                          Class <span className=\"text-red-600\">*</span>\r\n                        </label>\r\n                        <select\r\n                          value={newAssignment.id_kelas}\r\n                          onChange={(e) => setNewAssignment({ ...newAssignment, id_kelas: e.target.value })}\r\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"\r\n                        >\r\n                          <option value=\"\">Select class...</option>\r\n                          {classes\r\n                            .filter((c: KelasResponse) => extractString(c.kode_mk) === newAssignment.kode_mk)\r\n                            .map((c: KelasResponse) => (\r\n                              <option key={c.id} value={c.id.toString()}>\r\n                                {extractString(c.nama_kelas) || `Class ${c.id}`}\r\n                              </option>\r\n                            ))}\r\n                        </select>\r\n                      </div>\r\n\r\n                      {/* SKS Ajar */}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                          SKS Ajar\r\n                        </label>\r\n                        <input\r\n                          type=\"number\"\r\n                          value={newAssignment.sks_ajar}\r\n                          onChange={(e) => setNewAssignment({ ...newAssignment, sks_ajar: e.target.value })}\r\n                          min=\"0\"\r\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"\r\n                          placeholder=\"0\"\r\n                        />\r\n                      </div>\r\n\r\n                      {/* Tatap Muka */}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                          Tatap Muka\r\n                        </label>\r\n                        <input\r\n                          type=\"number\"\r\n                          value={newAssignment.tatap_muka}\r\n                          onChange={(e) => setNewAssignment({ ...newAssignment, tatap_muka: e.target.value })}\r\n                          min=\"0\"\r\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"\r\n                          placeholder=\"0\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Form Actions */}\r\n                    <div className=\"flex justify-end gap-2\">\r\n                      <button\r\n                        onClick={() => {\r\n                          setShowAddAssignmentForm(false);\r\n                          setNewAssignment({ kode_mk: '', id_kelas: '', sks_ajar: '', tatap_muka: '' });\r\n                        }}\r\n                        disabled={isLoading}\r\n                        className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors text-sm disabled:opacity-50\"\r\n                      >\r\n                        Cancel\r\n                      </button>\r\n                      <button\r\n                        onClick={handleAddTeachingAssignment}\r\n                        disabled={isLoading || !newAssignment.kode_mk || !newAssignment.id_kelas}\r\n                        className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm flex items-center gap-2 disabled:opacity-50\"\r\n                      >\r\n                        {isLoading ? (\r\n                          <>\r\n                            <Loader className=\"w-4 h-4 animate-spin\" />\r\n                            Creating...\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            <Plus className=\"w-4 h-4\" />\r\n                            Create Assignment\r\n                          </>\r\n                        )}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Assignments Table */}\r\n                <div className=\"border border-gray-200 rounded-lg overflow-hidden\">\r\n                  {teachingAssignments.length === 0 ? (\r\n                    <div className=\"p-8 text-center text-gray-500 text-sm\">\r\n                      No teaching assignments found.\r\n                    </div>\r\n                  ) : (\r\n                    <table className=\"w-full text-sm\">\r\n                      <thead className=\"bg-gray-50\">\r\n                        <tr>\r\n                          <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                            Course\r\n                          </th>\r\n                          <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                            Class\r\n                          </th>\r\n                          <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                            Semester\r\n                          </th>\r\n                          <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                            SKS\r\n                          </th>\r\n                          <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                            Tatap Muka\r\n                          </th>\r\n                          <th className=\"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase\">\r\n                            Action\r\n                          </th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody className=\"divide-y divide-gray-200\">\r\n                        {teachingAssignments.map((assignment) => (\r\n                          <tr key={assignment.id} className=\"hover:bg-gray-50\">\r\n                            <td className=\"px-4 py-3 font-medium text-gray-900\">\r\n                              {extractString(assignment.kode_mk) || '-'}\r\n                            </td>\r\n                            <td className=\"px-4 py-3 text-gray-600\">\r\n                              {extractString(assignment.id_kelas) || '-'}\r\n                            </td>\r\n                            <td className=\"px-4 py-3 text-gray-600\">\r\n                              {extractString(assignment.semester) || '-'}\r\n                            </td>\r\n                            <td className=\"px-4 py-3 text-gray-600\">\r\n                              {extractNumber(assignment.sks_ajar) || '-'}\r\n                            </td>\r\n                            <td className=\"px-4 py-3 text-gray-600\">\r\n                              {extractNumber(assignment.tatap_muka) || '-'}\r\n                            </td>\r\n                            <td className=\"px-4 py-3 text-right\">\r\n                              <button\r\n                                onClick={() => handleRemoveTeachingAssignment(assignment.id)}\r\n                                disabled={isLoading}\r\n                                className=\"p-1 text-red-600 hover:bg-red-50 rounded transition-colors disabled:opacity-50\"\r\n                              >\r\n                                <Trash2 className=\"w-4 h-4\" />\r\n                              </button>\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {!isStudent && !isLecturer && (\r\n              <div className=\"p-8 text-center text-gray-500\">\r\n                This user doesn't have student or lecturer role.\r\n                <br />\r\n                Add appropriate roles first to manage assignments.\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","/**\r\n * Custom hook for UserManagement logic\r\n */\r\n\r\nimport { useMemo, useState, useEffect, useCallback } from 'react';\r\nimport {\r\n  useUsersList,\r\n  useStudentsList,\r\n  useLecturersList,\r\n  useCreateUser,\r\n  useUpdateUser,\r\n  useDeleteUser,\r\n} from '@/hooks/useUsers';\r\nimport type { CreateUserRequest, UpdateUserRequest, Mahasiswa, Dosen } from '@/types';\r\nimport type { UserWithDetails, UserFormData, UserStats } from './types';\r\nimport { getSqlValue, initialFormData } from './types';\r\n\r\ninterface UseUserManagementReturn {\r\n  // Data\r\n  users: UserWithDetails[];\r\n  students: Mahasiswa[];\r\n  lecturers: Dosen[];\r\n  userStats: UserStats;\r\n  totalUsers: number;\r\n  \r\n  // Loading states\r\n  loading: boolean;\r\n  loadError: Error | null;\r\n  actionLoading: boolean;\r\n  \r\n  // Pagination\r\n  currentPage: number;\r\n  itemsPerPage: number;\r\n  setCurrentPage: (page: number) => void;\r\n  \r\n  // Search and filter\r\n  searchTerm: string;\r\n  setSearchTerm: (term: string) => void;\r\n  selectedRole: string;\r\n  setSelectedRole: (role: string) => void;\r\n  filteredUsers: UserWithDetails[];\r\n  \r\n  // Form state\r\n  formData: UserFormData;\r\n  setFormData: React.Dispatch<React.SetStateAction<UserFormData>>;\r\n  formError: string | null;\r\n  setFormError: (error: string | null) => void;\r\n  \r\n  // Modal state\r\n  isAddModalOpen: boolean;\r\n  setIsAddModalOpen: (open: boolean) => void;\r\n  isEditModalOpen: boolean;\r\n  setIsEditModalOpen: (open: boolean) => void;\r\n  editingUser: UserWithDetails | null;\r\n  setEditingUser: (user: UserWithDetails | null) => void;\r\n  \r\n  // Actions\r\n  handleAddUser: (e: React.FormEvent) => Promise<void>;\r\n  handleEditUser: (e: React.FormEvent) => Promise<void>;\r\n  handleDeleteUser: (user: UserWithDetails) => Promise<void>;\r\n  openAddModal: () => void;\r\n  openEditModal: (user: UserWithDetails) => void;\r\n  closeAddModal: () => void;\r\n  closeEditModal: () => void;\r\n  \r\n  // Role management\r\n  addRole: (role: string) => void;\r\n  removeRole: (index: number) => void;\r\n  updateRoleEntity: (index: number, entityType: string, entityId: string) => void;\r\n}\r\n\r\nexport function useUserManagement(): UseUserManagementReturn {\r\n  // Pagination state\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalUsers, setTotalUsers] = useState(0);\r\n  const itemsPerPage = 50;\r\n\r\n  // Search and filter state\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedRole, setSelectedRole] = useState<string>('all');\r\n\r\n  // Modal state\r\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n  const [editingUser, setEditingUser] = useState<UserWithDetails | null>(null);\r\n\r\n  // Form state\r\n  const [formData, setFormData] = useState<UserFormData>(initialFormData);\r\n  const [formError, setFormError] = useState<string | null>(null);\r\n  const [actionLoading, setActionLoading] = useState(false);\r\n\r\n  // Local entity state\r\n  const [students, setStudents] = useState<Mahasiswa[]>([]);\r\n  const [lecturers, setLecturers] = useState<Dosen[]>([]);\r\n\r\n  // Queries\r\n  const { data: studentsData, isLoading: isStudentsLoading, error: studentsError } = useStudentsList();\r\n  const { data: lecturersData, isLoading: isLecturersLoading, error: lecturersError } = useLecturersList();\r\n  \r\n  const usersParams = useMemo(\r\n    () => ({\r\n      q: searchTerm || undefined,\r\n      limit: itemsPerPage,\r\n      offset: (currentPage - 1) * itemsPerPage,\r\n    }),\r\n    [itemsPerPage, currentPage, searchTerm]\r\n  );\r\n  \r\n  const usersQuery = useUsersList(usersParams, { enabled: true });\r\n\r\n  // Mutations\r\n  const createUserMutation = useCreateUser();\r\n  const updateUserMutation = useUpdateUser();\r\n  const deleteUserMutation = useDeleteUser();\r\n\r\n  // Sync local state with query data\r\n  useEffect(() => {\r\n    if (studentsData) setStudents(studentsData);\r\n  }, [studentsData]);\r\n\r\n  useEffect(() => {\r\n    if (lecturersData) setLecturers(lecturersData);\r\n  }, [lecturersData]);\r\n\r\n  useEffect(() => {\r\n    if (usersQuery.data) {\r\n      setTotalUsers(usersQuery.data.total);\r\n    }\r\n  }, [usersQuery.data]);\r\n\r\n  // Reset page on search/filter change\r\n  useEffect(() => {\r\n    setCurrentPage(1);\r\n  }, [searchTerm, selectedRole]);\r\n\r\n  // Derived state\r\n  const loading = usersQuery.isLoading || isStudentsLoading || isLecturersLoading;\r\n  const loadError = usersQuery.error || studentsError || lecturersError;\r\n\r\n  // Enrich users with entity info\r\n  const users: UserWithDetails[] = useMemo(() => {\r\n    const base = usersQuery.data?.data ?? [];\r\n    return base.map((user) => {\r\n      const userRoles = user.roles || [];\r\n      const studentRole = userRoles.find((r) => r.role === 'student');\r\n      const lecturerRole = userRoles.find((r) => r.role === 'lecturer');\r\n      const enriched: UserWithDetails = { ...user };\r\n      \r\n      if (studentRole?.entity_id && studentsData) {\r\n        enriched.studentInfo = studentsData.find((s) => s.nim === studentRole.entity_id);\r\n      }\r\n      if (lecturerRole?.entity_id && lecturersData) {\r\n        enriched.lecturerInfo = lecturersData.find((l) => l.id === lecturerRole.entity_id);\r\n      }\r\n      \r\n      return enriched;\r\n    });\r\n  }, [usersQuery.data, studentsData, lecturersData]);\r\n\r\n  // Filter users client-side (for role filter)\r\n  const filteredUsers = useMemo(() => {\r\n    return users.filter((user) => {\r\n      const userRoles = user.roles?.map((r) => r.role) || [];\r\n      return selectedRole === 'all' || userRoles.includes(selectedRole);\r\n    });\r\n  }, [users, selectedRole]);\r\n\r\n  // Calculate stats\r\n  const userStats: UserStats = useMemo(() => {\r\n    const allRoles = users.flatMap((u) => u.roles?.map((r) => r.role) || []);\r\n    return {\r\n      total: totalUsers,\r\n      students: allRoles.filter((r) => r === 'student').length,\r\n      lecturers: allRoles.filter((r) => r === 'lecturer').length,\r\n      admins: allRoles.filter((r) => r === 'admin').length,\r\n      staff: allRoles.filter((r) => r === 'staff').length,\r\n    };\r\n  }, [users, totalUsers]);\r\n\r\n  // Modal handlers\r\n  const openAddModal = useCallback(() => {\r\n    setFormError(null);\r\n    setFormData(initialFormData);\r\n    setIsAddModalOpen(true);\r\n  }, []);\r\n\r\n  const closeAddModal = useCallback(() => {\r\n    setIsAddModalOpen(false);\r\n  }, []);\r\n\r\n  const openEditModal = useCallback((user: UserWithDetails) => {\r\n    setFormError(null);\r\n    setEditingUser(user);\r\n    setFormData({\r\n      email: user.email,\r\n      name: getSqlValue(user.name),\r\n      password: '',\r\n      roles: user.roles || [],\r\n    });\r\n    setIsEditModalOpen(true);\r\n  }, []);\r\n\r\n  const closeEditModal = useCallback(() => {\r\n    setIsEditModalOpen(false);\r\n    setEditingUser(null);\r\n  }, []);\r\n\r\n  // Form actions\r\n  const handleAddUser = useCallback(async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setFormError(null);\r\n\r\n    if (!formData.email.trim() || !formData.email.includes('@')) {\r\n      setFormError('Email tidak valid');\r\n      return;\r\n    }\r\n\r\n    if (!formData.password.trim()) {\r\n      setFormError('Password wajib diisi jika tidak menggunakan Google OAuth');\r\n      return;\r\n    }\r\n\r\n    setActionLoading(true);\r\n    try {\r\n      const payload: CreateUserRequest = {\r\n        email: formData.email.trim(),\r\n        name: formData.name.trim() || undefined,\r\n        password: formData.password.trim() || undefined,\r\n        auth_provider: 'local',\r\n        roles: formData.roles,\r\n      };\r\n\r\n      await createUserMutation.mutateAsync(payload);\r\n      setIsAddModalOpen(false);\r\n    } catch (error: unknown) {\r\n      const err = error as Error;\r\n      setFormError(err.message || 'Gagal menambahkan pengguna');\r\n    } finally {\r\n      setActionLoading(false);\r\n    }\r\n  }, [formData, createUserMutation]);\r\n\r\n  const handleEditUser = useCallback(async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!editingUser) return;\r\n\r\n    setFormError(null);\r\n\r\n    if (!formData.email.trim() || !formData.email.includes('@')) {\r\n      setFormError('Email tidak valid');\r\n      return;\r\n    }\r\n\r\n    setActionLoading(true);\r\n    try {\r\n      const payload: UpdateUserRequest = {\r\n        email: formData.email.trim(),\r\n        name: formData.name.trim() || undefined,\r\n        roles: formData.roles,\r\n      };\r\n\r\n      if (formData.password.trim()) {\r\n        payload.password = formData.password.trim();\r\n      }\r\n\r\n      await updateUserMutation.mutateAsync({ id: editingUser.id, data: payload });\r\n      setIsEditModalOpen(false);\r\n    } catch (error: unknown) {\r\n      const err = error as Error;\r\n      setFormError(err.message || 'Gagal mengupdate pengguna');\r\n    } finally {\r\n      setActionLoading(false);\r\n    }\r\n  }, [formData, editingUser, updateUserMutation]);\r\n\r\n  const handleDeleteUser = useCallback(async (user: UserWithDetails) => {\r\n    const userName = getSqlValue(user.name) || user.email;\r\n    if (!confirm(`Apakah Anda yakin ingin menghapus pengguna \"${userName}\"?`)) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await deleteUserMutation.mutateAsync({ id: user.id });\r\n    } catch (error: unknown) {\r\n      const err = error as Error;\r\n      alert(`Gagal menghapus pengguna: ${err.message}`);\r\n    }\r\n  }, [deleteUserMutation]);\r\n\r\n  // Role management\r\n  const addRole = useCallback((role: string) => {\r\n    if (formData.roles.some((r) => r.role === role)) {\r\n      setFormError(`Role sudah ditambahkan`);\r\n      return;\r\n    }\r\n\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      roles: [...prev.roles, { role }],\r\n    }));\r\n  }, [formData.roles]);\r\n\r\n  const removeRole = useCallback((index: number) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      roles: prev.roles.filter((_, i) => i !== index),\r\n    }));\r\n  }, []);\r\n\r\n  const updateRoleEntity = useCallback((index: number, entityType: string, entityId: string) => {\r\n    setFormData((prev) => {\r\n      const newRoles = [...prev.roles];\r\n      if (entityId) {\r\n        newRoles[index] = {\r\n          ...newRoles[index],\r\n          entity_type: entityType,\r\n          entity_id: entityId,\r\n        };\r\n      } else {\r\n        const { entity_type, entity_id, ...rest } = newRoles[index];\r\n        void entity_type;\r\n        void entity_id;\r\n        newRoles[index] = rest;\r\n      }\r\n      return { ...prev, roles: newRoles };\r\n    });\r\n  }, []);\r\n\r\n  return {\r\n    // Data\r\n    users,\r\n    students,\r\n    lecturers,\r\n    userStats,\r\n    totalUsers,\r\n    \r\n    // Loading states\r\n    loading,\r\n    loadError,\r\n    actionLoading,\r\n    \r\n    // Pagination\r\n    currentPage,\r\n    itemsPerPage,\r\n    setCurrentPage,\r\n    \r\n    // Search and filter\r\n    searchTerm,\r\n    setSearchTerm,\r\n    selectedRole,\r\n    setSelectedRole,\r\n    filteredUsers,\r\n    \r\n    // Form state\r\n    formData,\r\n    setFormData,\r\n    formError,\r\n    setFormError,\r\n    \r\n    // Modal state\r\n    isAddModalOpen,\r\n    setIsAddModalOpen,\r\n    isEditModalOpen,\r\n    setIsEditModalOpen,\r\n    editingUser,\r\n    setEditingUser,\r\n    \r\n    // Actions\r\n    handleAddUser,\r\n    handleEditUser,\r\n    handleDeleteUser,\r\n    openAddModal,\r\n    openEditModal,\r\n    closeAddModal,\r\n    closeEditModal,\r\n    \r\n    // Role management\r\n    addRole,\r\n    removeRole,\r\n    updateRoleEntity,\r\n  };\r\n}\r\n\r\nexport default useUserManagement;\r\n","/**\r\n * User Management Page\r\n * \r\n * Refactored to use smaller components for better maintainability.\r\n * This is the main entry point that composes all sub-components.\r\n */\r\n\r\nimport React, { useState } from 'react';\r\nimport { Plus, Search, Filter } from 'lucide-react';\r\nimport { PageHeader } from '@/components/ui';\r\nimport { UserStatsCards } from './UserStatsCards';\r\nimport { UserTable } from './UserTable';\r\nimport { UserFormModal } from './UserFormModal';\r\nimport { UserAssignments } from './UserAssignments';\r\nimport { useUserManagement } from './useUserManagement';\r\nimport { useAuth } from '@/contexts';\r\nimport type { UserWithDetails } from './types';\r\n\r\nconst UserManagement: React.FC = () => {\r\n  const { currentSemester } = useAuth();\r\n  const [assignmentsUser, setAssignmentsUser] = useState<UserWithDetails | null>(null);\r\n  \r\n  const {\r\n    // Data\r\n    students,\r\n    lecturers,\r\n    userStats,\r\n    totalUsers,\r\n    \r\n    // Loading states\r\n    loading,\r\n    loadError,\r\n    actionLoading,\r\n    \r\n    // Pagination\r\n    currentPage,\r\n    itemsPerPage,\r\n    setCurrentPage,\r\n    \r\n    // Search and filter\r\n    searchTerm,\r\n    setSearchTerm,\r\n    selectedRole,\r\n    setSelectedRole,\r\n    filteredUsers,\r\n    \r\n    // Form state\r\n    formData,\r\n    setFormData,\r\n    formError,\r\n    \r\n    // Modal state\r\n    isAddModalOpen,\r\n    isEditModalOpen,\r\n    \r\n    // Actions\r\n    handleAddUser,\r\n    handleEditUser,\r\n    handleDeleteUser,\r\n    openAddModal,\r\n    openEditModal,\r\n    closeAddModal,\r\n    closeEditModal,\r\n    \r\n    // Role management\r\n    addRole,\r\n    removeRole,\r\n    updateRoleEntity,\r\n  } = useUserManagement();\r\n\r\n  // Handle form change\r\n  const handleFormChange = (data: Partial<typeof formData>) => {\r\n    setFormData((prev) => ({ ...prev, ...data }));\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6\">\r\n        <PageHeader\r\n          title=\"Manajemen Pengguna\"\r\n          subtitle=\"Kelola pengguna sistem dan hak akses\"\r\n        />\r\n        <div className=\"flex gap-2 mt-4 sm:mt-0\">\r\n          <button\r\n            onClick={openAddModal}\r\n            className=\"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n          >\r\n            <Plus className=\"w-4 h-4\" />\r\n            Tambah Pengguna\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Error Display */}\r\n      {loadError && (\r\n        <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-600\">\r\n          Gagal memuat data: {loadError.message}\r\n        </div>\r\n      )}\r\n\r\n      {/* Statistics */}\r\n      <UserStatsCards stats={userStats} />\r\n\r\n      {/* Search and Filter */}\r\n      <div className=\"flex flex-col sm:flex-row gap-4 mb-6\">\r\n        {/* Search */}\r\n        <div className=\"flex-1 relative\">\r\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Cari berdasarkan nama atau email...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n          />\r\n        </div>\r\n\r\n        {/* Role Filter */}\r\n        <div className=\"relative\">\r\n          <Filter className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\r\n          <select\r\n            value={selectedRole}\r\n            onChange={(e) => setSelectedRole(e.target.value)}\r\n            className=\"pl-10 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none bg-white\"\r\n          >\r\n            <option value=\"all\">Semua Role</option>\r\n            <option value=\"admin\">Admin</option>\r\n            <option value=\"lecturer\">Dosen</option>\r\n            <option value=\"student\">Mahasiswa</option>\r\n            <option value=\"staff\">Staff</option>\r\n            <option value=\"alumni\">Alumni</option>\r\n            <option value=\"student_applicant\">Pendaftar</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      {/* User Table */}\r\n      <UserTable\r\n        users={filteredUsers}\r\n        loading={loading}\r\n        currentPage={currentPage}\r\n        totalUsers={selectedRole === 'all' ? totalUsers : filteredUsers.length}\r\n        itemsPerPage={itemsPerPage}\r\n        onManageAssignments={setAssignmentsUser}\r\n        onPageChange={setCurrentPage}\r\n        onEditUser={openEditModal}\r\n        onDeleteUser={handleDeleteUser}\r\n      />\r\n\r\n      {/* Add User Modal */}\r\n      <UserFormModal\r\n        isOpen={isAddModalOpen}\r\n        isEdit={false}\r\n        formData={formData}\r\n        formError={formError}\r\n        actionLoading={actionLoading}\r\n        students={students}\r\n        lecturers={lecturers}\r\n        onClose={closeAddModal}\r\n        onSubmit={handleAddUser}\r\n        onFormChange={handleFormChange}\r\n        onAddRole={addRole}\r\n        onRemoveRole={removeRole}\r\n        onUpdateRoleEntity={updateRoleEntity}\r\n      />\r\n\r\n      {/* Edit User Modal */}\r\n      <UserFormModal\r\n        isOpen={isEditModalOpen}\r\n        isEdit={true}\r\n        formData={formData}\r\n        formError={formError}\r\n        actionLoading={actionLoading}\r\n        students={students}\r\n        lecturers={lecturers}\r\n        onClose={closeEditModal}\r\n        onSubmit={handleEditUser}\r\n        onFormChange={handleFormChange}\r\n        onAddRole={addRole}\r\n        onRemoveRole={removeRole}\r\n        onUpdateRoleEntity={updateRoleEntity}\r\n      />\r\n\r\n      {/* User Assignments Modal */}\r\n      <UserAssignments\r\n        user={assignmentsUser!}\r\n        isOpen={!!assignmentsUser}\r\n        onClose={() => setAssignmentsUser(null)}\r\n        currentSemester={currentSemester}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserManagement;\r\n"],"names":["PageHeader","title","subtitle","showBack","backUrl","actions","breadcrumbs","icon","navigate","useNavigate","handleBack","jsxs","jsx","crumb","index","ArrowLeft","UserStatsCards","stats","statItems","Users","Shield","item","initialFormData","getRoleColor","role","getRoleLabel","getSqlValue","extractString","availableRoles","UserTable","users","loading","currentPage","totalUsers","itemsPerPage","onPageChange","onEditUser","onDeleteUser","onManageAssignments","totalPages","user","UserTableRow","ChevronLeft","ChevronRight","onEdit","onDelete","userName","roles","contact","entityInfo","entities","roleObj","idx","info","Mail","Phone","r","BookOpen","Edit","Trash2","UserFormModal","isOpen","isEdit","formData","formError","actionLoading","students","lecturers","onClose","onSubmit","onFormChange","onAddRole","onRemoveRole","onUpdateRoleEntity","submitLabel","Fragment","X","e","RoleEntry","entityType","entityId","fr","Loader","onUpdateEntity","onRemove","showStudentSelect","showLecturerSelect","s","l","useUsersList","params","options","key","useQuery","apiService","usersQueryRootKey","useStudentsList","kode_prodi","useLecturersList","useCreateUser","qc","useQueryClient","useMutation","payload","args","useUpdateUser","id","data","useDeleteUser","API_BASE_URL","decodeJWT","token","base64Url","base64","jsonPayload","c","error","apiLogger","ApiClient","baseUrl","handler","now","expiresIn","refreshIn","accessToken","refreshToken","endpoint","isRetry","url","headers","value","response","refreshError","errorMessage","body","UserAssignments","currentSemester","activeTab","setActiveTab","useState","isLoading","setIsLoading","setError","success","setSuccess","enrollments","setEnrollments","newEnrollment","setNewEnrollment","teachingAssignments","setTeachingAssignments","newAssignment","setNewAssignment","showAddAssignmentForm","setShowAddAssignmentForm","courses","useCourses","classes","useMemo","allClasses","course","studentRole","lecturerRole","lecturerAssignmentsData","useLecturerAssignments","React","loadEnrollments","extractNumber","err","handleAddEnrollment","classId","handleRemoveEnrollment","_","i","handleSaveEnrollments","handleAddTeachingAssignment","updated","handleRemoveTeachingAssignment","assignmentId","a","availableCourses","coursesMap","cls","kode","availableClasses","isStudent","isLecturer","code","Plus","enrollment","Save","assignment","useUserManagement","setCurrentPage","setTotalUsers","searchTerm","setSearchTerm","selectedRole","setSelectedRole","isAddModalOpen","setIsAddModalOpen","isEditModalOpen","setIsEditModalOpen","editingUser","setEditingUser","setFormData","setFormError","setActionLoading","setStudents","setLecturers","studentsData","isStudentsLoading","studentsError","lecturersData","isLecturersLoading","lecturersError","usersParams","usersQuery","createUserMutation","updateUserMutation","deleteUserMutation","useEffect","loadError","userRoles","enriched","filteredUsers","userStats","allRoles","u","openAddModal","useCallback","closeAddModal","openEditModal","closeEditModal","handleAddUser","handleEditUser","handleDeleteUser","addRole","prev","removeRole","updateRoleEntity","newRoles","entity_type","entity_id","rest","UserManagement","useAuth","assignmentsUser","setAssignmentsUser","handleFormChange","Search","Filter"],"mappings":"4dAwBO,MAAMA,GAAwC,CAAC,CACpD,MAAAC,EACA,SAAAC,EACA,SAAAC,EAAW,GACX,QAAAC,EACA,QAAAC,EACA,YAAAC,EACA,KAAAC,CACF,IAAM,CACJ,MAAMC,EAAWC,GAAA,EAEXC,EAAa,IAAM,CAErBF,EADEJ,GAGO,EAFO,CAIpB,EAEA,OACEO,EAAAA,KAAC,MAAA,CAAI,UAAU,OAEZ,SAAA,CAAAL,GAAeA,EAAY,OAAS,GACnCM,EAAAA,IAAC,OAAI,UAAU,YAAY,aAAW,aACpC,SAAAA,EAAAA,IAAC,MAAG,UAAU,oDACX,WAAY,IAAI,CAACC,EAAOC,IACvBH,EAAAA,KAAC,KAAA,CAAe,UAAU,oBACvB,SAAA,CAAAG,EAAQ,GAAKF,EAAAA,IAAC,OAAA,CAAK,UAAU,OAAO,SAAA,IAAC,EACrCC,EAAM,KACLD,EAAAA,IAAC,IAAA,CACC,KAAMC,EAAM,KACZ,UAAU,2CAET,SAAAA,EAAM,KAAA,CAAA,EAGTD,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAiB,WAAM,KAAA,CAAM,CAAA,CAAA,EAVxCE,CAYT,CACD,CAAA,CACH,EACF,EAIFH,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACZ,SAAA,CAAAR,GACCS,EAAAA,IAAC,SAAA,CACC,QAASF,EACT,UAAU,qDACV,aAAW,UAEX,SAAAE,EAAAA,IAACG,GAAA,CAAU,UAAU,uBAAA,CAAwB,CAAA,CAAA,EAIhDR,GACCK,EAAAA,IAAC,MAAA,CAAI,UAAU,gDACZ,SAAAL,EACH,SAGD,MAAA,CACC,SAAA,CAAAK,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAoC,SAAAX,EAAM,EACvDC,GACCU,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA8B,SAAAV,CAAA,CAAS,CAAA,CAAA,CAExD,CAAA,EACF,EAECG,GACCO,EAAAA,IAAC,MAAA,CAAI,UAAU,0BACZ,SAAAP,CAAA,CACH,CAAA,CAAA,CAEJ,CAAA,EACF,CAEJ,EC3FaW,GAAgD,CAAC,CAAE,MAAAC,KAAY,CAC1E,MAAMC,EAAY,CAChB,CACE,KAAMC,EACN,MAAO,iBACP,MAAOF,EAAM,MACb,MAAO,gBACP,QAAS,YAAA,EAEX,CACE,KAAME,EACN,MAAO,YACP,MAAOF,EAAM,SACb,MAAO,iBACP,QAAS,aAAA,EAEX,CACE,KAAME,EACN,MAAO,QACP,MAAOF,EAAM,UACb,MAAO,kBACP,QAAS,cAAA,EAEX,CACE,KAAMG,GACN,MAAO,QACP,MAAOH,EAAM,OACb,MAAO,eACP,QAAS,WAAA,CACX,EAGF,aACG,MAAA,CAAI,UAAU,6CACZ,SAAAC,EAAU,IAAKG,GACdT,EAAAA,IAAC,MAAA,CAEC,UAAU,iDAEV,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,SAAAS,EAAK,MAAM,EACjDT,EAAAA,IAAC,IAAA,CAAE,UAAU,uCAAwC,WAAK,KAAA,CAAM,CAAA,EAClE,QACC,MAAA,CAAI,UAAW,kBAAkBS,EAAK,OAAO,GAC5C,SAAAT,EAAAA,IAACS,EAAK,KAAL,CAAU,UAAW,WAAWA,EAAK,KAAK,GAAI,CAAA,CACjD,CAAA,CAAA,CACF,CAAA,EAXKA,EAAK,KAAA,CAab,EACH,CAEJ,EClCaC,GAAgC,CAC3C,MAAO,GACP,KAAM,GACN,SAAU,GACV,MAAO,CAAA,CACT,EAgBaC,GAAgBC,GAAyB,CACpD,OAAQA,EAAA,CACN,IAAK,QACH,MAAO,0BACT,IAAK,WACH,MAAO,4BACT,IAAK,UACH,MAAO,8BACT,IAAK,QACH,MAAO,gCACT,IAAK,oBACH,MAAO,gCACT,IAAK,SACH,MAAO,4BACT,QACE,MAAO,2BAAA,CAEb,EAKaC,GAAgBD,IACY,CACrC,MAAO,QACP,SAAU,QACV,QAAS,YACT,MAAO,QACP,kBAAmB,YACnB,OAAQ,SACR,MAAO,OAAA,GAEKA,CAAI,GAAKA,EAOZE,EAAcC,EAadC,GAAiB,CAC5B,CAAE,MAAO,QAAS,MAAO,OAAA,EACzB,CAAE,MAAO,QAAS,MAAO,OAAA,EACzB,CAAE,MAAO,WAAY,MAAO,OAAA,EAC5B,CAAE,MAAO,UAAW,MAAO,WAAA,EAC3B,CAAE,MAAO,SAAU,MAAO,QAAA,EAC1B,CAAE,MAAO,oBAAqB,MAAO,WAAA,CACvC,EC7FaC,GAAsC,CAAC,CAClD,MAAAC,EACA,QAAAC,EACA,YAAAC,EACA,WAAAC,EACA,aAAAC,EACA,aAAAC,EACA,WAAAC,EACA,aAAAC,EACA,oBAAAC,CACF,IAAM,CACJ,MAAMC,EAAa,KAAK,KAAKN,EAAaC,CAAY,EAEtD,OACEvB,EAAAA,KAAC,MAAA,CAAI,UAAU,6CAEb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,kBACb,SAAAD,EAAAA,KAAC,QAAA,CAAM,UAAU,SACf,SAAA,CAAAC,MAAC,QAAA,CAAM,UAAU,sCACf,SAAAD,EAAAA,KAAC,KAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iFAAiF,SAAA,WAE/F,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,iFAAiF,SAAA,OAE/F,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,iFAAiF,SAAA,UAE/F,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,iFAAiF,SAAA,SAE/F,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,kFAAkF,SAAA,MAAA,CAEhG,CAAA,CAAA,CACF,CAAA,CACF,QACC,QAAA,CAAM,UAAU,2BACd,SAAAmB,QACE,KAAA,CACC,SAAAnB,EAAAA,IAAC,KAAA,CAAG,QAAS,EAAG,UAAU,yBACxB,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,8DAAA,CAA+D,EAC9EA,EAAAA,IAAC,OAAA,CAAK,UAAU,qBAAqB,SAAA,gBAAA,CAAc,CAAA,CAAA,CACrD,CAAA,CACF,EACF,EACEkB,EAAM,SAAW,EACnBlB,EAAAA,IAAC,MACC,SAAAA,EAAAA,IAAC,KAAA,CAAG,QAAS,EAAG,UAAU,uCAAuC,SAAA,8BAAA,CAEjE,CAAA,CACF,EAEAkB,EAAM,IAAKU,GACT5B,EAAAA,IAAC6B,GAAA,CAEC,KAAAD,EACA,OAAQJ,EACR,SAAUC,EACV,oBAAAC,CAAA,EAJKE,EAAK,EAAA,CAMb,CAAA,CAEL,CAAA,CAAA,CACF,CAAA,CACF,EAGCD,EAAa,GACZ5B,OAAC,MAAA,CAAI,UAAU,uEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,CAAA,gBACvBqB,EAAc,GAAKE,EAAe,EAAE,KAAG,IACpD,KAAK,IAAIF,EAAcE,EAAcD,CAAU,EAAE,SAAOA,EAAW,WAAA,EACtE,EACAtB,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMuB,EAAaH,EAAc,CAAC,EAC3C,SAAUA,IAAgB,EAC1B,UAAU,yGAEV,SAAApB,EAAAA,IAAC8B,GAAA,CAAY,UAAU,SAAA,CAAU,CAAA,CAAA,EAEnC/B,EAAAA,KAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,CAAA,WAC7BqB,EAAY,SAAOO,CAAA,EAC9B,EACA3B,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMuB,EAAaH,EAAc,CAAC,EAC3C,SAAUA,IAAgBO,EAC1B,UAAU,yGAEV,SAAA3B,EAAAA,IAAC+B,GAAA,CAAa,UAAU,SAAA,CAAU,CAAA,CAAA,CACpC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EAEJ,CAEJ,EAYMF,GAA4C,CAAC,CAAE,KAAAD,EAAM,OAAAI,EAAQ,SAAAC,EAAU,oBAAAP,KAA0B,CACrG,MAAMQ,EAAWpB,EAAYc,EAAK,IAAI,GAAKA,EAAK,MAAM,MAAM,GAAG,EAAE,CAAC,EAC5DO,EAAQP,EAAK,OAAS,CAAA,EAmBtBQ,EAfAR,EAAK,YACA,CACL,MAAOd,EAAYc,EAAK,YAAY,KAAK,EACzC,MAAOd,EAAYc,EAAK,YAAY,KAAK,CAAA,EAGzCA,EAAK,aACA,CACL,MAAOd,EAAYc,EAAK,aAAa,KAAK,EAC1C,MAAOd,EAAYc,EAAK,aAAa,KAAK,CAAA,EAGvC,CAAE,MAAOA,EAAK,MAAO,MAAO,EAAA,EAmB/BS,GAbgB,IAAM,CAC1B,MAAMC,EAAqB,CAAA,EAE3B,OAAIV,EAAK,aACPU,EAAS,KAAK,QAAQV,EAAK,YAAY,GAAG,EAAE,EAE1CA,EAAK,cACPU,EAAS,KAAK,SAASxB,EAAYc,EAAK,aAAa,KAAK,GAAKA,EAAK,aAAa,EAAE,EAAE,EAGhFU,CACT,GAEmB,EAEnB,OACEvC,EAAAA,KAAC,KAAA,CAAG,UAAU,mBACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,UAAU,YACZ,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,0BACb,eAAC,MAAA,CAAI,UAAU,sEACb,SAAAA,EAAAA,IAAC,OAAA,CAAK,UAAU,oCACb,WAAS,OAAO,CAAC,EAAE,YAAA,EACtB,EACF,CAAA,CACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,oCAAqC,SAAAkC,EAAS,EAC7DlC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAyB,WAAK,KAAA,CAAM,CAAA,CAAA,CACrD,CAAA,CAAA,CACF,CAAA,CACF,QACC,KAAA,CAAG,UAAU,YACZ,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACZ,SAAA,CAAAoC,EAAM,IAAI,CAACI,EAASC,IACnBxC,EAAAA,IAAC,OAAA,CAEC,UAAW,oEAAoEW,GAAa4B,EAAQ,IAAI,CAAC,GAExG,SAAA1B,GAAa0B,EAAQ,IAAI,CAAA,EAHrBC,CAAA,CAKR,EACAL,EAAM,SAAW,SACf,OAAA,CAAK,UAAU,wBAAwB,SAAA,GAAA,CAAC,CAAA,CAAA,CAE7C,CAAA,CACF,EACAnC,EAAAA,IAAC,KAAA,CAAG,UAAU,YACZ,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBACZ,SAAAqC,EAAW,OAAS,EACnBA,EAAW,IAAI,CAACI,EAAMD,IACpBxC,EAAAA,IAAC,MAAA,CAAe,SAAAyC,CAAA,EAAND,CAAW,CACtB,EAEDxC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,GAAA,CAAC,CAAA,CAErC,EACF,QACC,KAAA,CAAG,UAAU,YACZ,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACZ,SAAA,CAAAqC,EAAQ,OACPrC,OAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC0C,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1B1C,EAAAA,IAAC,OAAA,CAAK,UAAU,yBAA0B,WAAQ,KAAA,CAAM,CAAA,EAC1D,EAEDoC,EAAQ,OACPrC,OAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC2C,GAAA,CAAM,UAAU,SAAA,CAAU,EAC1BP,EAAQ,KAAA,CAAA,CACX,CAAA,CAAA,CAEJ,CAAA,CACF,QACC,KAAA,CAAG,UAAU,uBACZ,SAAArC,EAAAA,KAAC,MAAA,CAAI,UAAU,sCACX,SAAA,CAAA6B,EAAK,OAAO,KAAMgB,GAAMA,EAAE,OAAS,WAAaA,EAAE,OAAS,UAAU,GACrE5C,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM0B,EAAoBE,CAAI,EACvC,UAAU,wFACV,MAAM,qBAEN,SAAA5B,EAAAA,IAAC6C,GAAA,CAAS,UAAU,SAAA,CAAU,CAAA,CAAA,EAGlC7C,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMgC,EAAOJ,CAAI,EAC1B,UAAU,sFACV,MAAM,OAEN,SAAA5B,EAAAA,IAAC8C,GAAA,CAAK,UAAU,SAAA,CAAU,CAAA,CAAA,EAE5B9C,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMiC,EAASL,CAAI,EAC5B,UAAU,oFACV,MAAM,QAEN,SAAA5B,EAAAA,IAAC+C,GAAA,CAAO,UAAU,SAAA,CAAU,CAAA,CAAA,CAC9B,CAAA,CACF,CAAA,CACF,CAAA,EACF,CAEJ,ECnOaC,GAA8C,CAAC,CAC1D,OAAAC,EACA,OAAAC,EACA,SAAAC,EACA,UAAAC,EACA,cAAAC,EACA,SAAAC,EACA,UAAAC,EACA,QAAAC,EACA,SAAAC,EACA,aAAAC,EACA,UAAAC,EACA,aAAAC,EACA,mBAAAC,CACF,IAAM,CACJ,GAAI,CAACZ,EAAQ,OAAO,KAEpB,MAAM5D,EAAQ6D,EAAS,gBAAkB,kBACnCY,EAAcZ,EAAS,mBAAqB,kBAElD,OACEnD,EAAAA,KAAAgE,WAAA,CAEE,SAAA,CAAA/D,EAAAA,IAAC,MAAA,CAAI,UAAU,iCAAiC,QAASwD,EAAS,QAGjE,MAAA,CAAI,UAAU,8EACb,SAAAzD,EAAAA,KAAC,MAAA,CAAI,UAAU,iGAEf,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uEACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAuC,SAAAX,EAAM,EAC3DW,EAAAA,IAAC,SAAA,CACC,QAASwD,EACT,UAAU,uFAEV,SAAAxD,EAAAA,IAACgE,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAGAjE,EAAAA,KAAC,QAAK,SAAA0D,EACJ,SAAA,CAAA1D,EAAAA,KAAC,MAAA,CAAI,UAAU,sBACZ,SAAA,CAAAqD,GACCpD,EAAAA,IAAC,MAAA,CAAI,UAAU,sEACZ,SAAAoD,EACH,SAID,MAAA,CACC,SAAA,CAAArD,EAAAA,KAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,CAAA,SACxDC,EAAAA,IAAC,OAAA,CAAK,UAAU,eAAe,SAAA,GAAA,CAAC,CAAA,EACxC,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,QACL,MAAOmD,EAAS,MAChB,SAAWc,GAAMP,EAAa,CAAE,MAAOO,EAAE,OAAO,MAAO,EACvD,UAAU,4GACV,YAAY,oBACZ,SAAQ,EAAA,CAAA,CACV,EACF,SAGC,MAAA,CACC,SAAA,CAAAjE,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,OAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOmD,EAAS,KAChB,SAAWc,GAAMP,EAAa,CAAE,KAAMO,EAAE,OAAO,MAAO,EACtD,UAAU,4GACV,YAAY,cAAA,CAAA,CACd,EACF,SAGC,MAAA,CACC,SAAA,CAAAlE,EAAAA,KAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,CAAA,YACpD,CAACmD,GAAUlD,EAAAA,IAAC,OAAA,CAAK,UAAU,eAAe,SAAA,GAAA,CAAC,CAAA,EACvD,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,MAAOmD,EAAS,SAChB,SAAWc,GAAMP,EAAa,CAAE,SAAUO,EAAE,OAAO,MAAO,EAC1D,UAAU,4GACV,YAAaf,EAAS,sCAAwC,oBAC9D,SAAU,CAACA,CAAA,CAAA,CACb,EACF,SAGC,MAAA,CACC,SAAA,CAAAlD,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,OAEhE,EAGAA,EAAAA,IAAC,OAAI,UAAU,iBACZ,WAAS,MAAM,IAAI,CAACuC,EAASC,IAC5BxC,EAAAA,IAACkE,GAAA,CAEC,KAAM3B,EAAQ,KACd,SAAUA,EAAQ,UAClB,SAAAe,EACA,UAAAC,EACA,eAAgB,CAACY,EAAYC,IAC3BP,EAAmBrB,EAAK2B,EAAYC,CAAQ,EAE9C,SAAU,IAAMR,EAAapB,CAAG,CAAA,EAR3BA,CAAA,CAUR,EACH,EAGAzC,EAAAA,KAAC,SAAA,CACC,SAAWkE,GAAM,CACXA,EAAE,OAAO,QACXN,EAAUM,EAAE,OAAO,KAAK,EACxBA,EAAE,OAAO,MAAQ,GAErB,EACA,UAAU,4GACV,aAAa,GAEb,SAAA,CAAAjE,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,gBAAa,EAC7BgB,GACE,OAAQ4B,GAAM,CAACO,EAAS,MAAM,KAAMkB,GAAOA,EAAG,OAASzB,EAAE,KAAK,CAAC,EAC/D,IAAKA,GACJ5C,EAAAA,IAAC,SAAA,CAAqB,MAAO4C,EAAE,MAC5B,SAAAA,EAAE,KAAA,EADQA,EAAE,KAEf,CACD,CAAA,CAAA,CAAA,CACL,CAAA,CACF,CAAA,EACF,EAGA7C,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAASwD,EACT,UAAU,qFACV,SAAUH,EACX,SAAA,OAAA,CAAA,EAGDtD,EAAAA,KAAC,SAAA,CACC,KAAK,SACL,UAAU,8HACV,SAAUsD,EAET,SAAA,CAAAA,GAAiBrD,EAAAA,IAACsE,GAAA,CAAO,UAAU,sBAAA,CAAuB,EAC1DR,CAAA,CAAA,CAAA,CACH,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACA,CAAA,EACF,CAEJ,EAcMI,GAAsC,CAAC,CAC3C,KAAAtD,EACA,SAAAwD,EACA,SAAAd,EACA,UAAAC,EACA,eAAAgB,EACA,SAAAC,CACF,IAAM,CACJ,MAAMC,EAAoB7D,IAAS,WAAaA,IAAS,SACnD8D,EAAqB9D,IAAS,WAEpC,OACEb,EAAAA,KAAC,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAC,MAAC,OAAA,CAAK,UAAU,iDACb,SAAAa,GAAaD,CAAI,EACpB,EAEC6D,GACC1E,EAAAA,KAAC,SAAA,CACC,MAAOqE,GAAY,GACnB,SAAWH,GAAMM,EAAe,YAAaN,EAAE,OAAO,KAAK,EAC3D,UAAU,2FAEV,SAAA,CAAAjE,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,kBAAe,EAC/BsD,EAAS,IAAKqB,UACZ,SAAA,CAAmB,MAAOA,EAAE,IAC1B,SAAA,CAAAA,EAAE,IAAI,MAAIA,EAAE,MAAQ,WAAA,CAAA,EADVA,EAAE,GAEf,CACD,CAAA,CAAA,CAAA,EAIJD,GACC3E,EAAAA,KAAC,SAAA,CACC,MAAOqE,GAAY,GACnB,SAAWH,GAAMM,EAAe,QAASN,EAAE,OAAO,KAAK,EACvD,UAAU,2FAEV,SAAA,CAAAjE,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,cAAW,EAC3BuD,EAAU,IAAKqB,UACb,SAAA,CAAkB,MAAOA,EAAE,GACzB,SAAA,CAAAA,EAAE,GAAG,MAAIA,EAAE,YAAc,WAAA,CAAA,EADfA,EAAE,EAEf,CACD,CAAA,CAAA,CAAA,EAIJ,CAACH,GAAqB,CAACC,SACrB,OAAA,CAAK,UAAU,+BAA+B,SAAA,2BAE/C,EAGF1E,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAASwE,EACT,UAAU,iFAEV,SAAAxE,EAAAA,IAAC+C,GAAA,CAAO,UAAU,SAAA,CAAU,CAAA,CAAA,CAC9B,EACF,CAEJ,ECpQO,SAAS8B,GACdC,EACAC,EACA,CACA,MAAMC,EAAM,CAAC,QAASF,EAAO,GAAK,KAAMA,EAAO,OAAS,KAAMA,EAAO,QAAU,IAAI,EACnF,OAAOG,GAAwC,CAC7C,SAAUD,EACV,QAAS,IAAME,EAAW,SAASJ,CAAM,EACzC,GAAIC,GAAW,CAAA,CAAC,CACjB,CACH,CAEO,MAAMI,GAAoB,CAAC,OAAO,EAGlC,SAASC,GACdC,EACAN,EACA,CAEA,OAAOE,GAA6B,CAClC,SAFU,CAAC,WAA0B,IAAI,EAGzC,QAAS,IAAMC,EAAW,YAAYG,CAAU,CAChC,CACjB,CACH,CAEO,SAASC,GACdD,EACAN,EACA,CAEA,OAAOE,GAAyB,CAC9B,SAFU,CAAC,YAA2B,IAAI,EAG1C,QAAS,IAAMC,EAAW,aAAaG,CAAU,CACjC,CACjB,CACH,CAiBO,SAASE,GACdR,EACA,CACA,MAAMS,EAAKC,GAAA,EACX,OAAOC,GAAmD,CACxD,WAAaC,GAAYT,EAAW,WAAWS,CAAO,EACtD,UAAW,IAAIC,IAAS,CAEtBJ,EAAG,kBAAkB,CAAE,SAAUL,EAAA,CAAmB,CAEtD,EACA,GAAGJ,CAAA,CACJ,CACH,CAEO,SAASc,GACdd,EACA,CACA,MAAMS,EAAKC,GAAA,EACX,OAAOC,GAA4E,CACjF,WAAY,CAAC,CAAE,GAAAI,EAAI,KAAAC,KAAWb,EAAW,WAAWY,EAAIC,CAAI,EAC5D,UAAW,IAAIH,IAAS,CACtBJ,EAAG,kBAAkB,CAAE,SAAUL,EAAA,CAAmB,CAEtD,EACA,GAAGJ,CAAA,CACJ,CACH,CAEO,SAASiB,GACdjB,EACA,CACA,MAAMS,EAAKC,GAAA,EACX,OAAOC,GAAoD,CACzD,WAAY,CAAC,CAAE,GAAAI,KAASZ,EAAW,WAAWY,CAAE,EAChD,UAAW,IAAIF,IAAS,CACtBJ,EAAG,kBAAkB,CAAE,SAAUL,EAAA,CAAmB,CAEtD,EACA,GAAGJ,CAAA,CACJ,CACH,CC1FA,MAAMkB,GAAe,iDAKrB,SAASC,GAAUC,EAAsD,CACvE,GAAI,CACF,MAAMC,EAAYD,EAAM,MAAM,GAAG,EAAE,CAAC,EACpC,GAAI,CAACC,EAAW,OAAO,KACvB,MAAMC,EAASD,EAAU,QAAQ,KAAM,GAAG,EAAE,QAAQ,KAAM,GAAG,EACvDE,EAAc,mBAClB,KAAKD,CAAM,EACR,MAAM,EAAE,EACR,IAAKE,GAAM,KAAO,KAAOA,EAAE,WAAW,CAAC,EAAE,SAAS,EAAE,GAAG,MAAM,EAAE,CAAC,EAChE,KAAK,EAAE,CAAA,EAEZ,OAAO,KAAK,MAAMD,CAAW,CAC/B,OAASE,EAAO,CACd,OAAAC,EAAU,MAAM,wBAAyBD,CAAK,EACvC,IACT,CACF,CAaO,MAAME,EAAU,CACb,QACA,YAA6B,KAC7B,aAA8B,KAC9B,yBAA2B,GAC3B,eAAyC,KACzC,eAAuD,KACvD,YAAmC,KAE3C,YAAYC,EAAkBV,GAAc,CAC1C,KAAK,QAAUU,EACf,KAAK,sBAAA,CACP,CAEA,oBAAoBC,EAA2B,CAC7C,KAAK,YAAcA,CACrB,CAEQ,uBAA8B,CACpC,GAAI,CACF,KAAK,YAAc,aAAa,QAAQ,aAAa,EACrD,KAAK,aAAe,aAAa,QAAQ,cAAc,EAEnD,KAAK,aACP,KAAK,qBAAA,CAET,OAASJ,EAAO,CACdC,EAAU,MAAM,qCAAsCD,CAAK,EAC3D,KAAK,YAAc,KACnB,KAAK,aAAe,IACtB,CACF,CAEQ,sBAA6B,CAMnC,GALI,KAAK,iBACP,aAAa,KAAK,cAAc,EAChC,KAAK,eAAiB,MAGpB,CAAC,KAAK,aAAe,CAAC,KAAK,aAC7B,OAGF,MAAMb,EAAUO,GAAU,KAAK,WAAW,EAC1C,GAAI,CAACP,GAAW,CAACA,EAAQ,IACvB,OAGF,MAAMkB,EAAM,KAAK,MAAM,KAAK,IAAA,EAAQ,GAAI,EAClCC,EAAYnB,EAAQ,IAAMkB,EAC1BE,EAAY,KAAK,IAAI,EAAGD,EAAY,GAAG,EAE7CL,EAAU,IAAI,oBAAoBK,CAAS,4BAA4BC,CAAS,GAAG,EAEnF,KAAK,eAAiB,WAAW,SAAY,CAC3C,GAAI,CACFN,EAAU,IAAI,wCAAwC,EACtD,MAAM,KAAK,mBAAA,CACb,OAASD,EAAO,CACdC,EAAU,MAAM,kCAAmCD,CAAK,CAC1D,CACF,EAAGO,EAAY,GAAI,CACrB,CAEA,UAAUC,EAAqBC,EAA6B,CAC1D,GAAI,KAAK,yBAA0B,CACjCR,EAAU,KAAK,qCAAqC,EACpD,MACF,CAEA,GAAI,CACF,KAAK,yBAA2B,GAChC,KAAK,YAAcO,EACnB,aAAa,QAAQ,cAAeA,CAAW,EAE3CC,IACF,KAAK,aAAeA,EACpB,aAAa,QAAQ,eAAgBA,CAAY,GAGnD,KAAK,qBAAA,CACP,QAAA,CACE,KAAK,yBAA2B,EAClC,CACF,CAEA,aAAoB,CAClB,GAAI,KAAK,yBAA0B,CACjCR,EAAU,KAAK,qCAAqC,EACpD,MACF,CAEA,GAAI,CACF,KAAK,yBAA2B,GAE5B,KAAK,iBACP,aAAa,KAAK,cAAc,EAChC,KAAK,eAAiB,MAGxB,KAAK,YAAc,KACnB,KAAK,aAAe,KACpB,KAAK,eAAiB,KACtB,aAAa,WAAW,aAAa,EACrC,aAAa,WAAW,cAAc,CACxC,QAAA,CACE,KAAK,yBAA2B,EAClC,CACF,CAEA,WAAqB,CACnB,MAAO,EAAQ,KAAK,WACtB,CAKA,MAAM,QACJS,EACAnC,EAAuB,CAAA,EACvBoC,EAAmB,GACP,CACZ,MAAMC,EAAM,GAAG,KAAK,OAAO,GAAGF,CAAQ,GAChCG,EAAkC,CACtC,eAAgB,kBAAA,EAGdtC,EAAQ,SACV,OAAO,QAAQA,EAAQ,OAAO,EAAE,QAAQ,CAAC,CAACC,EAAKsC,CAAK,IAAM,CACpD,OAAOA,GAAU,WACnBD,EAAQrC,CAAG,EAAIsC,EAEnB,CAAC,EAGC,KAAK,cACPD,EAAQ,MAAW,KAAK,aAG1B,GAAI,CACF,MAAME,EAAW,MAAM,MAAMH,EAAK,CAChC,GAAGrC,EACH,QAAAsC,CAAA,CACD,EAED,GAAIE,EAAS,SAAW,KAAO,KAAK,cAAgB,CAACJ,GAAW,CAACD,EAAS,SAAS,eAAe,EAAG,CACnGT,EAAU,IAAI,gDAAgD,EAE9D,GAAI,CACF,OAAK,KAAK,iBACR,KAAK,eAAiB,KAAK,mBAAA,EAAqB,QAAQ,IAAM,CAC5D,KAAK,eAAiB,IACxB,CAAC,GAGH,MAAM,KAAK,eACJ,KAAK,QAAWS,EAAUnC,EAAS,EAAI,CAChD,OAASyC,EAAc,CACrB,MAAAf,EAAU,MAAM,wBAAyBe,CAAY,EACrD,KAAK,YAAA,EACD,KAAK,aACP,KAAK,YAAA,EAED,IAAI,MAAM,sCAAsC,CACxD,CACF,CAEA,GAAI,CAACD,EAAS,GAAI,CAKhB,MAAME,EAAe,IAJG,MAAMF,EAAS,KAAA,EAAO,MAAM,KAAO,CACzD,MAAO,QAAQA,EAAS,MAAM,KAAKA,EAAS,UAAU,EAAA,EACtD,GAE4B,OAASA,EAAS,UAAU,UAAUA,EAAS,MAAM,IACnF,MAAM,IAAI,MAAME,CAAY,CAC9B,CAEA,OAAOF,EAAS,KAAA,CAClB,OAASf,EAAO,CACd,MAAAC,EAAU,MAAM,sBAAuBD,CAAK,EACtCA,CACR,CACF,CAKA,MAAM,oBAAsC,CAC1C,GAAI,CAAC,KAAK,aACR,MAAM,IAAI,MAAM,4BAA4B,EAG9C,MAAMY,EAAM,GAAG,KAAK,OAAO,gBACrBC,EAAkC,CACtC,eAAgB,kBAAA,EAGlB,GAAI,CACF,MAAME,EAAW,MAAM,MAAMH,EAAK,CAChC,OAAQ,OACR,QAAAC,EACA,KAAM,KAAK,UAAU,CAAE,cAAe,KAAK,aAAc,CAAA,CAC1D,EAED,GAAI,CAACE,EAAS,GAAI,CAChB,MAAMf,EAAkB,MAAMe,EAAS,KAAA,EAAO,MAAM,KAAO,CACzD,MAAO,QAAQA,EAAS,MAAM,KAAKA,EAAS,UAAU,EAAA,EACtD,EACF,MAAM,IAAI,MAAMf,EAAM,OAAS,sBAAsB,CACvD,CAEA,MAAMT,EAAO,MAAMwB,EAAS,KAAA,EAC5B,YAAK,UAAUxB,EAAK,aAAcA,EAAK,aAAa,EAEpDU,EAAU,IAAI,qCAAqC,EAC5CV,EAAK,YACd,OAASS,EAAO,CACd,MAAAC,EAAU,MAAM,kCAAmCD,CAAK,EAClDA,CACR,CACF,CAGA,IAAOU,EAA8B,CACnC,OAAO,KAAK,QAAWA,EAAU,CAAE,OAAQ,MAAO,CACpD,CAEA,KAAQA,EAAkBQ,EAA4B,CACpD,OAAO,KAAK,QAAWR,EAAU,CAC/B,OAAQ,OACR,KAAMQ,EAAO,KAAK,UAAUA,CAAI,EAAI,MAAA,CACrC,CACH,CAEA,IAAOR,EAAkBQ,EAA4B,CACnD,OAAO,KAAK,QAAWR,EAAU,CAC/B,OAAQ,MACR,KAAMQ,EAAO,KAAK,UAAUA,CAAI,EAAI,MAAA,CACrC,CACH,CAEA,OAAUR,EAA8B,CACtC,OAAO,KAAK,QAAWA,EAAU,CAAE,OAAQ,SAAU,CACvD,CACF,CAGyB,IAAIR,GC9QtB,MAAMiB,GAAkD,CAAC,CAC9D,KAAA/F,EACA,OAAAqB,EACA,QAAAO,EACA,gBAAAoE,CACF,IAAM,CACJ,KAAM,CAACC,EAAWC,CAAY,EAAIC,EAAAA,SAAqC,aAAa,EAC9E,CAACC,EAAWC,CAAY,EAAIF,EAAAA,SAAS,EAAK,EAC1C,CAACvB,EAAO0B,CAAQ,EAAIH,EAAAA,SAAwB,IAAI,EAChD,CAACI,EAASC,CAAU,EAAIL,EAAAA,SAAwB,IAAI,EAGpD,CAACM,EAAaC,CAAc,EAAIP,EAAAA,SAAmD,CAAA,CAAE,EACrF,CAACQ,EAAeC,CAAgB,EAAIT,EAAAA,SAAS,CAAE,QAAS,GAAI,SAAU,GAAI,EAG1E,CAACU,EAAqBC,CAAsB,EAAIX,EAAAA,SAA0B,CAAA,CAAE,EAC5E,CAACY,EAAeC,CAAgB,EAAIb,WAAS,CACjD,QAAS,GACT,SAAU,GACV,SAAU,GACV,WAAY,EAAA,CACb,EACK,CAACc,EAAuBC,CAAwB,EAAIf,EAAAA,SAAS,EAAK,EAGlE,CAAE,KAAMgB,EAAU,CAAA,CAAC,EAAMC,GAAW,CACxC,SAAUpB,EACV,gBAAiB,EAAA,CAClB,EAGKqB,EAAUC,EAAAA,QAAQ,IAAM,CAC5B,MAAMC,EAA8B,CAAA,EACpC,OAAAJ,EAAQ,QAASK,GAAW,CACtBA,EAAO,SAAW,MAAM,QAAQA,EAAO,OAAO,GAChDD,EAAW,KAAK,GAAGC,EAAO,OAAO,CAErC,CAAC,EACMD,CACT,EAAG,CAACJ,CAAO,CAAC,EAENM,EAAczH,GAAM,OAAO,KAAMgB,GAAMA,EAAE,OAAS,SAAS,EAC3D0G,EAAe1H,GAAM,OAAO,KAAMgB,GAAMA,EAAE,OAAS,UAAU,EAE7D,CAAE,KAAM2G,CAAA,EAA4BC,GACxCF,GAAc,WAAa1B,EACvB,CAAE,SAAU0B,EAAa,UAAW,SAAU1B,GAC9C,MAAA,EAGN6B,GAAM,UAAU,IAAM,CAChBF,GACFb,EAAuBa,CAAuB,CAElD,EAAG,CAACA,CAAuB,CAAC,EAG5BE,GAAM,UAAU,IAAM,CAChBxG,GAAUoG,GAAa,WAAazB,GACtC8B,EAAA,CAEJ,EAAG,CAACzG,EAAQoG,GAAa,UAAWzB,CAAe,CAAC,EAEpD,MAAM8B,EAAkB,SAAY,CAClC,GAAI,GAACL,GAAa,WAAa,CAACzB,GAEhC,CAAAK,EAAa,EAAI,EACjBC,EAAS,IAAI,EACb,GAAI,CACF,MAAMnC,EAAO,MAAMb,EAAW,eAAemE,EAAY,UAAWzB,CAAe,EACnFU,EAAevC,EAAK,IAAK9B,IAAO,CAC9B,QAASlD,EAAckD,EAAE,OAAO,GAAK,GACrC,SAAU0F,GAAc1F,EAAE,QAAQ,GAAK,MAAA,EACvC,CAAC,CACL,OAAS2F,EAAK,CACZ1B,EAAS0B,aAAe,MAAQA,EAAI,QAAU,4BAA4B,CAC5E,QAAA,CACE3B,EAAa,EAAK,CACpB,EACF,EAEM4B,EAAsB,IAAM,CAChC,GAAI,CAACtB,EAAc,QAAS,CAC1BL,EAAS,wBAAwB,EACjC,MACF,CAEA,MAAM4B,EAAUvB,EAAc,SAAW,OAAOA,EAAc,QAAQ,EAAI,OAG1E,GAAIF,EAAY,KAAMpE,GAAMA,EAAE,UAAYsE,EAAc,SAAWtE,EAAE,WAAa6F,CAAO,EAAG,CAC1F5B,EAAS,gCAAgC,EACzC,MACF,CAEAI,EAAe,CAAC,GAAGD,EAAa,CAAE,QAASE,EAAc,QAAS,SAAUuB,CAAA,CAAS,CAAC,EACtFtB,EAAiB,CAAE,QAAS,GAAI,SAAU,GAAI,EAC9CN,EAAS,IAAI,CACf,EAEM6B,EAA0B7J,GAAkB,CAChDoI,EAAeD,EAAY,OAAO,CAAC2B,EAAGC,IAAMA,IAAM/J,CAAK,CAAC,CAC1D,EAEMgK,EAAwB,SAAY,CACxC,GAAI,GAACb,GAAa,WAAa,CAACzB,GAEhC,CAAAK,EAAa,EAAI,EACjBC,EAAS,IAAI,EACbE,EAAW,IAAI,EAEf,GAAI,CACF,MAAMzC,EAAqC0C,EAAY,IAAKpE,IAAO,CACjE,IAAKoF,EAAY,UACjB,QAASpF,EAAE,QACX,SAAU2D,EACV,SAAU3D,EAAE,QAAA,EACZ,EAEF,MAAMiB,EAAW,kBAAkBmE,EAAY,UAAWzB,EAAiBjC,CAAO,EAClFyC,EAAW,iCAAiC,EAC5C,WAAW,IAAMA,EAAW,IAAI,EAAG,GAAI,CACzC,OAASwB,EAAK,CACZ1B,EAAS0B,aAAe,MAAQA,EAAI,QAAU,4BAA4B,CAC5E,QAAA,CACE3B,EAAa,EAAK,CACpB,EACF,EAEMkC,EAA8B,SAAY,CAC9C,GAAI,CAACb,GAAc,WAAa,CAACX,EAAc,SAAW,CAACA,EAAc,UAAY,CAACf,EAAiB,CACrGM,EAAS,oCAAoC,EAC7C,MACF,CAEAD,EAAa,EAAI,EACjBC,EAAS,IAAI,EACb,GAAI,CACF,MAAMvC,EAAsC,CAC1C,SAAU2D,EAAa,UACvB,SAAUX,EAAc,SACxB,QAASA,EAAc,QACvB,SAAUf,EACV,SAAUe,EAAc,SAAW,SAASA,EAAc,SAAU,EAAE,EAAI,OAC1E,WAAYA,EAAc,WAAa,SAASA,EAAc,WAAY,EAAE,EAAI,MAAA,EASlF,GANA,MAAMzD,EAAW,yBAAyBS,CAAO,EACjDyC,EAAW,0CAA0C,EACrDQ,EAAiB,CAAE,QAAS,GAAI,SAAU,GAAI,SAAU,GAAI,WAAY,GAAI,EAC5EE,EAAyB,EAAK,EAG1BQ,GAAc,WAAa1B,EAAiB,CAC9C,MAAMwC,EAAU,MAAMlF,EAAW,uBAAuB,CACtD,SAAUoE,EAAa,UACvB,SAAU1B,CAAA,CACX,EACDc,EAAuB0B,CAAO,CAChC,CACF,OAASR,EAAK,CACZ1B,EAAS0B,aAAe,MAAQA,EAAI,QAAU,mCAAmC,CACnF,QAAA,CACE3B,EAAa,EAAK,CACpB,CACF,EAEMoC,EAAiC,MAAOC,GAAyB,CACrE,GAAK,QAAQ,2DAA2D,EAExE,CAAArC,EAAa,EAAI,EACjBC,EAAS,IAAI,EACb,GAAI,CACF,MAAMhD,EAAW,yBAAyBoF,CAAY,EACtDlC,EAAW,0CAA0C,EACrDM,EAAuBD,EAAoB,OAAQ8B,GAAMA,EAAE,KAAOD,CAAY,CAAC,CACjF,OAASV,EAAK,CACZ1B,EAAS0B,aAAe,MAAQA,EAAI,QAAU,sCAAsC,CACtF,QAAA,CACE3B,EAAa,EAAK,CACpB,EACF,EAGMuC,EAAmBtB,EAAAA,QAAQ,IAAM,CACrC,MAAMuB,MAAiB,IACvB,OAAAxB,EAAQ,QAASyB,GAAuB,CACtC,MAAMC,EAAO5J,EAAc2J,EAAI,OAAO,EAClCC,GAAQ,CAACF,EAAW,IAAIE,CAAI,GAC9BF,EAAW,IAAIE,EAAMA,CAAI,CAE7B,CAAC,EACM,MAAM,KAAKF,EAAW,OAAA,CAAQ,CACvC,EAAG,CAACxB,CAAO,CAAC,EAGN2B,EAAmB1B,EAAAA,QAAQ,IAC1BX,EAAc,QACZU,EAAQ,OAAQyB,GAAuB3J,EAAc2J,EAAI,OAAO,IAAMnC,EAAc,OAAO,EAD/D,CAAA,EAElC,CAACU,EAASV,EAAc,OAAO,CAAC,EAEnC,GAAI,CAACtF,GAAU,CAACrB,EAAM,OAAO,KAE7B,MAAMiJ,EAAY,CAAC,CAACxB,EACdyB,EAAa,CAAC,CAACxB,EAErB,OACEvJ,EAAAA,KAAAgE,WAAA,CAEE,SAAA,CAAA/D,EAAAA,IAAC,MAAA,CAAI,UAAU,iCAAiC,QAASwD,EAAS,QAGjE,MAAA,CAAI,UAAU,8EACb,SAAAzD,EAAAA,KAAC,MAAA,CAAI,UAAU,kGAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kGACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,CAAA,wBAC5BgB,EAAca,EAAK,IAAI,GAAKA,EAAK,KAAA,EACzD,EACA5B,EAAAA,IAAC,SAAA,CACC,QAASwD,EACT,UAAU,uFAEV,SAAAxD,EAAAA,IAACgE,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAGC6G,GAAaC,GACZ9K,EAAAA,IAAC,MAAA,CAAI,UAAU,qCACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM+H,EAAa,aAAa,EACzC,UAAW,8DACTD,IAAc,cACV,gCACA,sDACN,GAEA,SAAA,CAAA7H,EAAAA,IAACO,EAAA,CAAM,UAAU,qBAAA,CAAsB,EAAE,mBAAA,CAAA,CAAA,EAG3CR,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM+H,EAAa,UAAU,EACtC,UAAW,8DACTD,IAAc,WACV,gCACA,sDACN,GAEA,SAAA,CAAA7H,EAAAA,IAAC6C,GAAA,CAAS,UAAU,qBAAA,CAAsB,EAAE,sBAAA,CAAA,CAAA,CAE9C,CAAA,CACF,CAAA,CACF,EAIF9C,EAAAA,KAAC,MAAA,CAAI,UAAU,gBAEZ,SAAA,CAAAyG,GACCxG,EAAAA,IAAC,MAAA,CAAI,UAAU,sEACZ,SAAAwG,EACH,EAED2B,GACCnI,EAAAA,IAAC,MAAA,CAAI,UAAU,4EACZ,SAAAmI,EACH,GAIAN,IAAc,eAAiB,CAACiD,IAAeD,GAC/C9K,OAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,sBAAmB,EACrED,EAAAA,KAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,CAAA,aAC3B6H,GAAmB,KAAA,CAAA,CAChC,CAAA,EACF,EAGA7H,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,iBAAc,EAChED,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,MAAOwI,EAAc,QACrB,SAAWtE,GAAMuE,EAAiB,CAAE,GAAGD,EAAe,QAAStE,EAAE,OAAO,MAAO,SAAU,GAAI,EAC7F,UAAU,6GAEV,SAAA,CAAAjE,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,gBAAa,EAC7BwK,EAAiB,IAAKO,GACrB/K,EAAAA,IAAC,UAAkB,MAAO+K,EACvB,SAAAA,CAAA,EADUA,CAEb,CACD,CAAA,CAAA,CAAA,EAGHhL,EAAAA,KAAC,SAAA,CACC,MAAOwI,EAAc,SACrB,SAAWtE,GAAMuE,EAAiB,CAAE,GAAGD,EAAe,SAAUtE,EAAE,OAAO,MAAO,EAChF,UAAU,6GACV,SAAU,CAACsE,EAAc,QAEzB,SAAA,CAAAvI,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,YAAS,EACzB4K,EAAiB,IAAKF,GACrB1K,EAAAA,IAAC,SAAA,CAAoB,MAAO0K,EAAI,GAC7B,WAAcA,EAAI,UAAU,GAAK,SAASA,EAAI,EAAE,EAAA,EADtCA,EAAI,EAEjB,CACD,CAAA,CAAA,CAAA,EAGH3K,EAAAA,KAAC,SAAA,CACC,QAAS8J,EACT,UAAU,iIACV,SAAU,CAACtB,EAAc,QAEzB,SAAA,CAAAvI,EAAAA,IAACgL,GAAA,CAAK,UAAU,SAAA,CAAU,EAAE,KAAA,CAAA,CAAA,CAE9B,CAAA,CACF,CAAA,EACF,QAGC,MAAA,CAAI,UAAU,oDACZ,SAAA3C,EAAY,SAAW,EACtBrI,EAAAA,IAAC,MAAA,CAAI,UAAU,wCAAwC,SAAA,yCAEvD,EAEAD,OAAC,QAAA,CAAM,UAAU,iBACf,SAAA,CAAAC,MAAC,QAAA,CAAM,UAAU,aACf,SAAAD,EAAAA,KAAC,KAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,kEAAkE,SAAA,cAEhF,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,kEAAkE,SAAA,QAEhF,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,mEAAmE,SAAA,QAAA,CAEjF,CAAA,CAAA,CACF,CAAA,CACF,EACAA,MAAC,SAAM,UAAU,2BACd,WAAY,IAAI,CAACiL,EAAYzI,IAAQ,CACpC,MAAMkI,EAAMzB,EAAQ,KAAM1C,IAAqBA,GAAE,KAAO0E,EAAW,QAAQ,EAC3E,OACElL,EAAAA,KAAC,KAAA,CAAa,UAAU,mBACtB,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCACX,SAAAiL,EAAW,QACd,EACAjL,EAAAA,IAAC,KAAA,CAAG,UAAU,0BACX,SAAA0K,EAAM3J,EAAc2J,EAAI,UAAU,GAAK,SAASA,EAAI,EAAE,GAAK,YAC9D,EACA1K,EAAAA,IAAC,KAAA,CAAG,UAAU,uBACZ,SAAAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM+J,EAAuBvH,CAAG,EACzC,UAAU,6DAEV,SAAAxC,EAAAA,IAAC+C,GAAA,CAAO,UAAU,SAAA,CAAU,CAAA,CAAA,CAC9B,CACF,CAAA,CAAA,EAdOP,CAeT,CAEJ,CAAC,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAEJ,EAGAxC,EAAAA,IAAC,MAAA,CAAI,UAAU,mBACb,SAAAA,EAAAA,IAAC,SAAA,CACC,QAASkK,EACT,SAAUlC,EACV,UAAU,gIAET,WACCjI,EAAAA,KAAAgE,EAAAA,SAAA,CACE,SAAA,CAAA/D,EAAAA,IAACsE,GAAA,CAAO,UAAU,sBAAA,CAAuB,EAAE,WAAA,CAAA,CAE7C,EAEAvE,EAAAA,KAAAgE,EAAAA,SAAA,CACE,SAAA,CAAA/D,EAAAA,IAACkL,GAAA,CAAK,UAAU,SAAA,CAAU,EAAE,kBAAA,CAAA,CAE9B,CAAA,CAAA,CAEJ,CACF,CAAA,EACF,GAIArD,IAAc,YAAc,CAACgD,IAAcC,GAC3C/K,OAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,uBAAoB,EACtED,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM+I,EAAyB,CAACD,CAAqB,EAC9D,SAAUb,EACV,UAAU,wIAEV,SAAA,CAAAhI,EAAAA,IAACgL,GAAA,CAAK,UAAU,SAAA,CAAU,EAAE,gBAAA,CAAA,CAAA,CAE9B,EACF,EAGCnC,GACC9I,EAAAA,KAAC,MAAA,CAAI,UAAU,6DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCAEb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,CAAA,UACvDC,EAAAA,IAAC,OAAA,CAAK,UAAU,eAAe,SAAA,GAAA,CAAC,CAAA,EACzC,EACAD,EAAAA,KAAC,SAAA,CACC,MAAO4I,EAAc,QACrB,SAAW1E,GAAM2E,EAAiB,CAAE,GAAGD,EAAe,QAAS1E,EAAE,OAAO,MAAO,EAC/E,UAAU,oHAEV,SAAA,CAAAjE,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,mBAAgB,EAChC,MAAM,KAAK,IAAI,IAAIiJ,EAAQ,IAAK1C,GAAqBxF,EAAcwF,EAAE,OAAO,CAAC,CAAC,CAAC,EAAE,IAAKoE,GACrF3K,MAAC,SAAA,CAAkB,MAAO2K,GAAQ,GAC/B,SAAAA,CAAA,EADUA,CAEb,CACD,CAAA,CAAA,CAAA,CACH,EACF,SAGC,MAAA,CACC,SAAA,CAAA5K,EAAAA,KAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,CAAA,SACxDC,EAAAA,IAAC,OAAA,CAAK,UAAU,eAAe,SAAA,GAAA,CAAC,CAAA,EACxC,EACAD,EAAAA,KAAC,SAAA,CACC,MAAO4I,EAAc,SACrB,SAAW1E,GAAM2E,EAAiB,CAAE,GAAGD,EAAe,SAAU1E,EAAE,OAAO,MAAO,EAChF,UAAU,oHAEV,SAAA,CAAAjE,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,kBAAe,EAC/BiJ,EACE,OAAQ1C,GAAqBxF,EAAcwF,EAAE,OAAO,IAAMoC,EAAc,OAAO,EAC/E,IAAKpC,GACJvG,EAAAA,IAAC,SAAA,CAAkB,MAAOuG,EAAE,GAAG,SAAA,EAC5B,WAAcA,EAAE,UAAU,GAAK,SAASA,EAAE,EAAE,EAAA,EADlCA,EAAE,EAEf,CACD,CAAA,CAAA,CAAA,CACL,EACF,SAGC,MAAA,CACC,SAAA,CAAAvG,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,WAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,MAAO2I,EAAc,SACrB,SAAW1E,GAAM2E,EAAiB,CAAE,GAAGD,EAAe,SAAU1E,EAAE,OAAO,MAAO,EAChF,IAAI,IACJ,UAAU,oHACV,YAAY,GAAA,CAAA,CACd,EACF,SAGC,MAAA,CACC,SAAA,CAAAjE,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,aAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,MAAO2I,EAAc,WACrB,SAAW1E,GAAM2E,EAAiB,CAAE,GAAGD,EAAe,WAAY1E,EAAE,OAAO,MAAO,EAClF,IAAI,IACJ,UAAU,oHACV,YAAY,GAAA,CAAA,CACd,CAAA,CACF,CAAA,EACF,EAGAlE,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CACb8I,EAAyB,EAAK,EAC9BF,EAAiB,CAAE,QAAS,GAAI,SAAU,GAAI,SAAU,GAAI,WAAY,GAAI,CAC9E,EACA,SAAUZ,EACV,UAAU,4HACX,SAAA,QAAA,CAAA,EAGDhI,EAAAA,IAAC,SAAA,CACC,QAASmK,EACT,SAAUnC,GAAa,CAACW,EAAc,SAAW,CAACA,EAAc,SAChE,UAAU,sIAET,WACC5I,EAAAA,KAAAgE,EAAAA,SAAA,CACE,SAAA,CAAA/D,EAAAA,IAACsE,GAAA,CAAO,UAAU,sBAAA,CAAuB,EAAE,aAAA,CAAA,CAE7C,EAEAvE,EAAAA,KAAAgE,EAAAA,SAAA,CACE,SAAA,CAAA/D,EAAAA,IAACgL,GAAA,CAAK,UAAU,SAAA,CAAU,EAAE,mBAAA,CAAA,CAE9B,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,EACF,QAID,MAAA,CAAI,UAAU,oDACZ,SAAAvC,EAAoB,SAAW,EAC9BzI,EAAAA,IAAC,MAAA,CAAI,UAAU,wCAAwC,SAAA,iCAEvD,EAEAD,OAAC,QAAA,CAAM,UAAU,iBACf,SAAA,CAAAC,MAAC,QAAA,CAAM,UAAU,aACf,SAAAD,EAAAA,KAAC,KAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,kEAAkE,SAAA,SAEhF,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,kEAAkE,SAAA,QAEhF,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,kEAAkE,SAAA,WAEhF,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,kEAAkE,SAAA,MAEhF,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,kEAAkE,SAAA,aAEhF,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,mEAAmE,SAAA,QAAA,CAEjF,CAAA,CAAA,CACF,CAAA,CACF,EACAA,EAAAA,IAAC,QAAA,CAAM,UAAU,2BACd,SAAAyI,EAAoB,IAAK0C,GACxBpL,EAAAA,KAAC,KAAA,CAAuB,UAAU,mBAChC,SAAA,CAAAC,EAAAA,IAAC,MAAG,UAAU,sCACX,WAAcmL,EAAW,OAAO,GAAK,IACxC,EACAnL,EAAAA,IAAC,MAAG,UAAU,0BACX,WAAcmL,EAAW,QAAQ,GAAK,IACzC,EACAnL,EAAAA,IAAC,MAAG,UAAU,0BACX,WAAcmL,EAAW,QAAQ,GAAK,IACzC,EACAnL,EAAAA,IAAC,MAAG,UAAU,0BACX,YAAcmL,EAAW,QAAQ,GAAK,IACzC,EACAnL,EAAAA,IAAC,MAAG,UAAU,0BACX,YAAcmL,EAAW,UAAU,GAAK,IAC3C,EACAnL,EAAAA,IAAC,KAAA,CAAG,UAAU,uBACZ,SAAAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMqK,EAA+Bc,EAAW,EAAE,EAC3D,SAAUnD,EACV,UAAU,iFAEV,SAAAhI,EAAAA,IAAC+C,GAAA,CAAO,UAAU,SAAA,CAAU,CAAA,CAAA,CAC9B,CACF,CAAA,GAxBOoI,EAAW,EAyBpB,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,EACF,EAGD,CAACN,GAAa,CAACC,GACd/K,EAAAA,KAAC,MAAA,CAAI,UAAU,gCAAgC,SAAA,CAAA,yDAE5C,KAAA,EAAG,EAAE,oDAAA,CAAA,CAER,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,CAEJ,ECjiBO,SAASqL,IAA6C,CAE3D,KAAM,CAAChK,EAAaiK,CAAc,EAAItD,EAAAA,SAAS,CAAC,EAC1C,CAAC1G,EAAYiK,CAAa,EAAIvD,EAAAA,SAAS,CAAC,EACxCzG,EAAe,GAGf,CAACiK,EAAYC,CAAa,EAAIzD,EAAAA,SAAS,EAAE,EACzC,CAAC0D,EAAcC,CAAe,EAAI3D,EAAAA,SAAiB,KAAK,EAGxD,CAAC4D,EAAgBC,CAAiB,EAAI7D,EAAAA,SAAS,EAAK,EACpD,CAAC8D,EAAiBC,CAAkB,EAAI/D,EAAAA,SAAS,EAAK,EACtD,CAACgE,EAAaC,CAAc,EAAIjE,EAAAA,SAAiC,IAAI,EAGrE,CAAC5E,EAAU8I,CAAW,EAAIlE,EAAAA,SAAuBrH,EAAe,EAChE,CAAC0C,EAAW8I,CAAY,EAAInE,EAAAA,SAAwB,IAAI,EACxD,CAAC1E,EAAe8I,CAAgB,EAAIpE,EAAAA,SAAS,EAAK,EAGlD,CAACzE,EAAU8I,CAAW,EAAIrE,EAAAA,SAAsB,CAAA,CAAE,EAClD,CAACxE,EAAW8I,CAAY,EAAItE,EAAAA,SAAkB,CAAA,CAAE,EAGhD,CAAE,KAAMuE,EAAc,UAAWC,EAAmB,MAAOC,CAAA,EAAkBpH,GAAA,EAC7E,CAAE,KAAMqH,EAAe,UAAWC,EAAoB,MAAOC,CAAA,EAAmBrH,GAAA,EAEhFsH,EAAc1D,EAAAA,QAClB,KAAO,CACL,EAAGqC,GAAc,OACjB,MAAOjK,EACP,QAASF,EAAc,GAAKE,CAAA,GAE9B,CAACA,EAAcF,EAAamK,CAAU,CAAA,EAGlCsB,EAAahI,GAAa+H,EAAa,CAAE,QAAS,GAAM,EAGxDE,EAAqBvH,GAAA,EACrBwH,EAAqBlH,GAAA,EACrBmH,EAAqBhH,GAAA,EAG3BiH,EAAAA,UAAU,IAAM,CACVX,KAA0BA,CAAY,CAC5C,EAAG,CAACA,CAAY,CAAC,EAEjBW,EAAAA,UAAU,IAAM,CACVR,KAA4BA,CAAa,CAC/C,EAAG,CAACA,CAAa,CAAC,EAElBQ,EAAAA,UAAU,IAAM,CACVJ,EAAW,MACbvB,EAAcuB,EAAW,KAAK,KAAK,CAEvC,EAAG,CAACA,EAAW,IAAI,CAAC,EAGpBI,EAAAA,UAAU,IAAM,CACd5B,EAAe,CAAC,CAClB,EAAG,CAACE,EAAYE,CAAY,CAAC,EAG7B,MAAMtK,EAAU0L,EAAW,WAAaN,GAAqBG,EACvDQ,EAAYL,EAAW,OAASL,GAAiBG,EAGjDzL,EAA2BgI,EAAAA,QAAQ,KAC1B2D,EAAW,MAAM,MAAQ,CAAA,GAC1B,IAAKjL,GAAS,CACxB,MAAMuL,EAAYvL,EAAK,OAAS,CAAA,EAC1ByH,EAAc8D,EAAU,KAAMvK,GAAMA,EAAE,OAAS,SAAS,EACxD0G,EAAe6D,EAAU,KAAMvK,GAAMA,EAAE,OAAS,UAAU,EAC1DwK,EAA4B,CAAE,GAAGxL,CAAA,EAEvC,OAAIyH,GAAa,WAAaiD,IAC5Bc,EAAS,YAAcd,EAAa,KAAM3H,GAAMA,EAAE,MAAQ0E,EAAY,SAAS,GAE7EC,GAAc,WAAamD,IAC7BW,EAAS,aAAeX,EAAc,KAAM7H,GAAMA,EAAE,KAAO0E,EAAa,SAAS,GAG5E8D,CACT,CAAC,EACA,CAACP,EAAW,KAAMP,EAAcG,CAAa,CAAC,EAG3CY,EAAgBnE,EAAAA,QAAQ,IACrBhI,EAAM,OAAQU,GAAS,CAC5B,MAAMuL,EAAYvL,EAAK,OAAO,IAAKgB,GAAMA,EAAE,IAAI,GAAK,CAAA,EACpD,OAAO6I,IAAiB,OAAS0B,EAAU,SAAS1B,CAAY,CAClE,CAAC,EACA,CAACvK,EAAOuK,CAAY,CAAC,EAGlB6B,GAAuBpE,EAAAA,QAAQ,IAAM,CACzC,MAAMqE,EAAWrM,EAAM,QAASsM,GAAMA,EAAE,OAAO,IAAK5K,GAAMA,EAAE,IAAI,GAAK,CAAA,CAAE,EACvE,MAAO,CACL,MAAOvB,EACP,SAAUkM,EAAS,OAAQ3K,GAAMA,IAAM,SAAS,EAAE,OAClD,UAAW2K,EAAS,OAAQ3K,GAAMA,IAAM,UAAU,EAAE,OACpD,OAAQ2K,EAAS,OAAQ3K,GAAMA,IAAM,OAAO,EAAE,OAC9C,MAAO2K,EAAS,OAAQ3K,GAAMA,IAAM,OAAO,EAAE,MAAA,CAEjD,EAAG,CAAC1B,EAAOG,CAAU,CAAC,EAGhBoM,GAAeC,EAAAA,YAAY,IAAM,CACrCxB,EAAa,IAAI,EACjBD,EAAYvL,EAAe,EAC3BkL,EAAkB,EAAI,CACxB,EAAG,CAAA,CAAE,EAEC+B,GAAgBD,EAAAA,YAAY,IAAM,CACtC9B,EAAkB,EAAK,CACzB,EAAG,CAAA,CAAE,EAECgC,GAAgBF,cAAa9L,GAA0B,CAC3DsK,EAAa,IAAI,EACjBF,EAAepK,CAAI,EACnBqK,EAAY,CACV,MAAOrK,EAAK,MACZ,KAAMd,EAAYc,EAAK,IAAI,EAC3B,SAAU,GACV,MAAOA,EAAK,OAAS,CAAA,CAAC,CACvB,EACDkK,EAAmB,EAAI,CACzB,EAAG,CAAA,CAAE,EAEC+B,GAAiBH,EAAAA,YAAY,IAAM,CACvC5B,EAAmB,EAAK,EACxBE,EAAe,IAAI,CACrB,EAAG,CAAA,CAAE,EAGC8B,GAAgBJ,cAAY,MAAOzJ,GAAuB,CAI9D,GAHAA,EAAE,eAAA,EACFiI,EAAa,IAAI,EAEb,CAAC/I,EAAS,MAAM,KAAA,GAAU,CAACA,EAAS,MAAM,SAAS,GAAG,EAAG,CAC3D+I,EAAa,mBAAmB,EAChC,MACF,CAEA,GAAI,CAAC/I,EAAS,SAAS,OAAQ,CAC7B+I,EAAa,0DAA0D,EACvE,MACF,CAEAC,EAAiB,EAAI,EACrB,GAAI,CACF,MAAMxG,EAA6B,CACjC,MAAOxC,EAAS,MAAM,KAAA,EACtB,KAAMA,EAAS,KAAK,KAAA,GAAU,OAC9B,SAAUA,EAAS,SAAS,KAAA,GAAU,OACtC,cAAe,QACf,MAAOA,EAAS,KAAA,EAGlB,MAAM2J,EAAmB,YAAYnH,CAAO,EAC5CiG,EAAkB,EAAK,CACzB,OAASpF,EAAgB,CAEvB0F,EADY1F,EACK,SAAW,4BAA4B,CAC1D,QAAA,CACE2F,EAAiB,EAAK,CACxB,CACF,EAAG,CAAChJ,EAAU2J,CAAkB,CAAC,EAE3BiB,GAAiBL,cAAY,MAAOzJ,GAAuB,CAE/D,GADAA,EAAE,eAAA,EACE,EAAC8H,EAIL,IAFAG,EAAa,IAAI,EAEb,CAAC/I,EAAS,MAAM,KAAA,GAAU,CAACA,EAAS,MAAM,SAAS,GAAG,EAAG,CAC3D+I,EAAa,mBAAmB,EAChC,MACF,CAEAC,EAAiB,EAAI,EACrB,GAAI,CACF,MAAMxG,EAA6B,CACjC,MAAOxC,EAAS,MAAM,KAAA,EACtB,KAAMA,EAAS,KAAK,KAAA,GAAU,OAC9B,MAAOA,EAAS,KAAA,EAGdA,EAAS,SAAS,SACpBwC,EAAQ,SAAWxC,EAAS,SAAS,KAAA,GAGvC,MAAM4J,EAAmB,YAAY,CAAE,GAAIhB,EAAY,GAAI,KAAMpG,EAAS,EAC1EmG,EAAmB,EAAK,CAC1B,OAAStF,EAAgB,CAEvB0F,EADY1F,EACK,SAAW,2BAA2B,CACzD,QAAA,CACE2F,EAAiB,EAAK,CACxB,EACF,EAAG,CAAChJ,EAAU4I,EAAagB,CAAkB,CAAC,EAExCiB,GAAmBN,cAAY,MAAO9L,GAA0B,CACpE,MAAMM,EAAWpB,EAAYc,EAAK,IAAI,GAAKA,EAAK,MAChD,GAAK,QAAQ,+CAA+CM,CAAQ,IAAI,EAIxE,GAAI,CACF,MAAM8K,EAAmB,YAAY,CAAE,GAAIpL,EAAK,GAAI,CACtD,OAAS4E,EAAgB,CAEvB,MAAM,6BADMA,EAC2B,OAAO,EAAE,CAClD,CACF,EAAG,CAACwG,CAAkB,CAAC,EAGjBiB,GAAUP,cAAa9M,GAAiB,CAC5C,GAAIuC,EAAS,MAAM,KAAMP,GAAMA,EAAE,OAAShC,CAAI,EAAG,CAC/CsL,EAAa,wBAAwB,EACrC,MACF,CAEAD,EAAaiC,IAAU,CACrB,GAAGA,EACH,MAAO,CAAC,GAAGA,EAAK,MAAO,CAAE,KAAAtN,EAAM,CAAA,EAC/B,CACJ,EAAG,CAACuC,EAAS,KAAK,CAAC,EAEbgL,GAAaT,cAAaxN,GAAkB,CAChD+L,EAAaiC,IAAU,CACrB,GAAGA,EACH,MAAOA,EAAK,MAAM,OAAO,CAAClE,EAAGC,IAAMA,IAAM/J,CAAK,CAAA,EAC9C,CACJ,EAAG,CAAA,CAAE,EAECkO,GAAmBV,EAAAA,YAAY,CAACxN,EAAeiE,EAAoBC,IAAqB,CAC5F6H,EAAaiC,GAAS,CACpB,MAAMG,EAAW,CAAC,GAAGH,EAAK,KAAK,EAC/B,GAAI9J,EACFiK,EAASnO,CAAK,EAAI,CAChB,GAAGmO,EAASnO,CAAK,EACjB,YAAaiE,EACb,UAAWC,CAAA,MAER,CACL,KAAM,CAAE,YAAAkK,EAAa,UAAAC,EAAW,GAAGC,EAAA,EAASH,EAASnO,CAAK,EAG1DmO,EAASnO,CAAK,EAAIsO,EACpB,CACA,MAAO,CAAE,GAAGN,EAAM,MAAOG,CAAA,CAC3B,CAAC,CACH,EAAG,CAAA,CAAE,EAEL,MAAO,CAEL,MAAAnN,EACA,SAAAoC,EACA,UAAAC,EACA,UAAA+J,GACA,WAAAjM,EAGA,QAAAF,EACA,UAAA+L,EACA,cAAA7J,EAGA,YAAAjC,EACA,aAAAE,EACA,eAAA+J,EAGA,WAAAE,EACA,cAAAC,EACA,aAAAC,EACA,gBAAAC,EACA,cAAA2B,EAGA,SAAAlK,EACA,YAAA8I,EACA,UAAA7I,EACA,aAAA8I,EAGA,eAAAP,EACA,kBAAAC,EACA,gBAAAC,EACA,mBAAAC,EACA,YAAAC,EACA,eAAAC,EAGA,cAAA8B,GACA,eAAAC,GACA,iBAAAC,GACA,aAAAP,GACA,cAAAG,GACA,cAAAD,GACA,eAAAE,GAGA,QAAAI,GACA,WAAAE,GACA,iBAAAC,EAAA,CAEJ,CC3WA,MAAMK,GAA2B,IAAM,CACrC,KAAM,CAAE,gBAAA7G,CAAA,EAAoB8G,GAAA,EACtB,CAACC,EAAiBC,CAAkB,EAAI7G,EAAAA,SAAiC,IAAI,EAE7E,CAEJ,SAAAzE,EACA,UAAAC,EACA,UAAA+J,EACA,WAAAjM,EAGA,QAAAF,EACA,UAAA+L,EACA,cAAA7J,EAGA,YAAAjC,EACA,aAAAE,EACA,eAAA+J,EAGA,WAAAE,EACA,cAAAC,EACA,aAAAC,EACA,gBAAAC,EACA,cAAA2B,EAGA,SAAAlK,EACA,YAAA8I,EACA,UAAA7I,EAGA,eAAAuI,EACA,gBAAAE,EAGA,cAAAiC,EACA,eAAAC,EACA,iBAAAC,EACA,aAAAP,EACA,cAAAG,EACA,cAAAD,EACA,eAAAE,EAGA,QAAAI,EACA,WAAAE,EACA,iBAAAC,CAAA,EACEhD,GAAA,EAGEyD,EAAoB9I,GAAmC,CAC3DkG,EAAaiC,IAAU,CAAE,GAAGA,EAAM,GAAGnI,GAAO,CAC9C,EAEA,OACEhG,EAAAA,KAAC,MAAA,CAAI,UAAU,MAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oEACb,SAAA,CAAAC,EAAAA,IAACZ,GAAA,CACC,MAAM,qBACN,SAAS,sCAAA,CAAA,EAEXY,EAAAA,IAAC,MAAA,CAAI,UAAU,0BACb,SAAAD,EAAAA,KAAC,SAAA,CACC,QAAS0N,EACT,UAAU,iHAEV,SAAA,CAAAzN,EAAAA,IAACgL,GAAA,CAAK,UAAU,SAAA,CAAU,EAAE,iBAAA,CAAA,CAAA,CAE9B,CACF,CAAA,EACF,EAGCkC,GACCnN,EAAAA,KAAC,MAAA,CAAI,UAAU,mEAAmE,SAAA,CAAA,sBAC5DmN,EAAU,OAAA,EAChC,EAIFlN,EAAAA,IAACI,GAAA,CAAe,MAAOkN,CAAA,CAAW,EAGlCvN,EAAAA,KAAC,MAAA,CAAI,UAAU,uCAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAC,EAAAA,IAAC8O,GAAA,CAAO,UAAU,gEAAA,CAAiE,EACnF9O,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,YAAY,sCACZ,MAAOuL,EACP,SAAWtH,GAAMuH,EAAcvH,EAAE,OAAO,KAAK,EAC7C,UAAU,iHAAA,CAAA,CACZ,EACF,EAGAlE,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAAC+O,GAAA,CAAO,UAAU,gEAAA,CAAiE,EACnFhP,EAAAA,KAAC,SAAA,CACC,MAAO0L,EACP,SAAWxH,GAAMyH,EAAgBzH,EAAE,OAAO,KAAK,EAC/C,UAAU,oIAEV,SAAA,CAAAjE,EAAAA,IAAC,SAAA,CAAO,MAAM,MAAM,SAAA,aAAU,EAC9BA,EAAAA,IAAC,SAAA,CAAO,MAAM,QAAQ,SAAA,QAAK,EAC3BA,EAAAA,IAAC,SAAA,CAAO,MAAM,WAAW,SAAA,QAAK,EAC9BA,EAAAA,IAAC,SAAA,CAAO,MAAM,UAAU,SAAA,YAAS,EACjCA,EAAAA,IAAC,SAAA,CAAO,MAAM,QAAQ,SAAA,QAAK,EAC3BA,EAAAA,IAAC,SAAA,CAAO,MAAM,SAAS,SAAA,SAAM,EAC7BA,EAAAA,IAAC,SAAA,CAAO,MAAM,oBAAoB,SAAA,WAAA,CAAS,CAAA,CAAA,CAAA,CAC7C,CAAA,CACF,CAAA,EACF,EAGAA,EAAAA,IAACiB,GAAA,CACC,MAAOoM,EACP,QAAAlM,EACA,YAAAC,EACA,WAAYqK,IAAiB,MAAQpK,EAAagM,EAAc,OAChE,aAAA/L,EACA,oBAAqBsN,EACrB,aAAcvD,EACd,WAAYuC,EACZ,aAAcI,CAAA,CAAA,EAIhBhO,EAAAA,IAACgD,GAAA,CACC,OAAQ2I,EACR,OAAQ,GACR,SAAAxI,EACA,UAAAC,EACA,cAAAC,EACA,SAAAC,EACA,UAAAC,EACA,QAASoK,EACT,SAAUG,EACV,aAAce,EACd,UAAWZ,EACX,aAAcE,EACd,mBAAoBC,CAAA,CAAA,EAItBpO,EAAAA,IAACgD,GAAA,CACC,OAAQ6I,EACR,OAAQ,GACR,SAAA1I,EACA,UAAAC,EACA,cAAAC,EACA,SAAAC,EACA,UAAAC,EACA,QAASsK,EACT,SAAUE,EACV,aAAcc,EACd,UAAWZ,EACX,aAAcE,EACd,mBAAoBC,CAAA,CAAA,EAItBpO,EAAAA,IAAC2H,GAAA,CACC,KAAMgH,EACN,OAAQ,CAAC,CAACA,EACV,QAAS,IAAMC,EAAmB,IAAI,EACtC,gBAAAhH,CAAA,CAAA,CACF,EACF,CAEJ"}