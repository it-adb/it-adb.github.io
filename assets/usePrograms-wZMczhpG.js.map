{"version":3,"file":"usePrograms-wZMczhpG.js","sources":["../../src/hooks/usePrograms.ts"],"sourcesContent":["import { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport type { UseMutationOptions, UseQueryOptions } from '@tanstack/react-query';\r\nimport { apiService, type MessageResponse } from '../services/api';\r\nimport type { Prodi, CreateProdiRequest, UpdateProdiRequest } from '../types';\r\n\r\nconst queryKey = ['programs'] as const;\r\n\r\nexport function usePrograms(options?: Omit<UseQueryOptions<Prodi[], Error>, 'queryKey' | 'queryFn'>) {\r\n  return useQuery<Prodi[], Error>({\r\n    queryKey,\r\n    queryFn: () => apiService.getPrograms(),\r\n    // Allow callers to override defaults (e.g., staleTime)\r\n    ...(options ?? {}),\r\n  });\r\n}\r\n\r\nexport const programsQueryKey = queryKey;\r\n\r\n// Mutations\r\nexport function useCreateProgram(options?: UseMutationOptions<MessageResponse, Error, CreateProdiRequest>) {\r\n  const qc = useQueryClient();\r\n  return useMutation<MessageResponse, Error, CreateProdiRequest>({\r\n    mutationFn: (payload: CreateProdiRequest) => apiService.createProgram(payload),\r\n    onSuccess: (...args) => {\r\n      qc.invalidateQueries({ queryKey });\r\n      options?.onSuccess?.(...args);\r\n    },\r\n    ...options,\r\n  });\r\n}\r\n\r\nexport function useUpdateProgram(options?: UseMutationOptions<MessageResponse, Error, { kode_prodi: string; data: UpdateProdiRequest }>) {\r\n  const qc = useQueryClient();\r\n  return useMutation<MessageResponse, Error, { kode_prodi: string; data: UpdateProdiRequest }>({\r\n    mutationFn: ({ kode_prodi, data }) => apiService.updateProgram(kode_prodi, data),\r\n    onSuccess: (...args) => {\r\n      qc.invalidateQueries({ queryKey });\r\n      options?.onSuccess?.(...args);\r\n    },\r\n    ...options,\r\n  });\r\n}\r\n\r\nexport function useDeleteProgram(options?: UseMutationOptions<MessageResponse, Error, { kode_prodi: string }>) {\r\n  const qc = useQueryClient();\r\n  return useMutation<MessageResponse, Error, { kode_prodi: string }>({\r\n    mutationFn: ({ kode_prodi }) => apiService.deleteProgram(kode_prodi),\r\n    onSuccess: (...args) => {\r\n      qc.invalidateQueries({ queryKey });\r\n      options?.onSuccess?.(...args);\r\n    },\r\n    ...options,\r\n  });\r\n}\r\n"],"names":["queryKey","usePrograms","options","useQuery","apiService","useCreateProgram","qc","useQueryClient","useMutation","payload","args","useUpdateProgram","kode_prodi","data","useDeleteProgram"],"mappings":"qGAKA,MAAMA,EAAW,CAAC,UAAU,EAErB,SAASC,EAAYC,EAAyE,CACnG,OAAOC,EAAyB,CAC9B,SAAAH,EACA,QAAS,IAAMI,EAAW,YAAA,CAEV,CACjB,CACH,CAKO,SAASC,EAAiBH,EAA0E,CACzG,MAAMI,EAAKC,EAAA,EACX,OAAOC,EAAwD,CAC7D,WAAaC,GAAgCL,EAAW,cAAcK,CAAO,EAC7E,UAAW,IAAIC,IAAS,CACtBJ,EAAG,kBAAkB,CAAE,SAAAN,EAAU,CAEnC,EACA,GAAGE,CAAA,CACJ,CACH,CAEO,SAASS,EAAiBT,EAAwG,CACvI,MAAMI,EAAKC,EAAA,EACX,OAAOC,EAAsF,CAC3F,WAAY,CAAC,CAAE,WAAAI,EAAY,KAAAC,KAAWT,EAAW,cAAcQ,EAAYC,CAAI,EAC/E,UAAW,IAAIH,IAAS,CACtBJ,EAAG,kBAAkB,CAAE,SAAAN,EAAU,CAEnC,EACA,GAAGE,CAAA,CACJ,CACH,CAEO,SAASY,EAAiBZ,EAA8E,CAC7G,MAAMI,EAAKC,EAAA,EACX,OAAOC,EAA4D,CACjE,WAAY,CAAC,CAAE,WAAAI,KAAiBR,EAAW,cAAcQ,CAAU,EACnE,UAAW,IAAIF,IAAS,CACtBJ,EAAG,kBAAkB,CAAE,SAAAN,EAAU,CAEnC,EACA,GAAGE,CAAA,CACJ,CACH"}