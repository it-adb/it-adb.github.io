{"version":3,"file":"useClasses-C2oyc9Cb.js","sources":["../../src/hooks/useClasses.ts"],"sourcesContent":["import { useQuery, type UseQueryOptions, useMutation, useQueryClient, type UseMutationOptions } from '@tanstack/react-query';\r\nimport { apiService, type MessageResponse } from '../services/api';\r\nimport type { StudentClass, StudentAttendanceResponse } from '../types';\r\n\r\nexport function useLecturerClasses(\r\n  lecturerId?: string,\r\n  params?: { semester?: string; start_day?: string; end_day?: string },\r\n  options?: Omit<UseQueryOptions<StudentClass[], Error>, 'queryKey' | 'queryFn'>\r\n) {\r\n  const key = ['lecturer-classes', lecturerId ?? null, params?.semester ?? null, params?.start_day ?? null, params?.end_day ?? null] as const;\r\n  return useQuery<StudentClass[], Error>({\r\n    queryKey: key,\r\n    queryFn: () => {\r\n      if (!lecturerId) return Promise.resolve([] as StudentClass[]);\r\n      return apiService.getLecturerClasses(lecturerId, params);\r\n    },\r\n    enabled: Boolean(lecturerId),\r\n    ...(options ?? {}),\r\n  });\r\n}\r\n\r\nexport function useStudentClasses(\r\n  nim?: string,\r\n  params?: { semester?: string; start_day?: string; end_day?: string },\r\n  options?: Omit<UseQueryOptions<StudentClass[], Error>, 'queryKey' | 'queryFn'>\r\n) {\r\n  const key = ['student-classes', nim ?? null, params?.semester ?? null, params?.start_day ?? null, params?.end_day ?? null] as const;\r\n  return useQuery<StudentClass[], Error>({\r\n    queryKey: key,\r\n    queryFn: () => {\r\n      if (!nim) return Promise.resolve([] as StudentClass[]);\r\n      return apiService.getStudentClasses(nim, params);\r\n    },\r\n    enabled: Boolean(nim),\r\n    ...(options ?? {}),\r\n  });\r\n}\r\n\r\nexport function useStudentAttendances(\r\n  params?: { semester?: string; kode_mk?: string },\r\n  options?: Omit<UseQueryOptions<StudentAttendanceResponse[], Error>, 'queryKey' | 'queryFn'>\r\n) {\r\n  const key = ['student-attendances', params?.semester ?? null, params?.kode_mk ?? null] as const;\r\n  return useQuery<StudentAttendanceResponse[], Error>({\r\n    queryKey: key,\r\n    queryFn: () => apiService.getStudentAttendances(params),\r\n    ...(options ?? {}),\r\n  });\r\n}\r\n\r\nexport function useCheckInAttendance(\r\n  options?: UseMutationOptions<MessageResponse, Error, import('../types').StudentCheckInRequest>\r\n) {\r\n  const qc = useQueryClient();\r\n  return useMutation<MessageResponse, Error, import('../types').StudentCheckInRequest>({\r\n    mutationFn: (payload) => apiService.checkInAttendance(payload),\r\n    onSuccess: (...args) => {\r\n      // Invalidate attendance queries\r\n      qc.invalidateQueries({ queryKey: ['student-attendances'] });\r\n      options?.onSuccess?.(...args);\r\n    },\r\n    ...options,\r\n  });\r\n}\r\n\r\nexport function useUpdateCheckInAttendance(\r\n  options?: UseMutationOptions<MessageResponse, Error, import('../types').StudentUpdateCheckInRequest>\r\n) {\r\n  const qc = useQueryClient();\r\n  return useMutation<MessageResponse, Error, import('../types').StudentUpdateCheckInRequest>({\r\n    mutationFn: (payload) => apiService.updateCheckInAttendance(payload),\r\n    onSuccess: (...args) => {\r\n      // Invalidate attendance queries\r\n      qc.invalidateQueries({ queryKey: ['student-attendances'] });\r\n      options?.onSuccess?.(...args);\r\n    },\r\n    ...options,\r\n  });\r\n}\r\n"],"names":["useLecturerClasses","lecturerId","params","options","key","useQuery","apiService","useStudentClasses","nim","useStudentAttendances","useCheckInAttendance","qc","useQueryClient","useMutation","payload","args","useUpdateCheckInAttendance"],"mappings":"gGAIO,SAASA,EACdC,EACAC,EACAC,EACA,CACA,MAAMC,EAAM,CAAC,mBAAoBH,GAAc,KAAMC,GAAQ,UAAY,KAAMA,GAAQ,WAAa,KAAMA,GAAQ,SAAW,IAAI,EACjI,OAAOG,EAAgC,CACrC,SAAUD,EACV,QAAS,IACFH,EACEK,EAAW,mBAAmBL,EAAYC,CAAM,EAD/B,QAAQ,QAAQ,CAAA,CAAoB,EAG9D,QAAS,EAAQD,CACD,CACjB,CACH,CAEO,SAASM,EACdC,EACAN,EACAC,EACA,CACA,MAAMC,EAAM,CAAC,kBAAmBI,GAAO,KAAMN,GAAQ,UAAY,KAAMA,GAAQ,WAAa,KAAMA,GAAQ,SAAW,IAAI,EACzH,OAAOG,EAAgC,CACrC,SAAUD,EACV,QAAS,IACFI,EACEF,EAAW,kBAAkBE,EAAKN,CAAM,EAD9B,QAAQ,QAAQ,CAAA,CAAoB,EAGvD,QAAS,EAAQM,CACD,CACjB,CACH,CAEO,SAASC,EACdP,EACAC,EACA,CAEA,OAAOE,EAA6C,CAClD,SAFU,CAAC,sBAA2C,KAAyB,IAAI,EAGnF,QAAS,IAAMC,EAAW,sBAAsBJ,CAAM,CACtC,CACjB,CACH,CAEO,SAASQ,EACdP,EACA,CACA,MAAMQ,EAAKC,EAAA,EACX,OAAOC,EAA8E,CACnF,WAAaC,GAAYR,EAAW,kBAAkBQ,CAAO,EAC7D,UAAW,IAAIC,IAAS,CAEtBJ,EAAG,kBAAkB,CAAE,SAAU,CAAC,qBAAqB,EAAG,CAE5D,EACA,GAAGR,CAAA,CACJ,CACH,CAEO,SAASa,EACdb,EACA,CACA,MAAMQ,EAAKC,EAAA,EACX,OAAOC,EAAoF,CACzF,WAAaC,GAAYR,EAAW,wBAAwBQ,CAAO,EACnE,UAAW,IAAIC,IAAS,CAEtBJ,EAAG,kBAAkB,CAAE,SAAU,CAAC,qBAAqB,EAAG,CAE5D,EACA,GAAGR,CAAA,CACJ,CACH"}