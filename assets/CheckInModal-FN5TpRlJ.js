import{j as e}from"./query-vendor-B--u1oZD.js";import{g as a}from"./react-vendor-XXJdR_Id.js";import{b as p}from"./useClasses-h-HHWjgv.js";import{X as f,w as j,t as k,r as g,u as y,s as w,g as N}from"./ui-vendor-Bvty7Z9l.js";const A=({isOpen:r,meetingId:c,courseName:h,onClose:i})=>{const[n,d]=a.useState("Hadir"),[l,o]=a.useState(""),[m,x]=a.useState(""),s=p();a.useEffect(()=>{r&&(d("Hadir"),o(""),x(""))},[r]);const u=async()=>{if(!(!c||s.isPending))try{await s.mutateAsync({id_pertemuan:c,status_kehadiran:n,deskripsi:l.trim()||void 0,link_bukti:m.trim()||void 0}),i(),alert(`Successfully checked in as ${{Hadir:"Present",Izin:"Permission",Sakit:"Sick",Alfa:"Absent",Terlambat:"Late",Pengganti:"Substitute"}[n]}!`)}catch(t){console.error("Check-in failed:",t),alert(`Check-in failed: ${t instanceof Error?t.message:"Unknown error"}`)}};return r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:i}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 sticky top-0 bg-white",children:[e.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-900",children:"Check-in Attendance"}),e.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 transition-colors cursor-pointer",disabled:s.isPending,children:e.jsx(f,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course"}),e.jsx("div",{className:"text-sm text-gray-900",children:h})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attendance Status *"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Hadir","Izin","Sakit","Alfa","Terlambat","Pengganti"].map(t=>{const b=()=>{switch(t){case"Hadir":return e.jsx(g,{className:"h-4 w-4"});case"Izin":return e.jsx(N,{className:"h-4 w-4"});case"Sakit":return e.jsx(w,{className:"h-4 w-4"});case"Terlambat":return e.jsx(y,{className:"h-4 w-4"});case"Pengganti":return e.jsx(g,{className:"h-4 w-4"});case"Alfa":return e.jsx(k,{className:"h-4 w-4"})}};return e.jsxs("button",{onClick:()=>d(t),disabled:s.isPending,className:`px-3 lg:px-4 py-2 text-xs lg:text-sm font-medium rounded-lg transition-colors cursor-pointer flex items-center justify-center gap-1.5 ${n===t?t==="Hadir"?"bg-green-600 text-white":t==="Alfa"?"bg-red-600 text-white":t==="Pengganti"?"bg-purple-600 text-white":t==="Terlambat"?"bg-orange-600 text-white":t==="Izin"?"bg-blue-600 text-white":"bg-yellow-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"} ${s.isPending?"opacity-50 cursor-not-allowed":""}`,children:[b(),e.jsxs("span",{className:"hidden sm:inline",children:[t==="Hadir"&&"Present",t==="Izin"&&"Permission",t==="Sakit"&&"Sick",t==="Alfa"&&"Absent",t==="Terlambat"&&"Late",t==="Pengganti"&&"Substitute"]}),e.jsx("span",{className:"sm:inline md:hidden",children:t})]},t)})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"link-bukti",className:"block text-sm font-medium text-gray-700 mb-1",children:"Proof Link (Optional)"}),e.jsx("input",{id:"link-bukti",type:"url",value:m,onChange:t=>x(t.target.value),disabled:s.isPending,placeholder:"https://example.com/proof.jpg",className:"input-field w-full text-sm",maxLength:500}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Link to attendance proof (e.g., photo, document)"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{id:"description",value:l,onChange:t=>o(t.target.value),disabled:s.isPending,placeholder:"Add a note about your attendance...",rows:3,className:"input-field w-full text-sm resize-none",maxLength:500}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[l.length,"/500 characters"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-end gap-2 sm:gap-3 p-4 border-t border-gray-200 sticky bottom-0 bg-white",children:[e.jsx("button",{onClick:i,disabled:s.isPending,className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer order-2 sm:order-1",children:"Cancel"}),e.jsx("button",{onClick:u,disabled:s.isPending,className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex items-center justify-center gap-2 order-1 sm:order-2",children:s.isPending?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Checking in..."})]}):e.jsx("span",{children:"Confirm Check-in"})})]})]})})]}):null};export{A as C};
//# sourceMappingURL=CheckInModal-FN5TpRlJ.js.map
