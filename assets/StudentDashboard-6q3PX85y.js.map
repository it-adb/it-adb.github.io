{"version":3,"file":"StudentDashboard-6q3PX85y.js","sources":["../../src/pages/student/StudentDashboard.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Clock, CheckCircle } from 'lucide-react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useEffect, useState } from 'react';\r\nimport type { StudentAttendanceResponse } from '../../types';\r\nimport { useStudentClasses, useStudentAttendances } from '../../hooks/useClasses';\r\nimport { extractString, extractDate } from '../../utils/sqlNull';\r\nimport CheckInModal from '../../components/shared/CheckInModal';\r\n\r\ntype Day = 'Monday' | 'Tuesday' | 'Wednesday' | 'Thursday' | 'Friday';\r\n\r\ntype WeekDay = 'Sunday' | 'Monday' | 'Tuesday' | 'Wednesday' | 'Thursday' | 'Friday' | 'Saturday';\r\n\r\ninterface ScheduleItem {\r\n  id: string;\r\n  day: Day;\r\n  startTime: string;\r\n  endTime: string;\r\n  courseCode: string;\r\n  courseName: string;\r\n  className: string;\r\n  credits: number;\r\n  room: string;\r\n  topic: string;\r\n  weekNumber: number;\r\n  classId: number;\r\n  actualDate?: Date;\r\n  meetingId: number;\r\n}\r\n\r\n// Helper to extract day name from date string\r\nconst getDayFromDate = (dateValue: unknown): Day | null => {\r\n  const date = extractDate(dateValue as any);\r\n  if (!date) return null;\r\n  const dayIndex = date.getDay();\r\n  const daysMap: Record<number, Day> = {\r\n    1: 'Monday',\r\n    2: 'Tuesday',\r\n    3: 'Wednesday',\r\n    4: 'Thursday',\r\n    5: 'Friday',\r\n  };\r\n  return daysMap[dayIndex] || null;\r\n};\r\n\r\n// Helper to extract time from datetime string\r\nconst getTimeFromDate = (dateValue: unknown): string => {\r\n  const dateStr = extractString(dateValue as any);\r\n  if (!dateStr) return '00:00';\r\n  \r\n  const timePart = dateStr.split('T')[1]?.split('.')[0] || dateStr.split('T')[1]?.split('Z')[0];\r\n  if (timePart) {\r\n    return timePart.substring(0, 5);\r\n  }\r\n  const date = new Date(dateStr);\r\n  return date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false });\r\n};\r\n\r\n// Helper to get current week's start (Sunday) and end (Saturday)\r\nconst getCurrentWeekRange = (): { start: Date; end: Date } => {\r\n  const today = new Date();\r\n  const dayOfWeek = today.getDay();\r\n  \r\n  const daysToSunday = dayOfWeek === 0 ? 0 : dayOfWeek;\r\n  \r\n  const start = new Date(today);\r\n  start.setDate(today.getDate() - daysToSunday);\r\n  start.setHours(0, 0, 0, 0);\r\n  \r\n  const end = new Date(start);\r\n  end.setDate(start.getDate() + 6);\r\n  end.setHours(23, 59, 59, 999);\r\n  \r\n  return { start, end };\r\n};\r\n\r\nconst StudentDashboard: React.FC = () => {\r\n  const { user } = useAuth();\r\n  const [thisWeekItems, setThisWeekItems] = useState<(ScheduleItem & { weekDay: WeekDay })[]>([]);\r\n  const [showCheckInModal, setShowCheckInModal] = useState(false);\r\n  const [checkInMeetingId, setCheckInMeetingId] = useState<number | null>(null);\r\n  const [checkInCourseName, setCheckInCourseName] = useState('');\r\n\r\n  // Get this week's date range for backend filtering\r\n  const { start, end } = React.useMemo(() => getCurrentWeekRange(), []);\r\n  const startDay = start.toISOString().split('T')[0];\r\n  const endDate = end.toISOString().split('T')[0];\r\n\r\n  // Fetch classes with this week's date range\r\n  const { data: classes = [] } = useStudentClasses(\r\n    user?.studentId || '',\r\n    { start_day: startDay, end_day: endDate }\r\n  );\r\n\r\n  // Fetch attendances\r\n  const { data: attendances = [] } = useStudentAttendances();\r\n\r\n  const openCheckInModal = (meetingId: number, courseName: string) => {\r\n    setCheckInMeetingId(meetingId);\r\n    setCheckInCourseName(courseName);\r\n    setShowCheckInModal(true);\r\n  };\r\n\r\n  const closeCheckInModal = () => {\r\n    setShowCheckInModal(false);\r\n    setCheckInMeetingId(null);\r\n    setCheckInCourseName('');\r\n  };\r\n\r\n  const isCheckedIn = (meetingId: number): boolean => {\r\n    return Array.isArray(attendances) && attendances.some(att => att.id_pertemuan === meetingId);\r\n  };\r\n\r\n  const getAttendanceInfo = (meetingId: number): StudentAttendanceResponse | undefined => {\r\n    return Array.isArray(attendances) ? attendances.find(att => att.id_pertemuan === meetingId) : undefined;\r\n  };\r\n\r\n  const canCheckIn = (item: ScheduleItem): { allowed: boolean; reason?: string } => {\r\n    if (!item.actualDate) {\r\n      return { allowed: false, reason: 'Invalid meeting date' };\r\n    }\r\n\r\n    if (isCheckedIn(item.meetingId)) {\r\n      return { allowed: false, reason: 'Already checked in' };\r\n    }\r\n\r\n    const [hours, minutes] = item.startTime.split(':').map(Number);\r\n    const meetingDateTime = new Date(item.actualDate);\r\n    meetingDateTime.setHours(hours, minutes, 0, 0);\r\n\r\n    const now = new Date();\r\n    const fiveMinutesBeforeMeeting = new Date(meetingDateTime.getTime() - 5 * 60 * 1000);\r\n\r\n    if (now < fiveMinutesBeforeMeeting) {\r\n      return { \r\n        allowed: false\r\n      };\r\n    }\r\n\r\n    return { allowed: true };\r\n  };\r\n\r\n  const getAttendanceColors = (status: string): { border: string; bg: string; text: string; icon: string } => {\r\n    const normalizedStatus = status.toLowerCase();\r\n    if (normalizedStatus === 'hadir') {\r\n      return { \r\n        border: 'border-green-300', \r\n        bg: 'bg-green-50', \r\n        text: 'text-green-700', \r\n        icon: 'text-green-600' \r\n      };\r\n    } else if (normalizedStatus === 'izin' || normalizedStatus === 'sakit') {\r\n      return { \r\n        border: 'border-yellow-300', \r\n        bg: 'bg-yellow-50', \r\n        text: 'text-yellow-700', \r\n        icon: 'text-yellow-600' \r\n      };\r\n    } else if (normalizedStatus === 'alfa') {\r\n      return { \r\n        border: 'border-red-300', \r\n        bg: 'bg-red-50', \r\n        text: 'text-red-700', \r\n        icon: 'text-red-600' \r\n      };\r\n    } else if (normalizedStatus === 'terlambat') {\r\n      return { \r\n        border: 'border-orange-300', \r\n        bg: 'bg-orange-50', \r\n        text: 'text-orange-700', \r\n        icon: 'text-orange-600' \r\n      };\r\n    }\r\n    return { \r\n      border: 'border-green-300', \r\n      bg: 'bg-green-50', \r\n      text: 'text-green-700', \r\n      icon: 'text-green-600' \r\n    };\r\n  };\r\n\r\n  const formatDateTime = (dateString: string | null | undefined): { date: string; time: string } | null => {\r\n    if (!dateString) return null;\r\n    try {\r\n      const date = new Date(dateString);\r\n      if (isNaN(date.getTime())) return null;\r\n      \r\n      return {\r\n        date: date.toLocaleDateString('id-ID', { day: 'numeric', month: 'short' }),\r\n        time: date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false })\r\n      };\r\n    } catch {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const items: ScheduleItem[] = [];\r\n    classes.forEach(classData => {\r\n      classData.meeting_schedules.forEach(meeting => {\r\n        const day = getDayFromDate(meeting.tgl_pertemuan);\r\n        \r\n        if (!day) return;\r\n        \r\n        const startTime = getTimeFromDate(meeting.jam_pertemuan);\r\n        const actualDate = extractDate(meeting.tgl_pertemuan);\r\n        \r\n        // Skip if no valid date\r\n        if (!actualDate) return;\r\n        \r\n        const totalSKS = classData.sks_tatap_muka + classData.sks_praktek + classData.sks_prak_lapangan + classData.sks_simulasi;\r\n        const durationMinutes = totalSKS * 60;\r\n        \r\n        const [startHours, startMinutes] = startTime.split(':').map(Number);\r\n        const totalMinutes = startHours * 60 + startMinutes + durationMinutes;\r\n        const endHours = Math.floor(totalMinutes / 60) % 24;\r\n        const endMinutes = totalMinutes % 60;\r\n        const endTime = `${String(endHours).padStart(2, '0')}:${String(endMinutes).padStart(2, '0')}`;\r\n\r\n        items.push({\r\n          id: `${classData.kelas_id}-${meeting.id}`,\r\n          day,\r\n          startTime,\r\n          endTime,\r\n          courseCode: classData.kode_mk,\r\n          courseName: classData.nama_mk,\r\n          className: classData.nama_kelas,\r\n          credits: totalSKS,\r\n          room: extractString(meeting.media_pembelajaran, 'TBA'),\r\n          topic: extractString(meeting.topik, ''),\r\n          weekNumber: meeting.pertemuan_ke,\r\n          classId: classData.kelas_id,\r\n          actualDate,\r\n          meetingId: meeting.id,\r\n        });\r\n      });\r\n    });\r\n\r\n    // Backend already filtered by this week's date range, just add weekDay labels\r\n    const weekItems: (ScheduleItem & { weekDay: WeekDay })[] = items\r\n      .filter(item => item.actualDate) // Ensure valid date\r\n      .map(item => {\r\n        const weekDayIndex = item.actualDate!.getDay();\r\n        const weekDaysMap: Record<number, WeekDay> = {\r\n          0: 'Sunday',\r\n          1: 'Monday',\r\n          2: 'Tuesday',\r\n          3: 'Wednesday',\r\n          4: 'Thursday',\r\n          5: 'Friday',\r\n          6: 'Saturday',\r\n        };\r\n        return {\r\n          ...item,\r\n          weekDay: weekDaysMap[weekDayIndex] || 'Monday',\r\n        };\r\n      })\r\n      .sort((a, b) => {\r\n        if (!a.actualDate || !b.actualDate) return 0;\r\n        return a.actualDate.getTime() - b.actualDate.getTime();\r\n      });\r\n    \r\n    setThisWeekItems(weekItems);\r\n  }, [classes]);\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div>\r\n        <h1 className=\"text-2xl font-bold text-gray-900\">Student Dashboard</h1>\r\n      </div>\r\n\r\n      {/* Quick Stats */}\r\n      {/* <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n        <div className=\"card\">\r\n          <div className=\"flex items-center\">\r\n            <div className=\"p-2 bg-primary-100 rounded-lg\">\r\n              <BookOpen className=\"h-6 w-6 text-primary-600\" />\r\n            </div>\r\n            <div className=\"ml-4\">\r\n              <div className=\"text-sm font-medium text-gray-500\">Total Credits</div>\r\n              <div className=\"text-2xl font-bold text-gray-900\">xxx</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"card\">\r\n          <div className=\"flex items-center\">\r\n            <div className=\"p-2 bg-green-100 rounded-lg\">\r\n              <TrendingUp className=\"h-6 w-6 text-green-600\" />\r\n            </div>\r\n            <div className=\"ml-4\">\r\n              <div className=\"text-sm font-medium text-gray-500\">Current GPA</div>\r\n              <div className=\"text-2xl font-bold text-gray-900\">xxx</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"card\">\r\n          <div className=\"flex items-center\">\r\n            <div className=\"p-2 bg-blue-100 rounded-lg\">\r\n              <GraduationCap className=\"h-6 w-6 text-blue-600\" />\r\n            </div>\r\n            <div className=\"ml-4\">\r\n              <div className=\"text-sm font-medium text-gray-500\">Semester</div>\r\n              <div className=\"text-2xl font-bold text-gray-900\">xxx</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"card\">\r\n          <div className=\"flex items-center\">\r\n            <div className=\"p-2 bg-yellow-100 rounded-lg\">\r\n              <Calendar className=\"h-6 w-6 text-yellow-600\" />\r\n            </div>\r\n            <div className=\"ml-4\">\r\n              <div className=\"text-sm font-medium text-gray-500\">Classes Today</div>\r\n              <div className=\"text-2xl font-bold text-gray-900\">xxx</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div> */}\r\n\r\n      {/* This Week's Schedule */}\r\n      {thisWeekItems.length > 0 && (\r\n        <div className=\"card\">\r\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">This Week's Schedule</h2>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n            {thisWeekItems.map(item => {\r\n              const checkedIn = isCheckedIn(item.meetingId);\r\n              const checkInStatus = canCheckIn(item);\r\n              const attendanceInfo = getAttendanceInfo(item.meetingId);\r\n              const colors = attendanceInfo ? getAttendanceColors(attendanceInfo.status_kehadiran) : null;\r\n              \r\n              return (\r\n                <div \r\n                  key={item.id} \r\n                  onClick={() => checkInStatus.allowed && openCheckInModal(item.meetingId, item.courseName)}\r\n                  className={`p-3 border rounded-lg transition-colors flex flex-col ${\r\n                    checkedIn && colors\r\n                      ? `${colors.border} ${colors.bg} cursor-default` \r\n                      : checkInStatus.allowed\r\n                      ? 'border-gray-200 hover:bg-blue-50 hover:border-blue-300 cursor-pointer'\r\n                      : 'border-gray-300 bg-gray-100 cursor-not-allowed'\r\n                  }`}\r\n                  title={!checkInStatus.allowed ? checkInStatus.reason : undefined}\r\n                >\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-start justify-between gap-2 mb-2\">\r\n                      <div className=\"flex items-center gap-2 flex-wrap\">\r\n                        <span className=\"inline-block px-2.5 py-0.5 bg-primary-100 text-primary-700 text-xs font-semibold rounded\">\r\n                          {item.weekDay}\r\n                        </span>\r\n                        {item.actualDate && (\r\n                          <span className=\"text-xs text-gray-500 px-2 py-0.5 bg-gray-100 rounded\">\r\n                            {item.actualDate.toLocaleDateString('id-ID', { day: 'numeric', month: 'short' })}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                      <div className=\"flex flex-col items-end gap-0.5\">\r\n                        {checkedIn && attendanceInfo && colors && (\r\n                          <div className={`flex items-center gap-1 text-xs ${colors.text} font-medium`}>\r\n                            <CheckCircle className={`h-3 w-3 ${colors.icon}`} />\r\n                            <span>Checked In</span>\r\n                          </div>\r\n                        )}\r\n                        <span className=\"text-xs text-gray-500\">Week {item.weekNumber}</span>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-xs font-semibold text-primary-600 mb-1\">{item.courseCode}</div>\r\n                    <h3 className=\"text-xs font-medium text-gray-900 line-clamp-2 mb-1\">{item.courseName}</h3>\r\n                    {item.topic && (\r\n                      <div className=\"text-xs text-gray-600 mb-2 italic line-clamp-2\">\r\n                        {item.topic}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex flex-col gap-1 text-xs text-gray-600 border-t border-gray-100 pt-2 mt-2\">\r\n                    <div className=\"flex items-center gap-1.5\">\r\n                      <Clock className=\"h-3 w-3 flex-shrink-0\" />\r\n                      <span>{item.startTime} - {item.endTime}</span>\r\n                    </div>\r\n                  </div>\r\n                  {checkedIn && attendanceInfo && colors && (\r\n                    <div className={`mt-2 pt-2 border-t ${colors.border}`}>\r\n                      <div className=\"text-xs text-gray-600 space-y-0.5\">\r\n                        {(() => {\r\n                          const checkInTime = formatDateTime(attendanceInfo.waktu_masuk);\r\n                          const checkOutTime = attendanceInfo.waktu_keluar ? formatDateTime(attendanceInfo.waktu_keluar) : null;\r\n                          \r\n                          return (\r\n                            <>\r\n                              {checkInTime && (\r\n                                <div className=\"flex items-center justify-between\">\r\n                                  <span>Check-in:</span>\r\n                                  <span className=\"font-medium\">\r\n                                    {checkInTime.date} {checkInTime.time}\r\n                                  </span>\r\n                                </div>\r\n                              )}\r\n                              {checkOutTime && (\r\n                                <div className=\"flex items-center justify-between\">\r\n                                  <span>Check-out:</span>\r\n                                  <span className=\"font-medium\">\r\n                                    {checkOutTime.time}\r\n                                  </span>\r\n                                </div>\r\n                              )}\r\n                              <div className=\"flex items-center justify-between\">\r\n                                <span>Status:</span>\r\n                                <span className={`font-medium ${colors.text}`}>{attendanceInfo.status_kehadiran}</span>\r\n                              </div>\r\n                            </>\r\n                          );\r\n                        })()}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  {!checkedIn && !checkInStatus.allowed && (\r\n                    <div className=\"mt-2 text-xs text-gray-600 text-center italic\">\r\n                      {checkInStatus.reason}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <CheckInModal\r\n        isOpen={showCheckInModal}\r\n        meetingId={checkInMeetingId}\r\n        courseName={checkInCourseName}\r\n        onClose={closeCheckInModal}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StudentDashboard;\r\n"],"names":["getDayFromDate","dateValue","date","extractDate","dayIndex","getTimeFromDate","dateStr","extractString","timePart","getCurrentWeekRange","today","dayOfWeek","daysToSunday","start","end","StudentDashboard","user","useAuth","thisWeekItems","setThisWeekItems","useState","showCheckInModal","setShowCheckInModal","checkInMeetingId","setCheckInMeetingId","checkInCourseName","setCheckInCourseName","React","startDay","endDate","classes","useStudentClasses","attendances","useStudentAttendances","openCheckInModal","meetingId","courseName","closeCheckInModal","isCheckedIn","att","getAttendanceInfo","canCheckIn","item","hours","minutes","meetingDateTime","now","fiveMinutesBeforeMeeting","getAttendanceColors","status","normalizedStatus","formatDateTime","dateString","useEffect","items","classData","meeting","day","startTime","actualDate","totalSKS","durationMinutes","startHours","startMinutes","totalMinutes","endHours","endMinutes","endTime","weekItems","weekDayIndex","a","b","jsxs","jsx","checkedIn","checkInStatus","attendanceInfo","colors","CheckCircle","Clock","checkInTime","checkOutTime","Fragment","CheckInModal"],"mappings":"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"}