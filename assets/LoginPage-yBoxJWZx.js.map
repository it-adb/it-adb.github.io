{"version":3,"mappings":"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","names":["LoginPage","isAuthenticated","login","useAuth","isLoading","setIsLoading","useState","isGoogleLoading","setIsGoogleLoading","gisReady","setGisReady","error","setError","username","setUsername","password","setPassword","googleBtnRef","useRef","mountedRef","clientId","Environment","showDemoLogin","useEffect","handleGoogleCredential","useCallback","credential","backendError","e","initDelay","loadGoogleScript","resetGoogleInit","initGoogleSignIn","renderGoogleButton","err","renderDelay","handleUsernamePasswordLogin","response","apiService","userWithRoles","authResponse","extractString","__vitePreload","n","getPrimaryRole","availableRoles","r","primaryRole","userName","studentId","employeeId","applicationId","roleEntity","user","Navigate","jsxs","jsx","Fragment","LogIn"],"ignoreList":[],"sources":["../../src/pages/LoginPage.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { LogIn } from 'lucide-react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport type { User, UserRole } from '../types';\r\nimport { initGoogleSignIn, loadGoogleScript, renderGoogleButton, resetGoogleInit } from '../utils/googleAuth';\r\nimport { Environment, logEnvironmentInfo } from '../utils/environment';\r\nimport { apiService } from '../services/api';\r\n\r\nconst LoginPage: React.FC = () => {\r\n  const { isAuthenticated, login } = useAuth();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isGoogleLoading, setIsGoogleLoading] = useState(false);\r\n  const [gisReady, setGisReady] = useState(false);\r\n  const [error, setError] = useState<string>('');\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const googleBtnRef = useRef<HTMLDivElement | null>(null);\r\n  const mountedRef = useRef(true);\r\n  \r\n  // Use environment-based configuration\r\n  const clientId = Environment.googleClientId;\r\n  const showDemoLogin = Environment.isDevelopment;\r\n\r\n  // Log environment info on mount (only in debug mode)\r\n  useEffect(() => {\r\n    logEnvironmentInfo();\r\n  }, []);\r\n\r\n  const handleGoogleCredential = useCallback(\r\n    async (credential: string) => {\r\n      try {\r\n        // Log the token for backend testing\r\n        console.log('Google JWT Token:', credential);\r\n        console.log('Token for backend testing - copy this value:', credential);\r\n\r\n        setIsGoogleLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n          // Try backend authentication\r\n          await login(credential);\r\n          console.log('✅ Backend authentication successful');\r\n        } catch (backendError) {\r\n          console.error('❌ Backend authentication failed:', backendError);\r\n          setError('User not found. Please contact your administrator for access.');\r\n          throw backendError;\r\n        }\r\n      } catch (e) {\r\n        console.error('Failed to login:', e);\r\n      } finally {\r\n        setIsGoogleLoading(false);\r\n      }\r\n    },\r\n    [login]\r\n  );\r\n\r\n  // Initialize Google Identity Services and render button\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    if (!clientId) {\r\n      console.warn('VITE_GOOGLE_CLIENT_ID is not set. Google login will be disabled.');\r\n      setGisReady(false);\r\n      return () => {\r\n        mountedRef.current = false;\r\n      };\r\n    }\r\n\r\n    setIsGoogleLoading(true);\r\n    setGisReady(false);\r\n\r\n    // Add a small delay to ensure DOM is stable after redirects\r\n    const initDelay = setTimeout(() => {\r\n      if (!mountedRef.current) return;\r\n\r\n      loadGoogleScript()\r\n        .then(() => {\r\n          if (!mountedRef.current) return;\r\n\r\n          // Reset any previous initialization\r\n          resetGoogleInit();\r\n\r\n          setGisReady(true);\r\n          initGoogleSignIn(clientId, handleGoogleCredential);\r\n\r\n          // Ensure button container exists before rendering\r\n          if (googleBtnRef.current) {\r\n            renderGoogleButton(googleBtnRef.current);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          if (mountedRef.current) {\r\n            console.error('Google script loading failed:', err);\r\n            setGisReady(false);\r\n          }\r\n        })\r\n        .finally(() => {\r\n          if (mountedRef.current) {\r\n            setIsGoogleLoading(false);\r\n          }\r\n        });\r\n    }, 100);\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      clearTimeout(initDelay);\r\n    };\r\n  }, [clientId, handleGoogleCredential]);\r\n\r\n  // Re-render button when container ref changes\r\n  useEffect(() => {\r\n    if (gisReady && googleBtnRef.current && !isGoogleLoading && !isLoading) {\r\n      // Small delay to ensure DOM is ready\r\n      const renderDelay = setTimeout(() => {\r\n        if (mountedRef.current && googleBtnRef.current) {\r\n          renderGoogleButton(googleBtnRef.current);\r\n        }\r\n      }, 50);\r\n\r\n      return () => clearTimeout(renderDelay);\r\n    }\r\n  }, [gisReady, isGoogleLoading, isLoading]);\r\n\r\n  const handleUsernamePasswordLogin = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError('');\r\n\r\n    if (!username || !password) {\r\n      setError('Please enter both username and password');\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      // Use apiService which respects VITE_API_BASE_URL\r\n      const response = await apiService.login(username, password);\r\n\r\n      // The apiService.login already sets the tokens, now fetch current user\r\n      const userWithRoles = await apiService.getCurrentUser();\r\n\r\n      // Convert backend user to frontend User format using the same logic as Google login\r\n      const authResponse = {\r\n        access_token: response.access_token,\r\n        refresh_token: response.refresh_token,\r\n        roles: userWithRoles.roles,\r\n        user: userWithRoles.user,\r\n      };\r\n\r\n      // Import helper functions\r\n      const { extractString } = await import('../utils/sqlNull');\r\n      const { getPrimaryRole } = await import('../constants');\r\n\r\n      // Extract all available roles\r\n      const availableRoles = authResponse.roles.map(r => r.role as UserRole);\r\n      const primaryRole = getPrimaryRole(availableRoles);\r\n      const userName = extractString(authResponse.user.name, authResponse.user.email.split('@')[0]);\r\n\r\n      // Extract entity IDs from roles array\r\n      let studentId: string | undefined;\r\n      let employeeId: string | undefined;\r\n      let applicationId: string | undefined;\r\n\r\n      for (const roleEntity of authResponse.roles) {\r\n        if (roleEntity.entity_type === 'mahasiswa' && roleEntity.entity_id) {\r\n          studentId = roleEntity.entity_id;\r\n        } else if (roleEntity.entity_type === 'dosen' && roleEntity.entity_id) {\r\n          employeeId = roleEntity.entity_id;\r\n        } else if (roleEntity.entity_type === 'applicant' && roleEntity.entity_id) {\r\n          applicationId = roleEntity.entity_id;\r\n        }\r\n      }\r\n\r\n      const user: User = {\r\n        id: String(authResponse.user.id),\r\n        email: authResponse.user.email,\r\n        name: userName,\r\n        role: primaryRole,\r\n        availableRoles,\r\n        studentId,\r\n        employeeId,\r\n        applicationId,\r\n        roleEntities: authResponse.roles,\r\n      };\r\n\r\n      await login(user);\r\n    } catch (err) {\r\n      console.error('Login failed:', err);\r\n      setError(err instanceof Error ? err.message : 'Login failed. Please check your credentials.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDemoLogin = async (role: UserRole) => {\r\n    const demoUsers: Record<UserRole, User> = {\r\n      guest: {\r\n        id: 'guest-demo',\r\n        email: 'guest@university.edu',\r\n        name: 'Guest User',\r\n        role: 'guest',\r\n      },\r\n      staff: {\r\n        id: 'staff-1',\r\n        email: 'staff@university.edu',\r\n        name: 'Maria Staff',\r\n        role: 'staff',\r\n        employeeId: 'STF001',\r\n      },\r\n      student_applicant: {\r\n        id: 'applicant-1',\r\n        email: 'applicant@university.edu',\r\n        name: 'John Applicant',\r\n        role: 'student_applicant',\r\n        applicationId: 'APP2024001',\r\n      },\r\n      student: {\r\n        id: 'student-1',\r\n        email: 'student@university.edu',\r\n        name: 'Ahmad Mahasiswa',\r\n        role: 'student',\r\n        studentId: '2021001',\r\n      },\r\n      lecturer: {\r\n        id: 'lecturer-1',\r\n        email: 'lecturer@university.edu',\r\n        name: 'Dr. Sarah Dosen',\r\n        role: 'lecturer',\r\n        employeeId: 'LEC001',\r\n      },\r\n      alumni: {\r\n        id: 'alumni-1',\r\n        email: 'alumni@university.edu',\r\n        name: 'David Alumni',\r\n        role: 'alumni',\r\n        studentId: '2018001',\r\n        graduationYear: 2022,\r\n      },\r\n      admin: {\r\n        id: 'admin-1',\r\n        email: 'admin@university.edu',\r\n        name: 'Admin System',\r\n        role: 'admin',\r\n        employeeId: 'ADM001',\r\n      },\r\n    };\r\n\r\n    await login(demoUsers[role]);\r\n  };\r\n\r\n  // Don't render redirect until we're sure we're not authenticated\r\n  if (isAuthenticated) {\r\n    return <Navigate to=\"/dashboard\" replace />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-100 flex items-center justify-center p-4\">\r\n      <div className=\"max-w-md w-full\">\r\n        {/* Logo and Title */}\r\n        <div className=\"text-center mb-8\">\r\n          <div className=\"inline-flex items-center justify-center w-16 h-16 mb-4\">\r\n            <img \r\n              src={import.meta.env.BASE_URL + 'logo.png'} \r\n              alt=\"ADB Academic System Logo\" \r\n              className=\"w-16 h-16 object-contain\"\r\n            />\r\n          </div>\r\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\r\n            ADB Academic System\r\n          </h1>\r\n          <p className=\"text-gray-600\">\r\n            Sign in to access your academic portal\r\n          </p>\r\n        </div>\r\n\r\n        {/* Login Card */}\r\n        <div className=\"bg-white rounded-xl shadow-lg p-8\">\r\n          <div className=\"space-y-6\">\r\n            {/* Error Message */}\r\n            {error && (\r\n              <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm\">\r\n                <p className=\"font-medium\">Authentication Failed</p>\r\n                <p className=\"mt-1\">{error}</p>\r\n              </div>\r\n            )}\r\n\r\n            {/* Username/Password Login Form */}\r\n            <form onSubmit={handleUsernamePasswordLogin} className=\"space-y-4\">\r\n              <div>\r\n                <p className=\"text-xs text-gray-600 mb-3 p-2 bg-blue-50 rounded border border-blue-200\">\r\n                  <strong>Kesulitan login dengan Google?</strong> Gunakan email sebagai username dan nama email diikuti \"ADB\" sebagai password.\r\n                  <br/><br/>Contoh: untuk email <code className=\"text-blue-700\">john.doe@digitalbdg.ac.id</code>, gunakan username: <code className=\"text-blue-700\">john.doe@digitalbdg.ac.id</code> dan password: <code className=\"text-blue-700\">john.doeADB</code>\r\n                  <br/><br/>Setelah berhasil login, anda dapat mengubah password Anda di dengan membuka profil anda di kanan atas kemudian memilih menu settings.\r\n                </p>\r\n                <label htmlFor=\"username\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Username\r\n                </label>\r\n                <input\r\n                  id=\"username\"\r\n                  type=\"text\"\r\n                  value={username}\r\n                  onChange={(e) => setUsername(e.target.value)}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n                  placeholder=\"Enter your username\"\r\n                  disabled={isLoading || isGoogleLoading}\r\n                />\r\n              </div>\r\n              <div>\r\n                <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Password\r\n                </label>\r\n                <input\r\n                  id=\"password\"\r\n                  type=\"password\"\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n                  placeholder=\"Enter your password\"\r\n                  disabled={isLoading || isGoogleLoading}\r\n                />\r\n              </div>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={isLoading || isGoogleLoading}\r\n                className=\"w-full btn-primary flex items-center justify-center\"\r\n              >\r\n                {isLoading ? (\r\n                  <>\r\n                    <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2\"></div>\r\n                    Signing in...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <LogIn className=\"h-5 w-5 mr-2\" />\r\n                    Sign In\r\n                  </>\r\n                )}\r\n              </button>\r\n            </form>\r\n\r\n            {/* Divider */}\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-0 flex items-center\">\r\n                <div className=\"w-full border-t border-gray-300\" />\r\n              </div>\r\n              <div className=\"relative flex justify-center text-sm\">\r\n                <span className=\"px-2 bg-white text-gray-500\">Or continue with</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Google OAuth Button */}\r\n            <div className=\"w-full flex flex-col items-center\">\r\n              {(isGoogleLoading || isLoading) && (\r\n                <div className=\"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg bg-white text-sm text-gray-700\">\r\n                  <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-primary-600 mr-3\"></div>\r\n                  {isGoogleLoading ? 'Preparing Google sign-in…' : 'Authentication in progress...'}\r\n                </div>\r\n              )}\r\n              {!isGoogleLoading && !isLoading && gisReady && clientId && (\r\n                <div ref={googleBtnRef} className=\"w-full flex justify-center\" />\r\n              )}\r\n              {!isGoogleLoading && !isLoading && (!gisReady || !clientId) && (\r\n                <button\r\n                  disabled\r\n                  className=\"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-700 opacity-60\"\r\n                >\r\n                  <LogIn className=\"h-5 w-5 mr-3\" />\r\n                  Google sign-in unavailable\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            {/* Demo Login Section - Only in demo mode */}\r\n            {showDemoLogin && (\r\n              <>\r\n                <div className=\"relative\">\r\n                  <div className=\"absolute inset-0 flex items-center\">\r\n                    <div className=\"w-full border-t border-gray-300\" />\r\n                  </div>\r\n                  <div className=\"relative flex justify-center text-sm\">\r\n                    <span className=\"px-2 bg-white text-gray-500\">Demo Login</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-3\">\r\n                  <button\r\n                    onClick={() => handleDemoLogin('student')}\r\n                    disabled={isLoading || isGoogleLoading}\r\n                    className=\"w-full btn-primary cursor-pointer\"\r\n                  >\r\n                    Login as Student\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDemoLogin('lecturer')}\r\n                    disabled={isLoading || isGoogleLoading}\r\n                    className=\"w-full btn-secondary cursor-pointer\"\r\n                  >\r\n                    Login as Lecturer\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDemoLogin('admin')}\r\n                    disabled={isLoading || isGoogleLoading}\r\n                    className=\"w-full btn-secondary cursor-pointer\"\r\n                  >\r\n                    Login as Admin\r\n                  </button>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"mt-6 text-center\">\r\n            <p className=\"text-xs text-gray-500\">\r\n              By signing in, you agree to our Terms of Service and Privacy Policy\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"text-center mt-8 text-sm text-gray-500\">\r\n          © 2024 ADB Academic System. All rights reserved.\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;"],"file":"assets/LoginPage-yBoxJWZx.js"}