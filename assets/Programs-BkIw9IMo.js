import{j as e}from"./query-vendor-B--u1oZD.js";import{r as t,g as O}from"./react-vendor-XXJdR_Id.js";import{c as f}from"./index-C1kkCffi.js";import{u as te,a as re,b as le,c as ne}from"./usePrograms-lhPWl3ZI.js";import{P as U,r as ie,s as u,z as q,W as N,G as b,a2 as z,J as R,X as E}from"./ui-vendor-DIF6S0il.js";const ge=()=>{const[j,M]=t.useState([]),{data:h,isLoading:B,error:g}=te(),[A,F]=t.useState(null),[y,G]=t.useState(""),[v,J]=t.useState("all"),[W,w]=t.useState(!1),[X,k]=t.useState(!1),[H,P]=t.useState(!1),[d,p]=t.useState(null),[a,r]=t.useState({kode_prodi:"",nama_prodi:"",jenjang:""}),[c,l]=t.useState(null),[n,o]=t.useState(!1),[T,x]=t.useState(null);O.useEffect(()=>{Array.isArray(h)?M(h):h&&(console.warn("Unexpected /programs response format:",h),M([]))},[h]),O.useEffect(()=>{F(g?g instanceof Error?g.message:String(g):null)},[g]);const{mutateAsync:K,isPending:S}=re(),Q=async s=>{s.preventDefault(),l(null),o(!0);try{await K(a),x("Program created successfully"),w(!1),r({kode_prodi:"",nama_prodi:"",jenjang:""}),setTimeout(()=>x(null),3e3)}catch(i){l(i instanceof Error?i.message:"Failed to create program")}finally{o(!1)}},{mutateAsync:V,isPending:C}=le(),Y=async s=>{if(s.preventDefault(),!!d){l(null),o(!0);try{const i={nama_prodi:a.nama_prodi,jenjang:a.jenjang};await V({kode_prodi:d.kode_prodi,data:i}),x("Program updated successfully"),k(!1),p(null),r({kode_prodi:"",nama_prodi:"",jenjang:""}),setTimeout(()=>x(null),3e3)}catch(i){l(i instanceof Error?i.message:"Failed to update program")}finally{o(!1)}}},{mutateAsync:Z,isPending:D}=ne(),$=async()=>{if(d){l(null),o(!0);try{await Z({kode_prodi:d.kode_prodi}),x("Program deleted successfully"),P(!1),p(null),setTimeout(()=>x(null),3e3)}catch(s){l(s instanceof Error?s.message:"Failed to delete program")}finally{o(!1)}}},ee=s=>{p(s),r({kode_prodi:s.kode_prodi,nama_prodi:s.nama_prodi,jenjang:f(s.jenjang,"")}),l(null),k(!0)},se=s=>{p(s),l(null),P(!0)},m=()=>{w(!1),k(!1),P(!1),p(null),r({kode_prodi:"",nama_prodi:"",jenjang:""}),l(null)},L=t.useMemo(()=>Array.isArray(j)?j:[],[j]),_=L.filter(s=>{const i=s.kode_prodi.toLowerCase().includes(y.toLowerCase())||s.nama_prodi.toLowerCase().includes(y.toLowerCase()),ae=f(s.jenjang,"");return i&&(v==="all"||ae===v)}),I=Array.from(new Set(L.map(s=>f(s.jenjang,"")).filter(Boolean)));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Programs Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage study programs and their information"})]}),e.jsxs("button",{onClick:()=>{r({kode_prodi:"",nama_prodi:"",jenjang:""}),l(null),w(!0)},className:"btn-primary flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5"}),"Add Program"]})]}),T&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(ie,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),e.jsx("p",{className:"text-green-800",children:T})]}),A&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(u,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),e.jsx("p",{className:"text-red-800",children:A})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by code or name...",value:y,onChange:s=>G(s.target.value),className:"input-field pl-10"})]})}),e.jsx("div",{className:"md:w-64",children:e.jsxs("select",{value:v,onChange:s=>J(s.target.value),className:"input-field",children:[e.jsx("option",{value:"all",children:"All Degrees"}),I.map(s=>e.jsx("option",{value:s,children:s},s))]})})]})}),e.jsx("div",{className:"card overflow-hidden",children:B?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(N,{className:"w-8 h-8 animate-spin text-blue-600"})}):_.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(b,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No programs found"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Try adjusting your search or filters"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Program Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Degree"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(b,{className:"w-5 h-5 text-blue-600"})}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.kode_prodi})})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900",children:s.nama_prodi})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:f(s.jenjang,"N/A")})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>ee(s),className:"text-blue-600 hover:text-blue-900 mr-4",title:"Edit",children:e.jsx(z,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>se(s),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(R,{className:"w-5 h-5"})})]})]},s.kode_prodi))})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Create New Program"}),e.jsx("button",{onClick:m,className:"text-gray-400 hover:text-gray-600",children:e.jsx(E,{className:"w-6 h-6"})})]}),c&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-3 flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-800",children:c})]}),e.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Program Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.kode_prodi,onChange:s=>r({...a,kode_prodi:s.target.value}),className:"input-field",required:!0,placeholder:"e.g., IF, SI, MT"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Program Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.nama_prodi,onChange:s=>r({...a,nama_prodi:s.target.value}),className:"input-field",required:!0,placeholder:"e.g., Teknik Informatika"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Degree Level"}),e.jsxs("select",{value:a.jenjang||"",onChange:s=>r({...a,jenjang:s.target.value}),className:"input-field",children:[e.jsx("option",{value:"",children:"Select Degree"}),e.jsx("option",{value:"D3",children:"D3"}),e.jsx("option",{value:"D4",children:"D4"}),e.jsx("option",{value:"S1",children:"S1"}),e.jsx("option",{value:"S2",children:"S2"}),e.jsx("option",{value:"S3",children:"S3"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:m,className:"btn-secondary flex-1",disabled:n||S,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary flex-1 flex items-center justify-center gap-2",disabled:n||S,children:n||S?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-4 h-4"}),"Create Program"]})})]})]})]})}),X&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Program"}),e.jsx("button",{onClick:m,className:"text-gray-400 hover:text-gray-600",children:e.jsx(E,{className:"w-6 h-6"})})]}),c&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-3 flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-800",children:c})]}),e.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Program Code"}),e.jsx("input",{type:"text",value:a.kode_prodi,className:"input-field bg-gray-100",disabled:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Program code cannot be changed"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Program Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.nama_prodi,onChange:s=>r({...a,nama_prodi:s.target.value}),className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Degree Level"}),e.jsxs("select",{value:a.jenjang||"",onChange:s=>r({...a,jenjang:s.target.value}),className:"input-field",children:[e.jsx("option",{value:"",children:"Select Degree"}),e.jsx("option",{value:"D3",children:"D3"}),e.jsx("option",{value:"D4",children:"D4"}),e.jsx("option",{value:"S1",children:"S1"}),e.jsx("option",{value:"S2",children:"S2"}),e.jsx("option",{value:"S3",children:"S3"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:m,className:"btn-secondary flex-1",disabled:n||C,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary flex-1 flex items-center justify-center gap-2",disabled:n||C,children:n||C?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-4 h-4 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-4 h-4"}),"Update Program"]})})]})]})]})}),H&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Delete Program"}),e.jsx("button",{onClick:m,className:"text-gray-400 hover:text-gray-600",children:e.jsx(E,{className:"w-6 h-6"})})]}),c&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-3 flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-800",children:c})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsx(u,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-900",children:"Are you sure you want to delete this program?"}),e.jsxs("p",{className:"text-sm text-red-700 mt-1",children:[e.jsx("strong",{children:d.kode_prodi})," - ",d.nama_prodi]}),e.jsx("p",{className:"text-xs text-red-600 mt-2",children:"This action cannot be undone."})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:m,className:"btn-secondary flex-1",disabled:n||D,children:"Cancel"}),e.jsx("button",{onClick:$,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:n||D,children:n||D?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-4 h-4"}),"Delete Program"]})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(b,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Programs"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j.length})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(q,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Filtered Results"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.length})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:e.jsx(b,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Degree Types"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:I.length})]})]})})]})]})};export{ge as default};
//# sourceMappingURL=Programs-BkIw9IMo.js.map
