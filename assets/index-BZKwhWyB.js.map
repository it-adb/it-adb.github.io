{"version":3,"file":"index-BZKwhWyB.js","sources":["../../src/components/ui/PageHeader.tsx","../../src/pages/admin/UserManagement/UserStatsCards.tsx","../../src/pages/admin/UserManagement/types.ts","../../src/pages/admin/UserManagement/UserTable.tsx","../../src/pages/admin/UserManagement/UserFormModal.tsx","../../src/hooks/useUsers.ts","../../src/pages/admin/UserManagement/useUserManagement.ts","../../src/pages/admin/UserManagement/index.tsx"],"sourcesContent":["import React from 'react';\r\nimport { ArrowLeft } from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\ninterface PageHeaderProps {\r\n  /** Page title */\r\n  title: string;\r\n  /** Optional subtitle/description */\r\n  subtitle?: string;\r\n  /** Optional back button (shows arrow icon) */\r\n  showBack?: boolean;\r\n  /** Custom back URL (defaults to -1 history) */\r\n  backUrl?: string;\r\n  /** Actions to render on the right side */\r\n  actions?: React.ReactNode;\r\n  /** Optional breadcrumbs */\r\n  breadcrumbs?: Array<{ label: string; href?: string }>;\r\n  /** Optional icon to display next to title */\r\n  icon?: React.ReactNode;\r\n}\r\n\r\n/**\r\n * Reusable page header component with title, subtitle, and optional actions\r\n */\r\nexport const PageHeader: React.FC<PageHeaderProps> = ({\r\n  title,\r\n  subtitle,\r\n  showBack = false,\r\n  backUrl,\r\n  actions,\r\n  breadcrumbs,\r\n  icon,\r\n}) => {\r\n  const navigate = useNavigate();\r\n\r\n  const handleBack = () => {\r\n    if (backUrl) {\r\n      navigate(backUrl);\r\n    } else {\r\n      navigate(-1);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"mb-6\">\r\n      {/* Breadcrumbs */}\r\n      {breadcrumbs && breadcrumbs.length > 0 && (\r\n        <nav className=\"flex mb-2\" aria-label=\"Breadcrumb\">\r\n          <ol className=\"flex items-center space-x-2 text-sm text-gray-500\">\r\n            {breadcrumbs.map((crumb, index) => (\r\n              <li key={index} className=\"flex items-center\">\r\n                {index > 0 && <span className=\"mx-2\">/</span>}\r\n                {crumb.href ? (\r\n                  <a \r\n                    href={crumb.href} \r\n                    className=\"hover:text-primary-600 transition-colors\"\r\n                  >\r\n                    {crumb.label}\r\n                  </a>\r\n                ) : (\r\n                  <span className=\"text-gray-700\">{crumb.label}</span>\r\n                )}\r\n              </li>\r\n            ))}\r\n          </ol>\r\n        </nav>\r\n      )}\r\n\r\n      {/* Header row */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-4\">\r\n          {showBack && (\r\n            <button\r\n              onClick={handleBack}\r\n              className=\"p-2 rounded-lg hover:bg-gray-100 transition-colors\"\r\n              aria-label=\"Go back\"\r\n            >\r\n              <ArrowLeft className=\"h-5 w-5 text-gray-600\" />\r\n            </button>\r\n          )}\r\n          \r\n          {icon && (\r\n            <div className=\"p-2 bg-primary-50 rounded-lg text-primary-600\">\r\n              {icon}\r\n            </div>\r\n          )}\r\n          \r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-gray-900\">{title}</h1>\r\n            {subtitle && (\r\n              <p className=\"mt-1 text-sm text-gray-500\">{subtitle}</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {actions && (\r\n          <div className=\"flex items-center gap-3\">\r\n            {actions}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageHeader;\r\n","/**\r\n * User Statistics Cards Component\r\n */\r\n\r\nimport React from 'react';\r\nimport { Users, Shield } from 'lucide-react';\r\nimport type { UserStats } from './types';\r\n\r\ninterface UserStatsCardsProps {\r\n  stats: UserStats;\r\n}\r\n\r\nexport const UserStatsCards: React.FC<UserStatsCardsProps> = ({ stats }) => {\r\n  const statItems = [\r\n    {\r\n      icon: Users,\r\n      label: 'Total Pengguna',\r\n      value: stats.total,\r\n      color: 'text-blue-600',\r\n      bgColor: 'bg-blue-50',\r\n    },\r\n    {\r\n      icon: Users,\r\n      label: 'Mahasiswa',\r\n      value: stats.students,\r\n      color: 'text-green-600',\r\n      bgColor: 'bg-green-50',\r\n    },\r\n    {\r\n      icon: Users,\r\n      label: 'Dosen',\r\n      value: stats.lecturers,\r\n      color: 'text-purple-600',\r\n      bgColor: 'bg-purple-50',\r\n    },\r\n    {\r\n      icon: Shield,\r\n      label: 'Admin',\r\n      value: stats.admins,\r\n      color: 'text-red-600',\r\n      bgColor: 'bg-red-50',\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\r\n      {statItems.map((item) => (\r\n        <div\r\n          key={item.label}\r\n          className=\"bg-white rounded-lg border border-gray-200 p-4\"\r\n        >\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm text-gray-500\">{item.label}</p>\r\n              <p className=\"text-2xl font-semibold text-gray-900\">{item.value}</p>\r\n            </div>\r\n            <div className={`p-3 rounded-lg ${item.bgColor}`}>\r\n              <item.icon className={`w-6 h-6 ${item.color}`} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserStatsCards;\r\n","/**\r\n * User Management Types\r\n * Shared types and utilities for the UserManagement module\r\n */\r\n\r\nimport type { BackendUser, Mahasiswa, Dosen, RoleAssignmentRequest, CreateUserRequest } from '@/types';\r\nimport { extractString } from '@/utils';\r\n\r\n/**\r\n * Extended user type with student/lecturer details\r\n */\r\nexport interface UserWithDetails extends BackendUser {\r\n  studentInfo?: Mahasiswa;\r\n  lecturerInfo?: Dosen;\r\n  lastLogin?: string;\r\n}\r\n\r\n/**\r\n * Form data for creating/editing users\r\n */\r\nexport interface UserFormData {\r\n  email: string;\r\n  name: string;\r\n  password: string;\r\n  roles: RoleAssignmentRequest[];\r\n}\r\n\r\n/**\r\n * Initial form data state\r\n */\r\nexport const initialFormData: UserFormData = {\r\n  email: '',\r\n  name: '',\r\n  password: '',\r\n  roles: [],\r\n};\r\n\r\n/**\r\n * User statistics interface\r\n */\r\nexport interface UserStats {\r\n  total: number;\r\n  students: number;\r\n  lecturers: number;\r\n  admins: number;\r\n  staff: number;\r\n}\r\n\r\n/**\r\n * Role color mapping\r\n */\r\nexport const getRoleColor = (role: string): string => {\r\n  switch (role) {\r\n    case 'admin':\r\n      return 'bg-red-100 text-red-800';\r\n    case 'lecturer':\r\n      return 'bg-blue-100 text-blue-800';\r\n    case 'student':\r\n      return 'bg-green-100 text-green-800';\r\n    case 'staff':\r\n      return 'bg-purple-100 text-purple-800';\r\n    case 'student_applicant':\r\n      return 'bg-yellow-100 text-yellow-800';\r\n    case 'alumni':\r\n      return 'bg-gray-100 text-gray-800';\r\n    default:\r\n      return 'bg-gray-100 text-gray-800';\r\n  }\r\n};\r\n\r\n/**\r\n * Role label mapping (Indonesian)\r\n */\r\nexport const getRoleLabel = (role: string): string => {\r\n  const labels: Record<string, string> = {\r\n    admin: 'Admin',\r\n    lecturer: 'Dosen',\r\n    student: 'Mahasiswa',\r\n    staff: 'Staff',\r\n    student_applicant: 'Pendaftar',\r\n    alumni: 'Alumni',\r\n    guest: 'Guest',\r\n  };\r\n  return labels[role] || role;\r\n};\r\n\r\n/**\r\n * Extract value from SQL NullString or plain value\r\n * Re-exported from @/utils for backward compatibility within this module\r\n */\r\nexport const getSqlValue = extractString;\r\n\r\n/**\r\n * Bulk user import types\r\n */\r\nexport interface BulkUserEntry extends CreateUserRequest {\r\n  // Additional fields for display\r\n  displayName?: string;\r\n}\r\n\r\n/**\r\n * Available roles for assignment\r\n */\r\nexport const availableRoles = [\r\n  { value: 'admin', label: 'Admin' },\r\n  { value: 'lecturer', label: 'Dosen' },\r\n  { value: 'student', label: 'Mahasiswa' },\r\n  { value: 'staff', label: 'Staff' },\r\n  { value: 'student_applicant', label: 'Pendaftar' },\r\n  { value: 'alumni', label: 'Alumni' },\r\n] as const;\r\n","/**\r\n * User Table Component\r\n * Displays the list of users with actions\r\n */\r\n\r\nimport React from 'react';\r\nimport { Edit, Trash2, Mail, Phone, ChevronLeft, ChevronRight } from 'lucide-react';\r\nimport type { UserWithDetails } from './types';\r\nimport { getRoleColor, getRoleLabel, getSqlValue } from './types';\r\n\r\ninterface UserTableProps {\r\n  users: UserWithDetails[];\r\n  loading: boolean;\r\n  currentPage: number;\r\n  totalUsers: number;\r\n  itemsPerPage: number;\r\n  onPageChange: (page: number) => void;\r\n  onEditUser: (user: UserWithDetails) => void;\r\n  onDeleteUser: (user: UserWithDetails) => void;\r\n}\r\n\r\nexport const UserTable: React.FC<UserTableProps> = ({\r\n  users,\r\n  loading,\r\n  currentPage,\r\n  totalUsers,\r\n  itemsPerPage,\r\n  onPageChange,\r\n  onEditUser,\r\n  onDeleteUser,\r\n}) => {\r\n  const totalPages = Math.ceil(totalUsers / itemsPerPage);\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg border border-gray-200\">\r\n      {/* Table */}\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full\">\r\n          <thead className=\"bg-gray-50 border-b border-gray-200\">\r\n            <tr>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Pengguna\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Role\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Entitas\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Kontak\r\n              </th>\r\n              <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Aksi\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"divide-y divide-gray-200\">\r\n            {loading ? (\r\n              <tr>\r\n                <td colSpan={5} className=\"px-6 py-12 text-center\">\r\n                  <div className=\"flex items-center justify-center\">\r\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n                    <span className=\"ml-2 text-gray-500\">Memuat data...</span>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ) : users.length === 0 ? (\r\n              <tr>\r\n                <td colSpan={5} className=\"px-6 py-12 text-center text-gray-500\">\r\n                  Tidak ada pengguna ditemukan\r\n                </td>\r\n              </tr>\r\n            ) : (\r\n              users.map((user) => (\r\n                <UserTableRow\r\n                  key={user.id}\r\n                  user={user}\r\n                  onEdit={onEditUser}\r\n                  onDelete={onDeleteUser}\r\n                />\r\n              ))\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* Pagination */}\r\n      {totalPages > 1 && (\r\n        <div className=\"px-6 py-4 border-t border-gray-200 flex items-center justify-between\">\r\n          <div className=\"text-sm text-gray-500\">\r\n            Menampilkan {(currentPage - 1) * itemsPerPage + 1} -{' '}\r\n            {Math.min(currentPage * itemsPerPage, totalUsers)} dari {totalUsers} pengguna\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <button\r\n              onClick={() => onPageChange(currentPage - 1)}\r\n              disabled={currentPage === 1}\r\n              className=\"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              <ChevronLeft className=\"w-4 h-4\" />\r\n            </button>\r\n            <span className=\"text-sm text-gray-700\">\r\n              Halaman {currentPage} dari {totalPages}\r\n            </span>\r\n            <button\r\n              onClick={() => onPageChange(currentPage + 1)}\r\n              disabled={currentPage === totalPages}\r\n              className=\"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              <ChevronRight className=\"w-4 h-4\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n/**\r\n * Individual user row component\r\n */\r\ninterface UserTableRowProps {\r\n  user: UserWithDetails;\r\n  onEdit: (user: UserWithDetails) => void;\r\n  onDelete: (user: UserWithDetails) => void;\r\n}\r\n\r\nconst UserTableRow: React.FC<UserTableRowProps> = ({ user, onEdit, onDelete }) => {\r\n  const userName = getSqlValue(user.name) || user.email.split('@')[0];\r\n  const roles = user.roles || [];\r\n\r\n  // Get contact info from entity\r\n  const getContactInfo = () => {\r\n    if (user.studentInfo) {\r\n      return {\r\n        email: getSqlValue(user.studentInfo.email),\r\n        phone: getSqlValue(user.studentInfo.no_hp),\r\n      };\r\n    }\r\n    if (user.lecturerInfo) {\r\n      return {\r\n        email: getSqlValue(user.lecturerInfo.email),\r\n        phone: getSqlValue(user.lecturerInfo.no_hp),\r\n      };\r\n    }\r\n    return { email: user.email, phone: '' };\r\n  };\r\n\r\n  const contact = getContactInfo();\r\n\r\n  // Get entity info\r\n  const getEntityInfo = () => {\r\n    const entities: string[] = [];\r\n    \r\n    if (user.studentInfo) {\r\n      entities.push(`NIM: ${user.studentInfo.nim}`);\r\n    }\r\n    if (user.lecturerInfo) {\r\n      entities.push(`NIDN: ${getSqlValue(user.lecturerInfo.nuptk) || user.lecturerInfo.id}`);\r\n    }\r\n    \r\n    return entities;\r\n  };\r\n\r\n  const entityInfo = getEntityInfo();\r\n\r\n  return (\r\n    <tr className=\"hover:bg-gray-50\">\r\n      <td className=\"px-6 py-4\">\r\n        <div className=\"flex items-center\">\r\n          <div className=\"h-10 w-10 flex-shrink-0\">\r\n            <div className=\"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center\">\r\n              <span className=\"text-blue-600 font-medium text-sm\">\r\n                {userName.charAt(0).toUpperCase()}\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div className=\"ml-4\">\r\n            <div className=\"text-sm font-medium text-gray-900\">{userName}</div>\r\n            <div className=\"text-sm text-gray-500\">{user.email}</div>\r\n          </div>\r\n        </div>\r\n      </td>\r\n      <td className=\"px-6 py-4\">\r\n        <div className=\"flex flex-wrap gap-1\">\r\n          {roles.map((roleObj, idx) => (\r\n            <span\r\n              key={idx}\r\n              className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${getRoleColor(roleObj.role)}`}\r\n            >\r\n              {getRoleLabel(roleObj.role)}\r\n            </span>\r\n          ))}\r\n          {roles.length === 0 && (\r\n            <span className=\"text-gray-400 text-sm\">-</span>\r\n          )}\r\n        </div>\r\n      </td>\r\n      <td className=\"px-6 py-4\">\r\n        <div className=\"text-sm text-gray-900\">\r\n          {entityInfo.length > 0 ? (\r\n            entityInfo.map((info, idx) => (\r\n              <div key={idx}>{info}</div>\r\n            ))\r\n          ) : (\r\n            <span className=\"text-gray-400\">-</span>\r\n          )}\r\n        </div>\r\n      </td>\r\n      <td className=\"px-6 py-4\">\r\n        <div className=\"text-sm text-gray-500 space-y-1\">\r\n          {contact.email && (\r\n            <div className=\"flex items-center gap-1\">\r\n              <Mail className=\"w-3 h-3\" />\r\n              <span className=\"truncate max-w-[150px]\">{contact.email}</span>\r\n            </div>\r\n          )}\r\n          {contact.phone && (\r\n            <div className=\"flex items-center gap-1\">\r\n              <Phone className=\"w-3 h-3\" />\r\n              {contact.phone}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </td>\r\n      <td className=\"px-6 py-4 text-right\">\r\n        <div className=\"flex items-center justify-end gap-2\">\r\n          <button\r\n            onClick={() => onEdit(user)}\r\n            className=\"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\r\n            title=\"Edit\"\r\n          >\r\n            <Edit className=\"w-4 h-4\" />\r\n          </button>\r\n          <button\r\n            onClick={() => onDelete(user)}\r\n            className=\"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n            title=\"Hapus\"\r\n          >\r\n            <Trash2 className=\"w-4 h-4\" />\r\n          </button>\r\n        </div>\r\n      </td>\r\n    </tr>\r\n  );\r\n};\r\n\r\nexport default UserTable;\r\n","/**\r\n * User Form Modal Component\r\n * Used for adding and editing users\r\n */\r\n\r\nimport React from 'react';\r\nimport { X, Loader, Trash2 } from 'lucide-react';\r\nimport type { UserFormData } from './types';\r\nimport { getRoleLabel, availableRoles } from './types';\r\nimport type { Mahasiswa, Dosen } from '@/types';\r\n\r\ninterface UserFormModalProps {\r\n  isOpen: boolean;\r\n  isEdit: boolean;\r\n  formData: UserFormData;\r\n  formError: string | null;\r\n  actionLoading: boolean;\r\n  students: Mahasiswa[];\r\n  lecturers: Dosen[];\r\n  onClose: () => void;\r\n  onSubmit: (e: React.FormEvent) => void;\r\n  onFormChange: (data: Partial<UserFormData>) => void;\r\n  onAddRole: (role: string) => void;\r\n  onRemoveRole: (index: number) => void;\r\n  onUpdateRoleEntity: (index: number, entityType: string, entityId: string) => void;\r\n}\r\n\r\nexport const UserFormModal: React.FC<UserFormModalProps> = ({\r\n  isOpen,\r\n  isEdit,\r\n  formData,\r\n  formError,\r\n  actionLoading,\r\n  students,\r\n  lecturers,\r\n  onClose,\r\n  onSubmit,\r\n  onFormChange,\r\n  onAddRole,\r\n  onRemoveRole,\r\n  onUpdateRoleEntity,\r\n}) => {\r\n  if (!isOpen) return null;\r\n\r\n  const title = isEdit ? 'Edit Pengguna' : 'Tambah Pengguna';\r\n  const submitLabel = isEdit ? 'Simpan Perubahan' : 'Tambah Pengguna';\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto m-4\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-200\">\r\n          <h2 className=\"text-lg font-semibold text-gray-900\">{title}</h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Form */}\r\n        <form onSubmit={onSubmit}>\r\n          <div className=\"px-6 py-4 space-y-4\">\r\n            {formError && (\r\n              <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm\">\r\n                {formError}\r\n              </div>\r\n            )}\r\n\r\n            {/* Email */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Email <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                value={formData.email}\r\n                onChange={(e) => onFormChange({ email: e.target.value })}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                placeholder=\"email@example.com\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Name */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Nama\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.name}\r\n                onChange={(e) => onFormChange({ name: e.target.value })}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                placeholder=\"Nama lengkap\"\r\n              />\r\n            </div>\r\n\r\n            {/* Password */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Password {!isEdit && <span className=\"text-red-500\">*</span>}\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                value={formData.password}\r\n                onChange={(e) => onFormChange({ password: e.target.value })}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                placeholder={isEdit ? 'Kosongkan jika tidak ingin mengubah' : 'Masukkan password'}\r\n                required={!isEdit}\r\n              />\r\n            </div>\r\n\r\n            {/* Roles */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Role\r\n              </label>\r\n              \r\n              {/* Existing roles */}\r\n              <div className=\"space-y-2 mb-3\">\r\n                {formData.roles.map((roleObj, idx) => (\r\n                  <RoleEntry\r\n                    key={idx}\r\n                    role={roleObj.role}\r\n                    entityId={roleObj.entity_id}\r\n                    students={students}\r\n                    lecturers={lecturers}\r\n                    onUpdateEntity={(entityType, entityId) =>\r\n                      onUpdateRoleEntity(idx, entityType, entityId)\r\n                    }\r\n                    onRemove={() => onRemoveRole(idx)}\r\n                  />\r\n                ))}\r\n              </div>\r\n\r\n              {/* Add role dropdown */}\r\n              <select\r\n                onChange={(e) => {\r\n                  if (e.target.value) {\r\n                    onAddRole(e.target.value);\r\n                    e.target.value = '';\r\n                  }\r\n                }}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                defaultValue=\"\"\r\n              >\r\n                <option value=\"\">+ Tambah Role</option>\r\n                {availableRoles\r\n                  .filter((r) => !formData.roles.some((fr) => fr.role === r.value))\r\n                  .map((r) => (\r\n                    <option key={r.value} value={r.value}>\r\n                      {r.label}\r\n                    </option>\r\n                  ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          <div className=\"px-6 py-4 border-t border-gray-200 flex justify-end gap-3\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\"\r\n              disabled={actionLoading}\r\n            >\r\n              Batal\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center gap-2\"\r\n              disabled={actionLoading}\r\n            >\r\n              {actionLoading && <Loader className=\"w-4 h-4 animate-spin\" />}\r\n              {submitLabel}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n/**\r\n * Role entry component with entity selection\r\n */\r\ninterface RoleEntryProps {\r\n  role: string;\r\n  entityId?: string;\r\n  students: Mahasiswa[];\r\n  lecturers: Dosen[];\r\n  onUpdateEntity: (entityType: string, entityId: string) => void;\r\n  onRemove: () => void;\r\n}\r\n\r\nconst RoleEntry: React.FC<RoleEntryProps> = ({\r\n  role,\r\n  entityId,\r\n  students,\r\n  lecturers,\r\n  onUpdateEntity,\r\n  onRemove,\r\n}) => {\r\n  const showStudentSelect = role === 'student' || role === 'alumni';\r\n  const showLecturerSelect = role === 'lecturer';\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-2 p-2 bg-gray-50 rounded-lg\">\r\n      <span className=\"text-sm font-medium text-gray-700 min-w-[80px]\">\r\n        {getRoleLabel(role)}\r\n      </span>\r\n\r\n      {showStudentSelect && (\r\n        <select\r\n          value={entityId || ''}\r\n          onChange={(e) => onUpdateEntity('mahasiswa', e.target.value)}\r\n          className=\"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500\"\r\n        >\r\n          <option value=\"\">Pilih Mahasiswa</option>\r\n          {students.map((s) => (\r\n            <option key={s.nim} value={s.nim}>\r\n              {s.nim} - {s.nama || '(No Name)'}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      )}\r\n\r\n      {showLecturerSelect && (\r\n        <select\r\n          value={entityId || ''}\r\n          onChange={(e) => onUpdateEntity('dosen', e.target.value)}\r\n          className=\"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500\"\r\n        >\r\n          <option value=\"\">Pilih Dosen</option>\r\n          {lecturers.map((l) => (\r\n            <option key={l.id} value={l.id}>\r\n              {l.id} - {l.nama_dosen || '(No Name)'}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      )}\r\n\r\n      {!showStudentSelect && !showLecturerSelect && (\r\n        <span className=\"flex-1 text-sm text-gray-500\">\r\n          Tidak memerlukan entitas\r\n        </span>\r\n      )}\r\n\r\n      <button\r\n        type=\"button\"\r\n        onClick={onRemove}\r\n        className=\"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors\"\r\n      >\r\n        <Trash2 className=\"w-4 h-4\" />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserFormModal;\r\n","import { useQuery, useMutation, useQueryClient, type UseMutationOptions, type UseQueryOptions } from '@tanstack/react-query';\r\nimport { apiService, type MessageResponse } from '../services/api';\r\nimport type { BackendUser, PaginatedUsersResponse, CreateUserRequest, UpdateUserRequest, Mahasiswa, Dosen, BulkCreateUsersRequest } from '../types';\r\n\r\n// Users list with pagination/search\r\nexport function useUsersList(\r\n  params: { q?: string; limit?: number; offset?: number },\r\n  options?: Omit<UseQueryOptions<PaginatedUsersResponse, Error>, 'queryKey' | 'queryFn'>\r\n) {\r\n  const key = ['users', params.q ?? null, params.limit ?? null, params.offset ?? null] as const;\r\n  return useQuery<PaginatedUsersResponse, Error>({\r\n    queryKey: key,\r\n    queryFn: () => apiService.getUsers(params),\r\n    ...(options ?? {}),\r\n  });\r\n}\r\n\r\nexport const usersQueryRootKey = ['users'] as const;\r\n\r\n// Students and lecturers master lists (optionally filter by program)\r\nexport function useStudentsList(\r\n  kode_prodi?: string,\r\n  options?: Omit<UseQueryOptions<Mahasiswa[], Error>, 'queryKey' | 'queryFn'>\r\n) {\r\n  const key = ['students', kode_prodi ?? null] as const;\r\n  return useQuery<Mahasiswa[], Error>({\r\n    queryKey: key,\r\n    queryFn: () => apiService.getStudents(kode_prodi),\r\n    ...(options ?? {}),\r\n  });\r\n}\r\n\r\nexport function useLecturersList(\r\n  kode_prodi?: string,\r\n  options?: Omit<UseQueryOptions<Dosen[], Error>, 'queryKey' | 'queryFn'>\r\n) {\r\n  const key = ['lecturers', kode_prodi ?? null] as const;\r\n  return useQuery<Dosen[], Error>({\r\n    queryKey: key,\r\n    queryFn: () => apiService.getLecturers(kode_prodi),\r\n    ...(options ?? {}),\r\n  });\r\n}\r\n\r\n// Fetch single lecturer by id\r\nexport function useLecturerById(\r\n  id?: string,\r\n  options?: Omit<UseQueryOptions<Dosen, Error>, 'queryKey' | 'queryFn'>\r\n) {\r\n  const key = ['lecturer', id ?? null] as const;\r\n  return useQuery<Dosen, Error>({\r\n    queryKey: key,\r\n    queryFn: () => apiService.getLecturerByID(String(id)),\r\n    enabled: !!id,\r\n    ...(options ?? {}),\r\n  });\r\n}\r\n\r\n// User mutations\r\nexport function useCreateUser(\r\n  options?: UseMutationOptions<BackendUser, Error, CreateUserRequest>\r\n) {\r\n  const qc = useQueryClient();\r\n  return useMutation<BackendUser, Error, CreateUserRequest>({\r\n    mutationFn: (payload) => apiService.createUser(payload),\r\n    onSuccess: (...args) => {\r\n      // Invalidate all users queries\r\n      qc.invalidateQueries({ queryKey: usersQueryRootKey });\r\n      options?.onSuccess?.(...args);\r\n    },\r\n    ...options,\r\n  });\r\n}\r\n\r\nexport function useUpdateUser(\r\n  options?: UseMutationOptions<MessageResponse, Error, { id: number; data: UpdateUserRequest }>\r\n) {\r\n  const qc = useQueryClient();\r\n  return useMutation<MessageResponse, Error, { id: number; data: UpdateUserRequest}>({\r\n    mutationFn: ({ id, data }) => apiService.updateUser(id, data),\r\n    onSuccess: (...args) => {\r\n      qc.invalidateQueries({ queryKey: usersQueryRootKey });\r\n      options?.onSuccess?.(...args);\r\n    },\r\n    ...options,\r\n  });\r\n}\r\n\r\nexport function useDeleteUser(\r\n  options?: UseMutationOptions<MessageResponse, Error, { id: number }>\r\n) {\r\n  const qc = useQueryClient();\r\n  return useMutation<MessageResponse, Error, { id: number }>({\r\n    mutationFn: ({ id }) => apiService.deleteUser(id),\r\n    onSuccess: (...args) => {\r\n      qc.invalidateQueries({ queryKey: usersQueryRootKey });\r\n      options?.onSuccess?.(...args);\r\n    },\r\n    ...options,\r\n  });\r\n}\r\n\r\nexport function useBulkCreateUsers(\r\n  options?: UseMutationOptions<MessageResponse, Error, BulkCreateUsersRequest>\r\n) {\r\n  const qc = useQueryClient();\r\n  return useMutation<MessageResponse, Error, BulkCreateUsersRequest>({\r\n    mutationFn: (payload) => apiService.bulkCreateUsers(payload),\r\n    onSuccess: (...args) => {\r\n      qc.invalidateQueries({ queryKey: usersQueryRootKey });\r\n      options?.onSuccess?.(...args);\r\n    },\r\n    ...options,\r\n  });\r\n}\r\n\r\n// Entity mutations used by bulk import flows\r\nexport function useCreateStudent(\r\n  options?: UseMutationOptions<MessageResponse, Error, import('../types').CreateMahasiswaRequest>\r\n) {\r\n  const qc = useQueryClient();\r\n  return useMutation<MessageResponse, Error, import('../types').CreateMahasiswaRequest>({\r\n    mutationFn: (payload) => apiService.createStudent(payload),\r\n    onSuccess: (...args) => {\r\n      qc.invalidateQueries({ queryKey: ['students'] });\r\n      options?.onSuccess?.(...args);\r\n    },\r\n    ...options,\r\n  });\r\n}\r\n\r\nexport function useCreateLecturer(\r\n  options?: UseMutationOptions<MessageResponse, Error, import('../types').CreateDosenRequest>\r\n) {\r\n  const qc = useQueryClient();\r\n  return useMutation<MessageResponse, Error, import('../types').CreateDosenRequest>({\r\n    mutationFn: (payload) => apiService.createLecturer(payload),\r\n    onSuccess: (...args) => {\r\n      qc.invalidateQueries({ queryKey: ['lecturers'] });\r\n      options?.onSuccess?.(...args);\r\n    },\r\n    ...options,\r\n  });\r\n}\r\n","/**\r\n * Custom hook for UserManagement logic\r\n */\r\n\r\nimport { useMemo, useState, useEffect, useCallback } from 'react';\r\nimport {\r\n  useUsersList,\r\n  useStudentsList,\r\n  useLecturersList,\r\n  useCreateUser,\r\n  useUpdateUser,\r\n  useDeleteUser,\r\n} from '@/hooks/useUsers';\r\nimport type { CreateUserRequest, UpdateUserRequest, Mahasiswa, Dosen } from '@/types';\r\nimport type { UserWithDetails, UserFormData, UserStats } from './types';\r\nimport { getSqlValue, initialFormData } from './types';\r\n\r\ninterface UseUserManagementReturn {\r\n  // Data\r\n  users: UserWithDetails[];\r\n  students: Mahasiswa[];\r\n  lecturers: Dosen[];\r\n  userStats: UserStats;\r\n  totalUsers: number;\r\n  \r\n  // Loading states\r\n  loading: boolean;\r\n  loadError: Error | null;\r\n  actionLoading: boolean;\r\n  \r\n  // Pagination\r\n  currentPage: number;\r\n  itemsPerPage: number;\r\n  setCurrentPage: (page: number) => void;\r\n  \r\n  // Search and filter\r\n  searchTerm: string;\r\n  setSearchTerm: (term: string) => void;\r\n  selectedRole: string;\r\n  setSelectedRole: (role: string) => void;\r\n  filteredUsers: UserWithDetails[];\r\n  \r\n  // Form state\r\n  formData: UserFormData;\r\n  setFormData: React.Dispatch<React.SetStateAction<UserFormData>>;\r\n  formError: string | null;\r\n  setFormError: (error: string | null) => void;\r\n  \r\n  // Modal state\r\n  isAddModalOpen: boolean;\r\n  setIsAddModalOpen: (open: boolean) => void;\r\n  isEditModalOpen: boolean;\r\n  setIsEditModalOpen: (open: boolean) => void;\r\n  editingUser: UserWithDetails | null;\r\n  setEditingUser: (user: UserWithDetails | null) => void;\r\n  \r\n  // Actions\r\n  handleAddUser: (e: React.FormEvent) => Promise<void>;\r\n  handleEditUser: (e: React.FormEvent) => Promise<void>;\r\n  handleDeleteUser: (user: UserWithDetails) => Promise<void>;\r\n  openAddModal: () => void;\r\n  openEditModal: (user: UserWithDetails) => void;\r\n  closeAddModal: () => void;\r\n  closeEditModal: () => void;\r\n  \r\n  // Role management\r\n  addRole: (role: string) => void;\r\n  removeRole: (index: number) => void;\r\n  updateRoleEntity: (index: number, entityType: string, entityId: string) => void;\r\n}\r\n\r\nexport function useUserManagement(): UseUserManagementReturn {\r\n  // Pagination state\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalUsers, setTotalUsers] = useState(0);\r\n  const itemsPerPage = 50;\r\n\r\n  // Search and filter state\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedRole, setSelectedRole] = useState<string>('all');\r\n\r\n  // Modal state\r\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n  const [editingUser, setEditingUser] = useState<UserWithDetails | null>(null);\r\n\r\n  // Form state\r\n  const [formData, setFormData] = useState<UserFormData>(initialFormData);\r\n  const [formError, setFormError] = useState<string | null>(null);\r\n  const [actionLoading, setActionLoading] = useState(false);\r\n\r\n  // Local entity state\r\n  const [students, setStudents] = useState<Mahasiswa[]>([]);\r\n  const [lecturers, setLecturers] = useState<Dosen[]>([]);\r\n\r\n  // Queries\r\n  const { data: studentsData, isLoading: isStudentsLoading, error: studentsError } = useStudentsList();\r\n  const { data: lecturersData, isLoading: isLecturersLoading, error: lecturersError } = useLecturersList();\r\n  \r\n  const usersParams = useMemo(\r\n    () => ({\r\n      q: searchTerm || undefined,\r\n      limit: itemsPerPage,\r\n      offset: (currentPage - 1) * itemsPerPage,\r\n    }),\r\n    [itemsPerPage, currentPage, searchTerm]\r\n  );\r\n  \r\n  const usersQuery = useUsersList(usersParams, { enabled: true });\r\n\r\n  // Mutations\r\n  const createUserMutation = useCreateUser();\r\n  const updateUserMutation = useUpdateUser();\r\n  const deleteUserMutation = useDeleteUser();\r\n\r\n  // Sync local state with query data\r\n  useEffect(() => {\r\n    if (studentsData) setStudents(studentsData);\r\n  }, [studentsData]);\r\n\r\n  useEffect(() => {\r\n    if (lecturersData) setLecturers(lecturersData);\r\n  }, [lecturersData]);\r\n\r\n  useEffect(() => {\r\n    if (usersQuery.data) {\r\n      setTotalUsers(usersQuery.data.total);\r\n    }\r\n  }, [usersQuery.data]);\r\n\r\n  // Reset page on search/filter change\r\n  useEffect(() => {\r\n    setCurrentPage(1);\r\n  }, [searchTerm, selectedRole]);\r\n\r\n  // Derived state\r\n  const loading = usersQuery.isLoading || isStudentsLoading || isLecturersLoading;\r\n  const loadError = usersQuery.error || studentsError || lecturersError;\r\n\r\n  // Enrich users with entity info\r\n  const users: UserWithDetails[] = useMemo(() => {\r\n    const base = usersQuery.data?.data ?? [];\r\n    return base.map((user) => {\r\n      const userRoles = user.roles || [];\r\n      const studentRole = userRoles.find((r) => r.role === 'student');\r\n      const lecturerRole = userRoles.find((r) => r.role === 'lecturer');\r\n      const enriched: UserWithDetails = { ...user };\r\n      \r\n      if (studentRole?.entity_id && studentsData) {\r\n        enriched.studentInfo = studentsData.find((s) => s.nim === studentRole.entity_id);\r\n      }\r\n      if (lecturerRole?.entity_id && lecturersData) {\r\n        enriched.lecturerInfo = lecturersData.find((l) => l.id === lecturerRole.entity_id);\r\n      }\r\n      \r\n      return enriched;\r\n    });\r\n  }, [usersQuery.data, studentsData, lecturersData]);\r\n\r\n  // Filter users client-side (for role filter)\r\n  const filteredUsers = useMemo(() => {\r\n    return users.filter((user) => {\r\n      const userRoles = user.roles?.map((r) => r.role) || [];\r\n      return selectedRole === 'all' || userRoles.includes(selectedRole);\r\n    });\r\n  }, [users, selectedRole]);\r\n\r\n  // Calculate stats\r\n  const userStats: UserStats = useMemo(() => {\r\n    const allRoles = users.flatMap((u) => u.roles?.map((r) => r.role) || []);\r\n    return {\r\n      total: totalUsers,\r\n      students: allRoles.filter((r) => r === 'student').length,\r\n      lecturers: allRoles.filter((r) => r === 'lecturer').length,\r\n      admins: allRoles.filter((r) => r === 'admin').length,\r\n      staff: allRoles.filter((r) => r === 'staff').length,\r\n    };\r\n  }, [users, totalUsers]);\r\n\r\n  // Modal handlers\r\n  const openAddModal = useCallback(() => {\r\n    setFormError(null);\r\n    setFormData(initialFormData);\r\n    setIsAddModalOpen(true);\r\n  }, []);\r\n\r\n  const closeAddModal = useCallback(() => {\r\n    setIsAddModalOpen(false);\r\n  }, []);\r\n\r\n  const openEditModal = useCallback((user: UserWithDetails) => {\r\n    setFormError(null);\r\n    setEditingUser(user);\r\n    setFormData({\r\n      email: user.email,\r\n      name: getSqlValue(user.name),\r\n      password: '',\r\n      roles: user.roles || [],\r\n    });\r\n    setIsEditModalOpen(true);\r\n  }, []);\r\n\r\n  const closeEditModal = useCallback(() => {\r\n    setIsEditModalOpen(false);\r\n    setEditingUser(null);\r\n  }, []);\r\n\r\n  // Form actions\r\n  const handleAddUser = useCallback(async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setFormError(null);\r\n\r\n    if (!formData.email.trim() || !formData.email.includes('@')) {\r\n      setFormError('Email tidak valid');\r\n      return;\r\n    }\r\n\r\n    if (!formData.password.trim()) {\r\n      setFormError('Password wajib diisi jika tidak menggunakan Google OAuth');\r\n      return;\r\n    }\r\n\r\n    setActionLoading(true);\r\n    try {\r\n      const payload: CreateUserRequest = {\r\n        email: formData.email.trim(),\r\n        name: formData.name.trim() || undefined,\r\n        password: formData.password.trim() || undefined,\r\n        auth_provider: 'local',\r\n        roles: formData.roles,\r\n      };\r\n\r\n      await createUserMutation.mutateAsync(payload);\r\n      setIsAddModalOpen(false);\r\n    } catch (error: unknown) {\r\n      const err = error as Error;\r\n      setFormError(err.message || 'Gagal menambahkan pengguna');\r\n    } finally {\r\n      setActionLoading(false);\r\n    }\r\n  }, [formData, createUserMutation]);\r\n\r\n  const handleEditUser = useCallback(async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!editingUser) return;\r\n\r\n    setFormError(null);\r\n\r\n    if (!formData.email.trim() || !formData.email.includes('@')) {\r\n      setFormError('Email tidak valid');\r\n      return;\r\n    }\r\n\r\n    setActionLoading(true);\r\n    try {\r\n      const payload: UpdateUserRequest = {\r\n        email: formData.email.trim(),\r\n        name: formData.name.trim() || undefined,\r\n        roles: formData.roles,\r\n      };\r\n\r\n      if (formData.password.trim()) {\r\n        payload.password = formData.password.trim();\r\n      }\r\n\r\n      await updateUserMutation.mutateAsync({ id: editingUser.id, data: payload });\r\n      setIsEditModalOpen(false);\r\n    } catch (error: unknown) {\r\n      const err = error as Error;\r\n      setFormError(err.message || 'Gagal mengupdate pengguna');\r\n    } finally {\r\n      setActionLoading(false);\r\n    }\r\n  }, [formData, editingUser, updateUserMutation]);\r\n\r\n  const handleDeleteUser = useCallback(async (user: UserWithDetails) => {\r\n    const userName = getSqlValue(user.name) || user.email;\r\n    if (!confirm(`Apakah Anda yakin ingin menghapus pengguna \"${userName}\"?`)) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await deleteUserMutation.mutateAsync({ id: user.id });\r\n    } catch (error: unknown) {\r\n      const err = error as Error;\r\n      alert(`Gagal menghapus pengguna: ${err.message}`);\r\n    }\r\n  }, [deleteUserMutation]);\r\n\r\n  // Role management\r\n  const addRole = useCallback((role: string) => {\r\n    if (formData.roles.some((r) => r.role === role)) {\r\n      setFormError(`Role sudah ditambahkan`);\r\n      return;\r\n    }\r\n\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      roles: [...prev.roles, { role }],\r\n    }));\r\n  }, [formData.roles]);\r\n\r\n  const removeRole = useCallback((index: number) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      roles: prev.roles.filter((_, i) => i !== index),\r\n    }));\r\n  }, []);\r\n\r\n  const updateRoleEntity = useCallback((index: number, entityType: string, entityId: string) => {\r\n    setFormData((prev) => {\r\n      const newRoles = [...prev.roles];\r\n      if (entityId) {\r\n        newRoles[index] = {\r\n          ...newRoles[index],\r\n          entity_type: entityType,\r\n          entity_id: entityId,\r\n        };\r\n      } else {\r\n        const { entity_type, entity_id, ...rest } = newRoles[index];\r\n        void entity_type;\r\n        void entity_id;\r\n        newRoles[index] = rest;\r\n      }\r\n      return { ...prev, roles: newRoles };\r\n    });\r\n  }, []);\r\n\r\n  return {\r\n    // Data\r\n    users,\r\n    students,\r\n    lecturers,\r\n    userStats,\r\n    totalUsers,\r\n    \r\n    // Loading states\r\n    loading,\r\n    loadError,\r\n    actionLoading,\r\n    \r\n    // Pagination\r\n    currentPage,\r\n    itemsPerPage,\r\n    setCurrentPage,\r\n    \r\n    // Search and filter\r\n    searchTerm,\r\n    setSearchTerm,\r\n    selectedRole,\r\n    setSelectedRole,\r\n    filteredUsers,\r\n    \r\n    // Form state\r\n    formData,\r\n    setFormData,\r\n    formError,\r\n    setFormError,\r\n    \r\n    // Modal state\r\n    isAddModalOpen,\r\n    setIsAddModalOpen,\r\n    isEditModalOpen,\r\n    setIsEditModalOpen,\r\n    editingUser,\r\n    setEditingUser,\r\n    \r\n    // Actions\r\n    handleAddUser,\r\n    handleEditUser,\r\n    handleDeleteUser,\r\n    openAddModal,\r\n    openEditModal,\r\n    closeAddModal,\r\n    closeEditModal,\r\n    \r\n    // Role management\r\n    addRole,\r\n    removeRole,\r\n    updateRoleEntity,\r\n  };\r\n}\r\n\r\nexport default useUserManagement;\r\n","/**\r\n * User Management Page\r\n * \r\n * Refactored to use smaller components for better maintainability.\r\n * This is the main entry point that composes all sub-components.\r\n */\r\n\r\nimport React from 'react';\r\nimport { Plus, Search, Filter } from 'lucide-react';\r\nimport { PageHeader } from '@/components/ui';\r\nimport { UserStatsCards } from './UserStatsCards';\r\nimport { UserTable } from './UserTable';\r\nimport { UserFormModal } from './UserFormModal';\r\nimport { useUserManagement } from './useUserManagement';\r\n\r\nconst UserManagement: React.FC = () => {\r\n  const {\r\n    // Data\r\n    students,\r\n    lecturers,\r\n    userStats,\r\n    totalUsers,\r\n    \r\n    // Loading states\r\n    loading,\r\n    loadError,\r\n    actionLoading,\r\n    \r\n    // Pagination\r\n    currentPage,\r\n    itemsPerPage,\r\n    setCurrentPage,\r\n    \r\n    // Search and filter\r\n    searchTerm,\r\n    setSearchTerm,\r\n    selectedRole,\r\n    setSelectedRole,\r\n    filteredUsers,\r\n    \r\n    // Form state\r\n    formData,\r\n    setFormData,\r\n    formError,\r\n    \r\n    // Modal state\r\n    isAddModalOpen,\r\n    isEditModalOpen,\r\n    \r\n    // Actions\r\n    handleAddUser,\r\n    handleEditUser,\r\n    handleDeleteUser,\r\n    openAddModal,\r\n    openEditModal,\r\n    closeAddModal,\r\n    closeEditModal,\r\n    \r\n    // Role management\r\n    addRole,\r\n    removeRole,\r\n    updateRoleEntity,\r\n  } = useUserManagement();\r\n\r\n  // Handle form change\r\n  const handleFormChange = (data: Partial<typeof formData>) => {\r\n    setFormData((prev) => ({ ...prev, ...data }));\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6\">\r\n        <PageHeader\r\n          title=\"Manajemen Pengguna\"\r\n          subtitle=\"Kelola pengguna sistem dan hak akses\"\r\n        />\r\n        <div className=\"flex gap-2 mt-4 sm:mt-0\">\r\n          <button\r\n            onClick={openAddModal}\r\n            className=\"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n          >\r\n            <Plus className=\"w-4 h-4\" />\r\n            Tambah Pengguna\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Error Display */}\r\n      {loadError && (\r\n        <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-600\">\r\n          Gagal memuat data: {loadError.message}\r\n        </div>\r\n      )}\r\n\r\n      {/* Statistics */}\r\n      <UserStatsCards stats={userStats} />\r\n\r\n      {/* Search and Filter */}\r\n      <div className=\"flex flex-col sm:flex-row gap-4 mb-6\">\r\n        {/* Search */}\r\n        <div className=\"flex-1 relative\">\r\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Cari berdasarkan nama atau email...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n          />\r\n        </div>\r\n\r\n        {/* Role Filter */}\r\n        <div className=\"relative\">\r\n          <Filter className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\r\n          <select\r\n            value={selectedRole}\r\n            onChange={(e) => setSelectedRole(e.target.value)}\r\n            className=\"pl-10 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none bg-white\"\r\n          >\r\n            <option value=\"all\">Semua Role</option>\r\n            <option value=\"admin\">Admin</option>\r\n            <option value=\"lecturer\">Dosen</option>\r\n            <option value=\"student\">Mahasiswa</option>\r\n            <option value=\"staff\">Staff</option>\r\n            <option value=\"alumni\">Alumni</option>\r\n            <option value=\"student_applicant\">Pendaftar</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      {/* User Table */}\r\n      <UserTable\r\n        users={filteredUsers}\r\n        loading={loading}\r\n        currentPage={currentPage}\r\n        totalUsers={selectedRole === 'all' ? totalUsers : filteredUsers.length}\r\n        itemsPerPage={itemsPerPage}\r\n        onPageChange={setCurrentPage}\r\n        onEditUser={openEditModal}\r\n        onDeleteUser={handleDeleteUser}\r\n      />\r\n\r\n      {/* Add User Modal */}\r\n      <UserFormModal\r\n        isOpen={isAddModalOpen}\r\n        isEdit={false}\r\n        formData={formData}\r\n        formError={formError}\r\n        actionLoading={actionLoading}\r\n        students={students}\r\n        lecturers={lecturers}\r\n        onClose={closeAddModal}\r\n        onSubmit={handleAddUser}\r\n        onFormChange={handleFormChange}\r\n        onAddRole={addRole}\r\n        onRemoveRole={removeRole}\r\n        onUpdateRoleEntity={updateRoleEntity}\r\n      />\r\n\r\n      {/* Edit User Modal */}\r\n      <UserFormModal\r\n        isOpen={isEditModalOpen}\r\n        isEdit={true}\r\n        formData={formData}\r\n        formError={formError}\r\n        actionLoading={actionLoading}\r\n        students={students}\r\n        lecturers={lecturers}\r\n        onClose={closeEditModal}\r\n        onSubmit={handleEditUser}\r\n        onFormChange={handleFormChange}\r\n        onAddRole={addRole}\r\n        onRemoveRole={removeRole}\r\n        onUpdateRoleEntity={updateRoleEntity}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserManagement;\r\n"],"names":["PageHeader","title","subtitle","showBack","backUrl","actions","breadcrumbs","icon","navigate","useNavigate","handleBack","jsxs","jsx","crumb","index","ArrowLeft","UserStatsCards","stats","statItems","Users","Shield","item","initialFormData","getRoleColor","role","getRoleLabel","getSqlValue","extractString","availableRoles","UserTable","users","loading","currentPage","totalUsers","itemsPerPage","onPageChange","onEditUser","onDeleteUser","totalPages","user","UserTableRow","ChevronLeft","ChevronRight","onEdit","onDelete","userName","roles","contact","entityInfo","entities","roleObj","idx","info","Mail","Phone","Edit","Trash2","UserFormModal","isOpen","isEdit","formData","formError","actionLoading","students","lecturers","onClose","onSubmit","onFormChange","onAddRole","onRemoveRole","onUpdateRoleEntity","submitLabel","X","e","RoleEntry","entityType","entityId","r","fr","Loader","onUpdateEntity","onRemove","showStudentSelect","showLecturerSelect","s","l","useUsersList","params","options","key","useQuery","apiService","usersQueryRootKey","useStudentsList","kode_prodi","useLecturersList","useCreateUser","qc","useQueryClient","useMutation","payload","args","useUpdateUser","id","data","useDeleteUser","useUserManagement","setCurrentPage","useState","setTotalUsers","searchTerm","setSearchTerm","selectedRole","setSelectedRole","isAddModalOpen","setIsAddModalOpen","isEditModalOpen","setIsEditModalOpen","editingUser","setEditingUser","setFormData","setFormError","setActionLoading","setStudents","setLecturers","studentsData","isStudentsLoading","studentsError","lecturersData","isLecturersLoading","lecturersError","usersParams","useMemo","usersQuery","createUserMutation","updateUserMutation","deleteUserMutation","useEffect","loadError","userRoles","studentRole","lecturerRole","enriched","filteredUsers","userStats","allRoles","u","openAddModal","useCallback","closeAddModal","openEditModal","closeEditModal","handleAddUser","error","handleEditUser","handleDeleteUser","addRole","prev","removeRole","_","i","updateRoleEntity","newRoles","entity_type","entity_id","rest","UserManagement","handleFormChange","Plus","Search","Filter"],"mappings":"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"}