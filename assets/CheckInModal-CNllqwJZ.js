import{j as e}from"./query-vendor-B--u1oZD.js";import{g as l}from"./react-vendor-XXJdR_Id.js";import{b as g}from"./useClasses-BSFNMcQW.js";import{X as h,r as b}from"./ui-vendor-C-UqR_Df.js";const j=({isOpen:r,meetingId:d,courseName:m,onClose:s})=>{const[a,c]=l.useState("Hadir"),[n,o]=l.useState(""),t=g();l.useEffect(()=>{r&&(c("Hadir"),o(""))},[r]);const x=async()=>{if(!(!d||t.isPending))try{await t.mutateAsync({id_pertemuan:d,status_kehadiran:a,deskripsi:n.trim()||void 0}),s(),alert(`Successfully checked in as ${{Hadir:"Present",Izin:"Permission",Sakit:"Sick",Alfa:"Absent",Terlambat:"Late",Pengganti:"Tugas"}[a]}!`)}catch(i){console.error("Check-in failed:",i),alert(`Check-in failed: ${i instanceof Error?i.message:"Unknown error"}`)}};return r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:s}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 sticky top-0 bg-white",children:[e.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-900",children:"Check-in Attendance"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors cursor-pointer",disabled:t.isPending,children:e.jsx(h,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course"}),e.jsx("div",{className:"text-sm text-gray-900",children:m})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attendance Status *"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Hadir","Izin","Sakit","Alfa","Terlambat","Pengganti"].map(i=>e.jsxs("button",{onClick:()=>c(i),disabled:t.isPending,className:`px-3 lg:px-4 py-2 text-xs lg:text-sm font-medium rounded-lg transition-colors cursor-pointer ${a===i?i==="Hadir"?"bg-green-600 text-white":i==="Alfa"?"bg-red-600 text-white":i==="Pengganti"?"bg-purple-600 text-white":"bg-yellow-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"} ${t.isPending?"opacity-50 cursor-not-allowed":""}`,children:[e.jsxs("span",{className:"hidden sm:inline",children:[i==="Hadir"&&"âœ“ Present",i==="Izin"&&"ðŸ“‹ Permission",i==="Sakit"&&"ðŸ¤’ Sick",i==="Alfa"&&"âœ— Absent",i==="Terlambat"&&"â° Late",i==="Pengganti"&&"ðŸ”„ Tugas"]}),e.jsxs("span",{className:"sm:hidden",children:[i==="Hadir"&&"âœ“",i==="Izin"&&"ðŸ“‹",i==="Sakit"&&"ðŸ¤’",i==="Alfa"&&"âœ—",i==="Terlambat"&&"â°",i==="Pengganti"&&"ðŸ”„"," ",i]})]},i))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{id:"description",value:n,onChange:i=>o(i.target.value),disabled:t.isPending,placeholder:"Add a note about your attendance...",rows:3,className:"input-field w-full text-sm resize-none",maxLength:500}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[n.length,"/500 characters"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-end gap-2 sm:gap-3 p-4 border-t border-gray-200 sticky bottom-0 bg-white",children:[e.jsx("button",{onClick:s,disabled:t.isPending,className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer order-2 sm:order-1",children:"Cancel"}),e.jsx("button",{onClick:x,disabled:t.isPending,className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex items-center justify-center gap-2 order-1 sm:order-2",children:t.isPending?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Checking in..."})]}):e.jsx("span",{children:"Confirm Check-in"})})]})]})})]}):null};export{j as C};
//# sourceMappingURL=CheckInModal-CNllqwJZ.js.map
