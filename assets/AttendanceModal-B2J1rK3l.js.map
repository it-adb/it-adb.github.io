{"version":3,"file":"AttendanceModal-B2J1rK3l.js","sources":["../../src/components/shared/AttendanceModal.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Clock, Edit2, User } from 'lucide-react';\r\nimport type { Mahasiswa, SqlNullString } from '../../types';\r\nimport { extractString } from '../../utils/sqlNull';\r\nimport {\r\n  useClassStudents,\r\n  useMeetingAttendances,\r\n  useCreateAttendance,\r\n  useUpdateAttendance,\r\n  useUpdateMeeting,\r\n  useClassMeetings,\r\n} from '../../hooks/useAttendances';\r\nimport { useLecturerAssignments } from '../../hooks/useLecturerAssignments';\r\nimport { useQueries, useQueryClient } from '@tanstack/react-query';\r\nimport { apiService } from '../../services/api';\r\n\r\ninterface AttendanceModalProps {\r\n  selectedMeeting: {\r\n    meetingId: number;\r\n    classId: number;\r\n    title: string;\r\n    subtitle: string;\r\n    dateLabel?: string;\r\n    meetingDateTime?: Date;\r\n    topic?: string;\r\n  } | null;\r\n  onClose: () => void;\r\n}\r\n\r\ntype NullableSqlStringLike = string | SqlNullString | { Time?: string; String?: string } | null | undefined;\r\n\r\nconst getStringValue = (value: NullableSqlStringLike, fallback = ''): string => {\r\n  if (!value) return fallback;\r\n  if (typeof value === 'string') return value;\r\n  if ('String' in value && typeof value.String === 'string') {\r\n    return value.String;\r\n  }\r\n  if ('Time' in value && typeof value.Time === 'string') {\r\n    return value.Time;\r\n  }\r\n  return extractString(value as SqlNullString, fallback);\r\n};\r\n\r\nconst AttendanceModal: React.FC<AttendanceModalProps> = ({ selectedMeeting, onClose }) => {\r\n  const queryClient = useQueryClient();\r\n  \r\n  const { data: studentsRaw, isLoading: studentsLoading } = useClassStudents(\r\n    selectedMeeting?.classId\r\n  );\r\n  const { data: attendancesRaw, isLoading: attendancesLoading } = useMeetingAttendances(\r\n    selectedMeeting?.meetingId\r\n  );\r\n  const { data: meetingsData, refetch: refetchMeetings } = useClassMeetings(selectedMeeting?.classId);\r\n  const students = React.useMemo(() => studentsRaw ?? [], [studentsRaw]);\r\n  const attendances = React.useMemo(() => attendancesRaw ?? [], [attendancesRaw]);\r\n\r\n  // Fetch lecturer assignments for this class\r\n  const { data: lecturerAssignments = [] } = useLecturerAssignments({\r\n    id_kelas: selectedMeeting?.classId ? String(selectedMeeting.classId) : undefined,\r\n  });\r\n\r\n  // Extract unique lecturer IDs\r\n  const lecturerIds = React.useMemo(() => {\r\n    const idSet = new Set<string>();\r\n    lecturerAssignments.forEach((assignment) => {\r\n      const id = extractString(assignment.id_dosen as string | SqlNullString);\r\n      if (id) idSet.add(id);\r\n    });\r\n    return Array.from(idSet);\r\n  }, [lecturerAssignments]);\r\n\r\n  // Fetch lecturer details for all assigned lecturers\r\n  const lecturerQueryResults = useQueries({\r\n    queries: lecturerIds.map((id) => ({\r\n      queryKey: ['lecturer', id],\r\n      queryFn: () => apiService.getLecturerByID(id),\r\n      enabled: !!id,\r\n    })),\r\n  });\r\n\r\n  // Create lookup map for lecturer names\r\n  const lecturerLookup = React.useMemo(() => {\r\n    const lookup: Record<string, string> = {};\r\n    lecturerQueryResults.forEach((q) => {\r\n      const lecturer = q.data as { id: string; nama_dosen: string } | undefined;\r\n      if (lecturer?.id && lecturer?.nama_dosen) {\r\n        lookup[lecturer.id] = lecturer.nama_dosen;\r\n      }\r\n    });\r\n    return lookup;\r\n  }, [lecturerQueryResults]);\r\n\r\n  // Find the current meeting from the fetched meetings data to get updated values\r\n  const currentMeeting = React.useMemo(() => {\r\n    if (!selectedMeeting || !meetingsData || meetingsData.length === 0) return null;\r\n    const found = meetingsData.find(m => m.id === selectedMeeting.meetingId);\r\n    if (!found) return null;\r\n\r\n    // Parse the meeting date and time - handle both SqlNullString/SqlNullTime and plain strings\r\n    let tglPertemuan = '';\r\n    let jamPertemuan = '';\r\n    let topik = '';\r\n    let idDosen = '';\r\n    let realisasiTopik = '';\r\n    let catatanPertemuan = '';\r\n\r\n    // Handle tgl_pertemuan (could be string, SqlNullTime with Time field, or object with String field)\r\n    tglPertemuan = getStringValue(found.tgl_pertemuan as NullableSqlStringLike, '');\r\n\r\n    // Handle jam_pertemuan\r\n    jamPertemuan = getStringValue(found.jam_pertemuan as NullableSqlStringLike, '');\r\n\r\n    // Handle topik\r\n    topik = getStringValue(found.topik as NullableSqlStringLike, '');\r\n\r\n    // Handle id_dosen\r\n    idDosen = getStringValue(found.id_dosen as NullableSqlStringLike, '');\r\n\r\n    // Handle realisasi_topik (realized/actual topic)\r\n    realisasiTopik = getStringValue(found.realisasi_topik as NullableSqlStringLike, '');\r\n\r\n    // Handle catatan_pertemuan (meeting notes)\r\n    catatanPertemuan = getStringValue(found.catatan_pertemuan as NullableSqlStringLike, '');\r\n\r\n    // Handle absensi_aktif (boolean or SqlNullBool)\r\n    let absensiAktif = false;\r\n    if (found.absensi_aktif !== null && found.absensi_aktif !== undefined) {\r\n      if (typeof found.absensi_aktif === 'boolean') {\r\n        absensiAktif = found.absensi_aktif;\r\n      } else if (typeof found.absensi_aktif === 'object' && 'Bool' in found.absensi_aktif) {\r\n        absensiAktif = found.absensi_aktif.Valid ? found.absensi_aktif.Bool : false;\r\n      }\r\n    }\r\n\r\n    let meetingDateTime: Date | undefined;\r\n    if (tglPertemuan && jamPertemuan) {\r\n      // Extract just the date part (YYYY-MM-DD) and time part (HH:MM:SS)\r\n      const datePart = tglPertemuan.includes('T') ? tglPertemuan.split('T')[0] : tglPertemuan.split(' ')[0] || tglPertemuan;\r\n      const timePart = jamPertemuan.length === 5 ? `${jamPertemuan}:00` : jamPertemuan.split('.')[0] || jamPertemuan;\r\n      const dateTimeStr = `${datePart}T${timePart}`;\r\n      meetingDateTime = new Date(dateTimeStr);\r\n    }\r\n\r\n    return {\r\n      meetingDateTime,\r\n      topic: topik,\r\n      lecturerId: idDosen,\r\n      absensiAktif,\r\n      realisasiTopik,\r\n      catatanPertemuan,\r\n    };\r\n  }, [selectedMeeting, meetingsData]);\r\n\r\n  const createAttendanceMutation = useCreateAttendance();\r\n  const updateAttendanceMutation = useUpdateAttendance();\r\n  const updateMeetingMutation = useUpdateMeeting();\r\n\r\n  const [editingStates, setEditingStates] = React.useState<Record<string, string>>({});\r\n  const [isBulkEditing, setIsBulkEditing] = React.useState(false);\r\n  const [isSavingAll, setIsSavingAll] = React.useState(false);\r\n  const [isEditingMeeting, setIsEditingMeeting] = React.useState(false);\r\n  const [editedMeetingDate, setEditedMeetingDate] = React.useState('');\r\n  const [editedMeetingTime, setEditedMeetingTime] = React.useState('');\r\n  const [editedMeetingTopic, setEditedMeetingTopic] = React.useState('');\r\n  const [editedMeetingLecturer, setEditedMeetingLecturer] = React.useState('');\r\n  const [editedAbsensiAktif, setEditedAbsensiAktif] = React.useState(false);\r\n  const [editedRealisasiTopik, setEditedRealisasiTopik] = React.useState('');\r\n  const [editedCatatanPertemuan, setEditedCatatanPertemuan] = React.useState('');\r\n\r\n  const mergedAttendance: Array<Mahasiswa & { status: string; attendanceId?: number }> = React.useMemo(() => {\r\n    if (!students || students.length === 0) return [];\r\n    const attendanceByNim = new Map(\r\n      attendances.map((a) => [\r\n        a.nim,\r\n        {\r\n          status: extractString(a.status_kehadiran as string | SqlNullString | undefined | null, ''),\r\n          id: a.id,\r\n        },\r\n      ])\r\n    );\r\n    return students.map((s) => {\r\n      const record = attendanceByNim.get(s.nim);\r\n      return {\r\n        ...s,\r\n        status: record?.status || 'Belum Absen',\r\n        attendanceId: record?.id,\r\n      };\r\n    });\r\n  }, [students, attendances]);\r\n\r\n  const handleStatusChange = async (nim: string, newStatus: string, attendanceId?: number) => {\r\n    if (!selectedMeeting) return;\r\n\r\n    const currentTime = new Date().toISOString();\r\n\r\n    try {\r\n      if (attendanceId) {\r\n        await updateAttendanceMutation.mutateAsync({\r\n          id: attendanceId,\r\n          data: {\r\n            status_kehadiran: newStatus,\r\n            waktu_masuk: currentTime\r\n          }\r\n        });\r\n      } else {\r\n        await createAttendanceMutation.mutateAsync({\r\n          id_pertemuan: selectedMeeting.meetingId,\r\n          nim,\r\n          status_kehadiran: newStatus,\r\n          waktu_masuk: currentTime\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to update attendance:', error);\r\n      alert(`Failed to update attendance: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    }\r\n  };\r\n\r\n  const handleSaveAll = async () => {\r\n    if (!selectedMeeting || Object.keys(editingStates).length === 0) return;\r\n\r\n    setIsSavingAll(true);\r\n    const errors: string[] = [];\r\n\r\n    const currentTime = new Date().toISOString();\r\n\r\n    for (const nim of Object.keys(editingStates)) {\r\n      const newStatus = editingStates[nim];\r\n      const student = mergedAttendance.find(s => s.nim === nim);\r\n\r\n      if (!student) continue;\r\n\r\n      try {\r\n        if (student.attendanceId) {\r\n          await updateAttendanceMutation.mutateAsync({\r\n            id: student.attendanceId,\r\n            data: {\r\n              status_kehadiran: newStatus,\r\n              waktu_masuk: currentTime\r\n            }\r\n          });\r\n        } else {\r\n          await createAttendanceMutation.mutateAsync({\r\n            id_pertemuan: selectedMeeting.meetingId,\r\n            nim,\r\n            status_kehadiran: newStatus,\r\n            waktu_masuk: currentTime\r\n          });\r\n        }\r\n      } catch (error) {\r\n        console.error(`Failed to update attendance for ${nim}:`, error);\r\n        errors.push(`${student.nama} (${nim})`);\r\n      }\r\n    }\r\n\r\n    setIsSavingAll(false);\r\n\r\n    if (errors.length > 0) {\r\n      alert(`Failed to update attendance for: ${errors.join(', ')}`);\r\n    } else {\r\n      setEditingStates({});\r\n      setIsBulkEditing(false);\r\n    }\r\n  };\r\n\r\n  const handleEditAll = () => {\r\n    const allStates: Record<string, string> = {};\r\n    mergedAttendance.forEach(s => {\r\n      allStates[s.nim] = s.status === 'Belum Absen' ? 'Hadir' : (s.status || 'Hadir');\r\n    });\r\n    setEditingStates(allStates);\r\n    setIsBulkEditing(true);\r\n  };\r\n\r\n  const handleCancelAll = () => {\r\n    setEditingStates({});\r\n    setIsBulkEditing(false);\r\n  };\r\n\r\n  const handleUpdateMeeting = async () => {\r\n    if (!selectedMeeting || !editedMeetingDate || !editedMeetingTime) return;\r\n\r\n    try {\r\n      const timeWithSeconds = editedMeetingTime.length === 5 ? `${editedMeetingTime}:00` : editedMeetingTime;\r\n\r\n      await updateMeetingMutation.mutateAsync({\r\n        id: selectedMeeting.meetingId,\r\n        data: {\r\n          tgl_pertemuan: editedMeetingDate,\r\n          jam_pertemuan: timeWithSeconds,\r\n          topik: editedMeetingTopic || undefined,\r\n          id_dosen: editedMeetingLecturer || undefined,\r\n          absensi_aktif: editedAbsensiAktif,\r\n          realisasi_topik: editedRealisasiTopik || undefined,\r\n          catatan_pertemuan: editedCatatanPertemuan || undefined,\r\n        }\r\n      });\r\n      // Manually refetch to ensure we get the latest data\r\n      await refetchMeetings();\r\n      // Invalidate all lecturer-meeting-recap queries to sync with LecturerDashboard\r\n      await queryClient.invalidateQueries({\r\n        queryKey: ['lecturer-meeting-recap'],\r\n      });\r\n\r\n      setIsEditingMeeting(false);\r\n      alert('Meeting schedule updated successfully!');\r\n    } catch (error) {\r\n      console.error('Failed to update meeting:', error);\r\n      alert(`Failed to update meeting: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    }\r\n  };\r\n\r\n  // Sync edit form values with currentMeeting (which updates from API after save)\r\n  React.useEffect(() => {\r\n    const meetingDateTime = currentMeeting?.meetingDateTime || selectedMeeting?.meetingDateTime;\r\n    const topic = currentMeeting?.topic || selectedMeeting?.topic || '';\r\n    const lecturerId = currentMeeting?.lecturerId || '';\r\n    const absensiAktif = currentMeeting?.absensiAktif || false;\r\n    const realisasiTopik = currentMeeting?.realisasiTopik || '';\r\n    const catatanPertemuan = currentMeeting?.catatanPertemuan || '';\r\n\r\n    if (meetingDateTime) {\r\n      const date = new Date(meetingDateTime);\r\n      const dateStr = date.toISOString().split('T')[0];\r\n      const timeStr = `${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;\r\n\r\n      setEditedMeetingDate(dateStr);\r\n      setEditedMeetingTime(timeStr);\r\n      setEditedMeetingTopic(topic);\r\n      setEditedMeetingLecturer(lecturerId);\r\n      setEditedAbsensiAktif(absensiAktif);\r\n      setEditedRealisasiTopik(realisasiTopik);\r\n      setEditedCatatanPertemuan(catatanPertemuan);\r\n    }\r\n  }, [currentMeeting?.meetingDateTime, currentMeeting?.topic, currentMeeting?.lecturerId, currentMeeting?.absensiAktif, currentMeeting?.realisasiTopik, currentMeeting?.catatanPertemuan, selectedMeeting?.meetingDateTime, selectedMeeting?.topic]);\r\n\r\n  const handleStartEditMeeting = () => {\r\n    setIsEditingMeeting(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setEditingStates({});\r\n    setIsBulkEditing(false);\r\n    setIsEditingMeeting(false);\r\n    onClose();\r\n  };\r\n\r\n  // Compute current date label from fresh meeting data\r\n  const displayDateTime = currentMeeting?.meetingDateTime || selectedMeeting?.meetingDateTime;\r\n  const displayDateLabel = React.useMemo(() => {\r\n    if (!displayDateTime) return selectedMeeting?.dateLabel;\r\n    const date = new Date(displayDateTime);\r\n    return date.toLocaleDateString('en-US', {\r\n      weekday: 'short',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      year: 'numeric'\r\n    });\r\n  }, [displayDateTime, selectedMeeting?.dateLabel]);\r\n\r\n  const displayTopic = currentMeeting?.topic || selectedMeeting?.topic;\r\n\r\n  if (!selectedMeeting) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-2 sm:p-4 bg-black/30\">\r\n      <div className=\"w-full h-full max-h-screen sm:max-h-[90vh] max-w-6xl bg-white rounded-lg shadow-lg flex flex-col overflow-hidden\">\r\n        {/* Header with Close Button */}\r\n        <div className=\"px-3 sm:px-4 py-2 border-b border-gray-200 flex items-center justify-end flex-shrink-0\">\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"px-3 py-1.5 text-sm rounded hover:bg-gray-100 cursor-pointer\"\r\n            aria-label=\"Close\"\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n\r\n        {/* Main Content - Two Columns */}\r\n        <div className=\"flex-1 flex overflow-hidden min-h-0\">\r\n          {/* Left Column - Meeting Details */}\r\n          <div className=\"w-full sm:w-1/3 border-r border-gray-200 overflow-y-auto p-3 sm:p-4\">\r\n            {/* Course Info */}\r\n            <div className=\"mb-4 pb-3 border-b border-gray-200\">\r\n              <div className=\"text-xs sm:text-sm text-gray-500 truncate\">{selectedMeeting.subtitle}</div>\r\n              <h3 className=\"text-sm sm:text-base font-semibold text-gray-900 line-clamp-2\">{selectedMeeting.title}</h3>\r\n              {displayDateLabel && (\r\n                <div className=\"text-xs text-gray-500 mt-0.5\">{displayDateLabel}</div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Meeting Form */}\r\n            <div className=\"space-y-3\">\r\n              {/* Read-only Fields */}\r\n              <div>\r\n                <label className=\"block text-xs font-medium text-gray-600 mb-1\">Course Week</label>\r\n                <div className=\"text-sm text-gray-900 font-mono\">{selectedMeeting.subtitle}</div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-xs font-medium text-gray-600 mb-1\">Course Code - Name</label>\r\n                <div className=\"text-sm text-gray-900\">{selectedMeeting.title}</div>\r\n              </div>\r\n\r\n              {/* Editable Fields */}\r\n              {isEditingMeeting ? (\r\n                <>\r\n                  <div>\r\n                    <label className=\"block text-xs font-medium text-gray-700 mb-1\">Date</label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={editedMeetingDate}\r\n                      onChange={(e) => setEditedMeetingDate(e.target.value)}\r\n                      className=\"input-field w-full text-sm\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-xs font-medium text-gray-700 mb-1\">Time</label>\r\n                    <input\r\n                      type=\"time\"\r\n                      value={editedMeetingTime}\r\n                      onChange={(e) => setEditedMeetingTime(e.target.value)}\r\n                      className=\"input-field w-full text-sm\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-xs font-medium text-gray-700 mb-1\">Topic</label>\r\n                    <textarea\r\n                      value={editedMeetingTopic}\r\n                      onChange={(e) => setEditedMeetingTopic(e.target.value)}\r\n                      className=\"input-field w-full text-sm\"\r\n                      rows={3}\r\n                      placeholder=\"Enter meeting topic or description...\"\r\n                      maxLength={500}\r\n                    />\r\n                    <div className=\"text-xs text-gray-500 mt-1\">{editedMeetingTopic.length}/500 characters</div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-xs font-medium text-gray-700 mb-1\">Realized Topic</label>\r\n                    <textarea\r\n                      value={editedRealisasiTopik}\r\n                      onChange={(e) => setEditedRealisasiTopik(e.target.value)}\r\n                      className=\"input-field w-full text-sm\"\r\n                      rows={3}\r\n                      placeholder=\"Enter actual/realized topic delivered...\"\r\n                      maxLength={500}\r\n                    />\r\n                    <div className=\"text-xs text-gray-500 mt-1\">{editedRealisasiTopik.length}/500 characters</div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-xs font-medium text-gray-700 mb-1\">Meeting Notes</label>\r\n                    <textarea\r\n                      value={editedCatatanPertemuan}\r\n                      onChange={(e) => setEditedCatatanPertemuan(e.target.value)}\r\n                      className=\"input-field w-full text-sm\"\r\n                      rows={3}\r\n                      placeholder=\"Enter any notes or observations from this meeting...\"\r\n                      maxLength={500}\r\n                    />\r\n                    <div className=\"text-xs text-gray-500 mt-1\">{editedCatatanPertemuan.length}/500 characters</div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-xs font-medium text-gray-700 mb-1\">Lecturer</label>\r\n                    <select\r\n                      value={editedMeetingLecturer}\r\n                      onChange={(e) => setEditedMeetingLecturer(e.target.value)}\r\n                      className=\"input-field w-full text-sm\"\r\n                    >\r\n                      <option value=\"\">- No Lecturer -</option>\r\n                      {lecturerIds.map((lecturerId) => (\r\n                        <option key={lecturerId} value={lecturerId}>\r\n                          {lecturerLookup[lecturerId] || lecturerId}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"flex items-center gap-2 text-xs font-medium text-gray-700\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={editedAbsensiAktif}\r\n                        onChange={(e) => setEditedAbsensiAktif(e.target.checked)}\r\n                        className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\r\n                      />\r\n                      <span>Enable Attendance</span>\r\n                    </label>\r\n                    <p className=\"text-xs text-gray-500 mt-1 ml-6\">\r\n                      When enabled, students can check-in for attendance\r\n                    </p>\r\n                  </div>\r\n\r\n                  <div className=\"flex gap-2 pt-2\">\r\n                    <button\r\n                      onClick={handleUpdateMeeting}\r\n                      disabled={updateMeetingMutation.isPending || !editedMeetingDate || !editedMeetingTime}\r\n                      className=\"px-3 py-1.5 text-sm font-medium rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex-1\"\r\n                    >\r\n                      {updateMeetingMutation.isPending ? 'Saving...' : 'Save Changes'}\r\n                    </button>\r\n                    <button\r\n                      onClick={() => setIsEditingMeeting(false)}\r\n                      disabled={updateMeetingMutation.isPending}\r\n                      className=\"px-3 py-1.5 text-sm font-medium rounded bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 cursor-pointer\"\r\n                    >\r\n                      Cancel\r\n                    </button>\r\n                  </div>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <div>\r\n                    <label className=\"block text-xs font-medium text-gray-600 mb-1\">Date</label>\r\n                    <div className=\"text-sm text-gray-900\">{editedMeetingDate ? new Date(`${editedMeetingDate}T00:00`).toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric', year: 'numeric' }) : '-'}</div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-xs font-medium text-gray-600 mb-1\">Time</label>\r\n                    <div className=\"text-sm text-gray-900 font-mono flex items-center\">\r\n                      <Clock className=\"h-3 w-3 mr-2\" />\r\n                      {editedMeetingTime || '-'}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {displayTopic && (\r\n                    <div>\r\n                      <label className=\"block text-xs font-medium text-gray-600 mb-1\">Topic</label>\r\n                      <div className=\"text-sm text-gray-900 break-words\">{displayTopic}</div>\r\n                    </div>\r\n                  )}\r\n\r\n                  <div>\r\n                    <label className=\"block text-xs font-medium text-gray-600 mb-1\">Realized Topic</label>\r\n                    <div className=\"text-sm text-gray-900 break-words\">{editedRealisasiTopik || '-'}</div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-xs font-medium text-gray-600 mb-1\">Meeting Notes</label>\r\n                    <div className=\"text-sm text-gray-900 break-words\">{editedCatatanPertemuan || '-'}</div>\r\n                  </div>\r\n\r\n                  {currentMeeting?.lecturerId && lecturerLookup[currentMeeting.lecturerId] && (\r\n                    <div>\r\n                      <label className=\"block text-xs font-medium text-gray-600 mb-1\">Lecturer</label>\r\n                      <div className=\"text-sm text-gray-900 flex items-center\">\r\n                        <User className=\"h-3 w-3 mr-2 flex-shrink-0\" />\r\n                        {lecturerLookup[currentMeeting.lecturerId]}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  <div>\r\n                    <label className=\"block text-xs font-medium text-gray-600 mb-1\">Attendance Status</label>\r\n                    <div className={`text-sm flex items-center gap-2 ${currentMeeting?.absensiAktif ? 'text-green-600' : 'text-gray-600'}`}>\r\n                      <div className={`h-2 w-2 rounded-full ${currentMeeting?.absensiAktif ? 'bg-green-600' : 'bg-gray-400'}`} />\r\n                      {currentMeeting?.absensiAktif ? 'Enabled' : 'Disabled'}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <button\r\n                    onClick={handleStartEditMeeting}\r\n                    className=\"w-full px-3 py-2 text-sm font-medium rounded bg-blue-600 text-white hover:bg-blue-700 cursor-pointer flex items-center justify-center gap-2 mt-2\"\r\n                    title=\"Edit meeting schedule\"\r\n                  >\r\n                    <Edit2 className=\"h-4 w-4\" />\r\n                    <span>Edit Meeting</span>\r\n                  </button>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right Column - Attendance */}\r\n          <div className=\"w-full sm:w-2/3 overflow-hidden flex flex-col min-h-0\">\r\n            {/* Attendance Header */}\r\n            <div className=\"px-3 sm:px-4 py-3 border-b border-gray-200 flex-shrink-0\">\r\n              <h2 className=\"text-base sm:text-lg font-semibold text-gray-900\">Attendance</h2>\r\n            </div>\r\n\r\n            {/* Attendance Content */}\r\n            <div className=\"flex-1 flex flex-col overflow-hidden min-h-0\">\r\n\r\n          {(studentsLoading || attendancesLoading) ? (\r\n            <div className=\"text-center text-gray-500 py-6\">Loading students and attendances...</div>\r\n          ) : mergedAttendance.length === 0 ? (\r\n            <div className=\"text-center text-gray-500 py-6\">No students found for this class.</div>\r\n          ) : (\r\n            <>\r\n              {/* Bulk Action Buttons */}\r\n              <div className=\"mb-3 sm:mb-4 flex gap-1 sm:gap-2 justify-between flex-wrap\">\r\n                {/* Enable Attendance Toggle */}\r\n                <div className=\"flex items-center gap-2\">\r\n                  <button\r\n                    onClick={async () => {\r\n                      if (!selectedMeeting) return;\r\n                      try {\r\n                        await updateMeetingMutation.mutateAsync({\r\n                          id: selectedMeeting.meetingId,\r\n                          data: {\r\n                            tgl_pertemuan: editedMeetingDate,\r\n                            jam_pertemuan: editedMeetingTime.length === 5 ? `${editedMeetingTime}:00` : editedMeetingTime,\r\n                            absensi_aktif: !editedAbsensiAktif,\r\n                          }\r\n                        });\r\n                        setEditedAbsensiAktif(!editedAbsensiAktif);\r\n                        await refetchMeetings();\r\n                        // Invalidate all lecturer-meeting-recap queries to sync with LecturerDashboard\r\n                        await queryClient.invalidateQueries({\r\n                          queryKey: ['lecturer-meeting-recap'],\r\n                        });\r\n                      } catch (error) {\r\n                        console.error('Failed to toggle attendance:', error);\r\n                        alert(`Failed to toggle attendance: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n                      }\r\n                    }}\r\n                    disabled={updateMeetingMutation.isPending}\r\n                    className={`px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm font-medium rounded flex items-center gap-1 whitespace-nowrap cursor-pointer transition-colors ${\r\n                      editedAbsensiAktif\r\n                        ? 'bg-green-600 text-white hover:bg-green-700'\r\n                        : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                    } disabled:opacity-50 disabled:cursor-not-allowed`}\r\n                    title={editedAbsensiAktif ? 'Disable attendance' : 'Enable attendance'}\r\n                  >\r\n                    <div className={`h-2 w-2 rounded-full ${editedAbsensiAktif ? 'bg-white' : 'bg-gray-500'}`} />\r\n                    {updateMeetingMutation.isPending ? 'Toggling...' : (editedAbsensiAktif ? 'Attendance On' : 'Attendance Off')}\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Edit/Save/Cancel Buttons */}\r\n                <div className=\"flex gap-1 sm:gap-2\">\r\n                  {isBulkEditing ? (\r\n                    <>\r\n                      <button\r\n                        onClick={handleSaveAll}\r\n                        disabled={isSavingAll || Object.keys(editingStates).length === 0}\r\n                        className=\"px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm font-medium rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer whitespace-nowrap\"\r\n                      >\r\n                        {isSavingAll ? 'Saving...' : `Save (${Object.keys(editingStates).length})`}\r\n                      </button>\r\n                      <button\r\n                        onClick={handleCancelAll}\r\n                        disabled={isSavingAll}\r\n                        className=\"px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm font-medium rounded bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 cursor-pointer whitespace-nowrap\"\r\n                      >\r\n                        Cancel\r\n                      </button>\r\n                    </>\r\n                  ) : (\r\n                    <button\r\n                      onClick={handleEditAll}\r\n                      className=\"px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm font-medium rounded bg-primary-600 text-white hover:bg-primary-700 cursor-pointer whitespace-nowrap\"\r\n                    >\r\n                      Edit All\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-2 sm:overflow-x-auto sm:border sm:border-gray-200 sm:rounded-lg\">\r\n                {/* Mobile Card View */}\r\n                <div className=\"sm:hidden space-y-2\">\r\n                  {mergedAttendance.map((s) => {\r\n                    const status = s.status;\r\n                    const isEditing = editingStates[s.nim] !== undefined;\r\n                    const displayStatus = isEditing ? editingStates[s.nim] : status;\r\n\r\n                    return (\r\n                      <div key={s.nim} className=\"border border-gray-200 rounded-lg p-2 bg-white\">\r\n                        <div className=\"flex items-start justify-between gap-2 mb-2\">\r\n                          <div className=\"flex-1 min-w-0\">\r\n                            <p className=\"text-xs font-semibold text-gray-900 break-words\">{s.nama}</p>\r\n                            <p className=\"text-xs text-gray-500 font-mono\">{s.nim}</p>\r\n                          </div>\r\n                          {!isEditing && (\r\n                            <span className={`flex-shrink-0 px-2 py-0.5 rounded text-xs font-medium inline-block ${\r\n                              status === 'Hadir' ? 'bg-green-100 text-green-700' :\r\n                                status === 'Izin' || status === 'Sakit' ? 'bg-yellow-100 text-yellow-700' :\r\n                                  status === 'Terlambat' ? 'bg-blue-100 text-blue-700' :\r\n                                    status === 'Pengganti' ? 'bg-purple-100 text-purple-700' :\r\n                                      status === 'Belum Absen' ? 'bg-gray-100 text-gray-700' :\r\n                                        'bg-red-100 text-red-700'\r\n                            }`}>\r\n                              {status || 'Belum Absen'}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n\r\n                        {isEditing ? (\r\n                          <div className=\"space-y-2\">\r\n                            <div className=\"grid grid-cols-3 gap-0.5\">\r\n                              {['Hadir', 'Izin', 'Sakit', 'Alfa', 'Terlambat', 'Pengganti'].map(statusOption => (\r\n                                <button\r\n                                  key={statusOption}\r\n                                  onClick={() => setEditingStates(prev => ({ ...prev, [s.nim]: statusOption }))}\r\n                                  className={`px-1.5 py-1 text-xs font-medium rounded transition-colors cursor-pointer ${\r\n                                    displayStatus === statusOption\r\n                                      ? 'bg-primary-600 text-white'\r\n                                      : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                                  }`}\r\n                                >\r\n                                  {statusOption}\r\n                                </button>\r\n                              ))}\r\n                            </div>\r\n                            <div className=\"flex gap-1\">\r\n                              <button\r\n                                onClick={async () => {\r\n                                  await handleStatusChange(s.nim, displayStatus, s.attendanceId);\r\n                                  setEditingStates(prev => {\r\n                                    const newStates = { ...prev };\r\n                                    delete newStates[s.nim];\r\n                                    return newStates;\r\n                                  });\r\n                                }}\r\n                                disabled={createAttendanceMutation.isPending || updateAttendanceMutation.isPending}\r\n                                className=\"flex-1 px-2 py-1 text-xs font-medium rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-50 cursor-pointer\"\r\n                              >\r\n                                {(createAttendanceMutation.isPending || updateAttendanceMutation.isPending) ? 'Saving...' : 'Save'}\r\n                              </button>\r\n                              <button\r\n                                onClick={() => setEditingStates(prev => {\r\n                                  const newStates = { ...prev };\r\n                                  delete newStates[s.nim];\r\n                                  return newStates;\r\n                                })}\r\n                                disabled={createAttendanceMutation.isPending || updateAttendanceMutation.isPending}\r\n                                className=\"px-2 py-1 text-xs font-medium rounded bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 cursor-pointer\"\r\n                              >\r\n                                X\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                        ) : (\r\n                          <button\r\n                            onClick={() => setEditingStates(prev => ({ ...prev, [s.nim]: status === 'Belum Absen' ? 'Hadir' : (status || 'Hadir') }))}\r\n                            className=\"w-full px-2 py-1 text-xs font-medium rounded bg-primary-600 text-white hover:bg-primary-700 cursor-pointer\"\r\n                          >\r\n                            Edit\r\n                          </button>\r\n                        )}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n\r\n                {/* Desktop Table View */}\r\n                <table className=\"hidden sm:table w-full text-xs sm:text-sm\">\r\n                  <tbody>\r\n                    {mergedAttendance.map((s) => {\r\n                      const status = s.status;\r\n                      const isEditing = editingStates[s.nim] !== undefined;\r\n                      const displayStatus = isEditing ? editingStates[s.nim] : status;\r\n\r\n                      return (\r\n                        <tr key={s.nim} className=\"border-b border-gray-100 hover:bg-gray-50\">\r\n                          <td className=\"px-2 sm:px-3 py-2 font-mono text-gray-900 whitespace-nowrap text-xs\">{s.nim}</td>\r\n                          <td className=\"px-2 sm:px-3 py-2 text-gray-900\">{s.nama}</td>\r\n                          <td className=\"px-2 sm:px-3 py-2\">\r\n                            {isEditing ? (\r\n                              <div className=\"flex gap-1 flex-wrap\">\r\n                                {['Hadir', 'Izin', 'Sakit', 'Alfa', 'Terlambat', 'Pengganti'].map(statusOption => (\r\n                                  <button\r\n                                    key={statusOption}\r\n                                    onClick={() => setEditingStates(prev => ({ ...prev, [s.nim]: statusOption }))}\r\n                                    className={`px-2 py-0.5 text-xs font-medium rounded transition-colors cursor-pointer ${\r\n                                      displayStatus === statusOption\r\n                                        ? 'bg-primary-600 text-white'\r\n                                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                                    }`}\r\n                                  >\r\n                                    {statusOption}\r\n                                  </button>\r\n                                ))}\r\n                              </div>\r\n                            ) : (\r\n                              <span className={`px-2 py-0.5 rounded text-xs font-medium inline-block ${\r\n                                status === 'Hadir' ? 'bg-green-100 text-green-700' :\r\n                                  status === 'Izin' || status === 'Sakit' ? 'bg-yellow-100 text-yellow-700' :\r\n                                    status === 'Terlambat' ? 'bg-blue-100 text-blue-700' :\r\n                                      status === 'Pengganti' ? 'bg-purple-100 text-purple-700' :\r\n                                        status === 'Belum Absen' ? 'bg-gray-100 text-gray-700' :\r\n                                          'bg-red-100 text-red-700'\r\n                              }`}>\r\n                                {status || 'Belum Absen'}\r\n                              </span>\r\n                            )}\r\n                          </td>\r\n                          <td className=\"px-2 sm:px-3 py-2 whitespace-nowrap\">\r\n                            {isEditing ? (\r\n                              <div className=\"flex gap-1\">\r\n                                <button\r\n                                  onClick={async () => {\r\n                                    await handleStatusChange(s.nim, displayStatus, s.attendanceId);\r\n                                    setEditingStates(prev => {\r\n                                      const newStates = { ...prev };\r\n                                      delete newStates[s.nim];\r\n                                      return newStates;\r\n                                    });\r\n                                  }}\r\n                                  disabled={createAttendanceMutation.isPending || updateAttendanceMutation.isPending}\r\n                                  className=\"px-2 py-1 text-xs font-medium rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-50 cursor-pointer\"\r\n                                >\r\n                                  {(createAttendanceMutation.isPending || updateAttendanceMutation.isPending) ? 'Saving...' : 'Save'}\r\n                                </button>\r\n                                <button\r\n                                  onClick={() => setEditingStates(prev => {\r\n                                    const newStates = { ...prev };\r\n                                    delete newStates[s.nim];\r\n                                    return newStates;\r\n                                  })}\r\n                                  disabled={createAttendanceMutation.isPending || updateAttendanceMutation.isPending}\r\n                                  className=\"px-2 py-1 text-xs font-medium rounded bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 cursor-pointer\"\r\n                                >\r\n                                  Cancel\r\n                                </button>\r\n                              </div>\r\n                            ) : (\r\n                              <button\r\n                                onClick={() => setEditingStates(prev => ({ ...prev, [s.nim]: status === 'Belum Absen' ? 'Hadir' : (status || 'Hadir') }))}\r\n                                className=\"px-2 py-1 text-xs font-medium rounded bg-primary-600 text-white hover:bg-primary-700 cursor-pointer\"\r\n                              >\r\n                                Edit\r\n                              </button>\r\n                            )}\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </>\r\n          )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AttendanceModal;\r\n"],"names":["getStringValue","value","fallback","extractString","AttendanceModal","selectedMeeting","onClose","queryClient","useQueryClient","studentsRaw","studentsLoading","useClassStudents","attendancesRaw","attendancesLoading","useMeetingAttendances","meetingsData","refetchMeetings","useClassMeetings","students","React","attendances","lecturerAssignments","useLecturerAssignments","lecturerIds","idSet","assignment","id","lecturerQueryResults","useQueries","apiService","lecturerLookup","lookup","q","lecturer","currentMeeting","found","m","tglPertemuan","jamPertemuan","topik","idDosen","realisasiTopik","catatanPertemuan","absensiAktif","meetingDateTime","datePart","timePart","dateTimeStr","createAttendanceMutation","useCreateAttendance","updateAttendanceMutation","useUpdateAttendance","updateMeetingMutation","useUpdateMeeting","editingStates","setEditingStates","isBulkEditing","setIsBulkEditing","isSavingAll","setIsSavingAll","isEditingMeeting","setIsEditingMeeting","editedMeetingDate","setEditedMeetingDate","editedMeetingTime","setEditedMeetingTime","editedMeetingTopic","setEditedMeetingTopic","editedMeetingLecturer","setEditedMeetingLecturer","editedAbsensiAktif","setEditedAbsensiAktif","editedRealisasiTopik","setEditedRealisasiTopik","editedCatatanPertemuan","setEditedCatatanPertemuan","mergedAttendance","attendanceByNim","a","record","handleStatusChange","nim","newStatus","attendanceId","currentTime","error","handleSaveAll","errors","student","s","handleEditAll","allStates","handleCancelAll","handleUpdateMeeting","timeWithSeconds","topic","lecturerId","date","dateStr","timeStr","handleStartEditMeeting","handleClose","displayDateTime","displayDateLabel","displayTopic","jsxs","jsx","Fragment","e","Clock","User","Edit2","status","isEditing","displayStatus","statusOption","prev","newStates"],"mappings":"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"}