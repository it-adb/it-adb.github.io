{"version":3,"file":"CheckInModal-Cl6oBmJ-.js","sources":["../../src/components/shared/CheckInModal.tsx"],"sourcesContent":["import React from 'react';\r\nimport { X, Loader2 } from 'lucide-react';\r\nimport { useCheckInAttendance } from '../../hooks/useClasses';\r\n\r\ninterface CheckInModalProps {\r\n  isOpen: boolean;\r\n  meetingId: number | null;\r\n  courseName: string;\r\n  onClose: () => void;\r\n}\r\n\r\nconst CheckInModal: React.FC<CheckInModalProps> = ({\r\n  isOpen,\r\n  meetingId,\r\n  courseName,\r\n  onClose,\r\n}) => {\r\n  const [selectedStatus, setSelectedStatus] = React.useState<'Hadir' | 'Izin' | 'Sakit' | 'Alfa' | 'Terlambat' | 'Pengganti'>('Hadir');\r\n  const [description, setDescription] = React.useState('');\r\n\r\n  const checkInMutation = useCheckInAttendance();\r\n\r\n  // Reset form when modal opens\r\n  React.useEffect(() => {\r\n    if (isOpen) {\r\n      setSelectedStatus('Hadir');\r\n      setDescription('');\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const handleCheckIn = async () => {\r\n    if (!meetingId || checkInMutation.isPending) return;\r\n\r\n    try {\r\n      await checkInMutation.mutateAsync({\r\n        id_pertemuan: meetingId,\r\n        status_kehadiran: selectedStatus,\r\n        deskripsi: description.trim() || undefined\r\n      });\r\n\r\n      onClose();\r\n\r\n      const statusLabels = {\r\n        'Hadir': 'Present',\r\n        'Izin': 'Permission',\r\n        'Sakit': 'Sick',\r\n        'Alfa': 'Absent',\r\n        'Terlambat': 'Late',\r\n        'Pengganti': 'Tugas',\r\n      };\r\n      alert(`Successfully checked in as ${statusLabels[selectedStatus]}!`);\r\n    } catch (err) {\r\n      console.error('Check-in failed:', err);\r\n      alert(`Check-in failed: ${err instanceof Error ? err.message : 'Unknown error'}`);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"fixed inset-0 bg-black/50 z-40\" onClick={onClose} />\r\n      {/* Modal */}\r\n      <div className=\"fixed inset-0 flex items-center justify-center z-50 p-4\">\r\n        <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto\">\r\n          <div className=\"flex items-center justify-between p-4 border-b border-gray-200 sticky top-0 bg-white\">\r\n            <h3 className=\"text-base lg:text-lg font-semibold text-gray-900\">Check-in Attendance</h3>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"text-gray-400 hover:text-gray-600 transition-colors cursor-pointer\"\r\n              disabled={checkInMutation.isPending}\r\n            >\r\n              <X className=\"h-5 w-5\" />\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"p-4 space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Course</label>\r\n              <div className=\"text-sm text-gray-900\">{courseName}</div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Attendance Status *</label>\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                {(['Hadir', 'Izin', 'Sakit', 'Alfa', 'Terlambat', 'Pengganti'] as const).map(status => (\r\n                  <button\r\n                    key={status}\r\n                    onClick={() => setSelectedStatus(status)}\r\n                    disabled={checkInMutation.isPending}\r\n                    className={`px-3 lg:px-4 py-2 text-xs lg:text-sm font-medium rounded-lg transition-colors cursor-pointer ${\r\n                      selectedStatus === status\r\n                        ? status === 'Hadir'\r\n                          ? 'bg-green-600 text-white'\r\n                          : status === 'Alfa'\r\n                          ? 'bg-red-600 text-white'\r\n                          : status === 'Pengganti'\r\n                          ? 'bg-purple-600 text-white'\r\n                          : 'bg-yellow-600 text-white'\r\n                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                    } ${checkInMutation.isPending ? 'opacity-50 cursor-not-allowed' : ''}`}\r\n                  >\r\n                    <span className=\"hidden sm:inline\">\r\n                      {status === 'Hadir' && '‚úì Present'}\r\n                      {status === 'Izin' && 'üìã Permission'}\r\n                      {status === 'Sakit' && 'ü§í Sick'}\r\n                      {status === 'Alfa' && '‚úó Absent'}\r\n                      {status === 'Terlambat' && '‚è∞ Late'}\r\n                      {status === 'Pengganti' && 'üîÑ Tugas'}\r\n                    </span>\r\n                    <span className=\"sm:hidden\">\r\n                      {status === 'Hadir' && '‚úì'}\r\n                      {status === 'Izin' && 'üìã'}\r\n                      {status === 'Sakit' && 'ü§í'}\r\n                      {status === 'Alfa' && '‚úó'}\r\n                      {status === 'Terlambat' && '‚è∞'}\r\n                      {status === 'Pengganti' && 'üîÑ'}\r\n                      {' '}{status}\r\n                    </span>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Description (Optional)\r\n              </label>\r\n              <textarea\r\n                id=\"description\"\r\n                value={description}\r\n                onChange={(e) => setDescription(e.target.value)}\r\n                disabled={checkInMutation.isPending}\r\n                placeholder=\"Add a note about your attendance...\"\r\n                rows={3}\r\n                className=\"input-field w-full text-sm resize-none\"\r\n                maxLength={500}\r\n              />\r\n              <div className=\"text-xs text-gray-500 mt-1\">\r\n                {description.length}/500 characters\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-end gap-2 sm:gap-3 p-4 border-t border-gray-200 sticky bottom-0 bg-white\">\r\n            <button\r\n              onClick={onClose}\r\n              disabled={checkInMutation.isPending}\r\n              className=\"w-full sm:w-auto px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer order-2 sm:order-1\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              onClick={handleCheckIn}\r\n              disabled={checkInMutation.isPending}\r\n              className=\"w-full sm:w-auto px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex items-center justify-center gap-2 order-1 sm:order-2\"\r\n            >\r\n              {checkInMutation.isPending ? (\r\n                <>\r\n                  <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                  <span>Checking in...</span>\r\n                </>\r\n              ) : (\r\n                <span>Confirm Check-in</span>\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CheckInModal;\r\n"],"names":["CheckInModal","isOpen","meetingId","courseName","onClose","selectedStatus","setSelectedStatus","React","description","setDescription","checkInMutation","useCheckInAttendance","handleCheckIn","err","jsxs","Fragment","jsx","X","status","e","Loader2"],"mappings":"8LAWA,MAAMA,EAA4C,CAAC,CACjD,OAAAC,EACA,UAAAC,EACA,WAAAC,EACA,QAAAC,CACF,IAAM,CACJ,KAAM,CAACC,EAAgBC,CAAiB,EAAIC,EAAM,SAA0E,OAAO,EAC7H,CAACC,EAAaC,CAAc,EAAIF,EAAM,SAAS,EAAE,EAEjDG,EAAkBC,EAAA,EAGxBJ,EAAM,UAAU,IAAM,CAChBN,IACFK,EAAkB,OAAO,EACzBG,EAAe,EAAE,EAErB,EAAG,CAACR,CAAM,CAAC,EAEX,MAAMW,EAAgB,SAAY,CAChC,GAAI,GAACV,GAAaQ,EAAgB,WAElC,GAAI,CACF,MAAMA,EAAgB,YAAY,CAChC,aAAcR,EACd,iBAAkBG,EAClB,UAAWG,EAAY,KAAA,GAAU,MAAA,CAClC,EAEDJ,EAAA,EAUA,MAAM,8BARe,CACnB,MAAS,UACT,KAAQ,aACR,MAAS,OACT,KAAQ,SACR,UAAa,OACb,UAAa,OAAA,EAEkCC,CAAc,CAAC,GAAG,CACrE,OAASQ,EAAK,CACZ,QAAQ,MAAM,mBAAoBA,CAAG,EACrC,MAAM,oBAAoBA,aAAe,MAAQA,EAAI,QAAU,eAAe,EAAE,CAClF,CACF,EAEA,OAAKZ,EAGHa,EAAAA,KAAAC,WAAA,CACE,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,iCAAiC,QAASZ,EAAS,QAEjE,MAAA,CAAI,UAAU,0DACb,SAAAU,EAAAA,KAAC,MAAA,CAAI,UAAU,6EACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uFACb,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,mDAAmD,SAAA,sBAAmB,EACpFA,EAAAA,IAAC,SAAA,CACC,QAASZ,EACT,UAAU,qEACV,SAAUM,EAAgB,UAE1B,SAAAM,EAAAA,IAACC,EAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEAH,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAE,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,SAAM,EACtEA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAyB,SAAAb,CAAA,CAAW,CAAA,EACrD,SAEC,MAAA,CACC,SAAA,CAAAa,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,sBAAmB,EACnFA,EAAAA,IAAC,MAAA,CAAI,UAAU,yBACX,SAAA,CAAC,QAAS,OAAQ,QAAS,OAAQ,YAAa,WAAW,EAAY,IAAIE,GAC3EJ,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAMR,EAAkBY,CAAM,EACvC,SAAUR,EAAgB,UAC1B,UAAW,gGACTL,IAAmBa,EACfA,IAAW,QACT,0BACAA,IAAW,OACX,wBACAA,IAAW,YACX,2BACA,2BACF,6CACN,IAAIR,EAAgB,UAAY,gCAAkC,EAAE,GAEpE,SAAA,CAAAI,EAAAA,KAAC,OAAA,CAAK,UAAU,mBACb,SAAA,CAAAI,IAAW,SAAW,YACtBA,IAAW,QAAU,gBACrBA,IAAW,SAAW,UACtBA,IAAW,QAAU,WACrBA,IAAW,aAAe,SAC1BA,IAAW,aAAe,UAAA,EAC7B,EACAJ,EAAAA,KAAC,OAAA,CAAK,UAAU,YACb,SAAA,CAAAI,IAAW,SAAW,IACtBA,IAAW,QAAU,KACrBA,IAAW,SAAW,KACtBA,IAAW,QAAU,IACrBA,IAAW,aAAe,IAC1BA,IAAW,aAAe,KAC1B,IAAKA,CAAA,CAAA,CACR,CAAA,CAAA,EA/BKA,CAAA,CAiCR,CAAA,CACH,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAF,MAAC,QAAA,CAAM,QAAQ,cAAc,UAAU,+CAA+C,SAAA,yBAEtF,EACAA,EAAAA,IAAC,WAAA,CACC,GAAG,cACH,MAAOR,EACP,SAAWW,GAAMV,EAAeU,EAAE,OAAO,KAAK,EAC9C,SAAUT,EAAgB,UAC1B,YAAY,sCACZ,KAAM,EACN,UAAU,yCACV,UAAW,GAAA,CAAA,EAEbI,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACZ,SAAA,CAAAN,EAAY,OAAO,iBAAA,CAAA,CACtB,CAAA,CAAA,CACF,CAAA,EACF,EAEAM,EAAAA,KAAC,MAAA,CAAI,UAAU,gIACb,SAAA,CAAAE,EAAAA,IAAC,SAAA,CACC,QAASZ,EACT,SAAUM,EAAgB,UAC1B,UAAU,4MACX,SAAA,QAAA,CAAA,EAGDM,EAAAA,IAAC,SAAA,CACC,QAASJ,EACT,SAAUF,EAAgB,UAC1B,UAAU,sPAET,SAAAA,EAAgB,UACfI,EAAAA,KAAAC,EAAAA,SAAA,CACE,SAAA,CAAAC,EAAAA,IAACI,EAAA,CAAQ,UAAU,sBAAA,CAAuB,EAC1CJ,EAAAA,IAAC,QAAK,SAAA,gBAAA,CAAc,CAAA,CAAA,CACtB,EAEAA,EAAAA,IAAC,OAAA,CAAK,SAAA,kBAAA,CAAgB,CAAA,CAAA,CAE1B,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAhHkB,IAkHtB"}