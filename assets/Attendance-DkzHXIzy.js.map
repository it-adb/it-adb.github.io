{"version":3,"file":"Attendance-DkzHXIzy.js","sources":["../../src/components/ui/EmptyState.tsx","../../src/pages/student/Attendance.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface EmptyStateProps {\r\n  /** Main title/message */\r\n  title: string;\r\n  /** Optional description */\r\n  description?: string;\r\n  /** Optional icon */\r\n  icon?: React.ReactNode;\r\n  /** Optional action button */\r\n  action?: React.ReactNode;\r\n  /** Custom class names */\r\n  className?: string;\r\n}\r\n\r\n/**\r\n * Reusable empty state component for when there's no data to display\r\n */\r\nexport const EmptyState: React.FC<EmptyStateProps> = ({\r\n  title,\r\n  description,\r\n  icon,\r\n  action,\r\n  className = '',\r\n}) => {\r\n  return (\r\n    <div className={`flex flex-col items-center justify-center py-12 px-4 ${className}`}>\r\n      {icon && (\r\n        <div className=\"mb-4 p-4 bg-gray-100 rounded-full text-gray-400\">\r\n          {icon}\r\n        </div>\r\n      )}\r\n      <h3 className=\"text-lg font-medium text-gray-900 text-center\">\r\n        {title}\r\n      </h3>\r\n      {description && (\r\n        <p className=\"mt-2 text-sm text-gray-500 text-center max-w-sm\">\r\n          {description}\r\n        </p>\r\n      )}\r\n      {action && (\r\n        <div className=\"mt-6\">\r\n          {action}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmptyState;\r\n","import React, { useMemo, useState } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useStudentClasses } from '../../hooks/useClasses';\r\nimport { apiService } from '../../services/api';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport type { AttendanceRecord, StudentClass, MeetingSchedule } from '../../types';\r\nimport { extractString, extractDate } from '../../utils/sqlNull';\r\nimport type { SqlNullString } from '../../types';\r\nimport { PageHeader, LoadingSpinner, Card, EmptyState } from '../../components/ui';\r\nimport { CheckCircle, XCircle, Clock, AlertCircle, ClockAlert, Minus } from 'lucide-react';\r\n\r\ninterface CourseAttendanceData {\r\n  course: StudentClass;\r\n  meetings: Array<{\r\n    id: number;\r\n    topik?: string;\r\n    tgl_pertemuan: string;\r\n    pertemuan_ke: number;\r\n    attendance?: AttendanceRecord;\r\n  }>;\r\n  stats: {\r\n    totalMeetings: number;\r\n    attended: number;\r\n    excused: number;\r\n    sick: number;\r\n    late: number;\r\n    substitute: number;\r\n    absent: number;\r\n    attendancePercentage: number;\r\n  };\r\n}\r\n\r\nconst StudentAttendance: React.FC = () => {\r\n  const { user } = useAuth();\r\n  const [selectedSemester, setSelectedSemester] = useState<string>('');\r\n\r\n  // Fetch student classes\r\n  const { data: studentClasses = [], isLoading: loadingClasses } = useStudentClasses(\r\n    user?.studentId,\r\n    selectedSemester ? { semester: selectedSemester } : undefined\r\n  );\r\n\r\n  // Fetch all meetings for student's classes\r\n  const classIds = useMemo(() => studentClasses.map(c => c.kelas_id), [studentClasses]);\r\n\r\n  const meetingsQueries = useQuery({\r\n    queryKey: ['student-meetings', classIds],\r\n    queryFn: async () => {\r\n      if (classIds.length === 0) return {};\r\n\r\n      const result: Record<number, MeetingSchedule[]> = {};\r\n\r\n      await Promise.all(\r\n        classIds.map(async (classId) => {\r\n          try {\r\n            const meetings = await apiService.getMeetingsByClass(classId);\r\n            result[classId] = meetings;\r\n          } catch (error) {\r\n            console.error(`Failed to fetch meetings for class ${classId}:`, error);\r\n            result[classId] = [];\r\n          }\r\n        })\r\n      );\r\n\r\n      return result;\r\n    },\r\n    enabled: classIds.length > 0,\r\n  });\r\n\r\n  // Fetch attendances for all meetings\r\n  const meetingIds = useMemo(() => {\r\n    if (!meetingsQueries.data) return [];\r\n    return Object.values(meetingsQueries.data).flat().map(m => m.id);\r\n  }, [meetingsQueries.data]);\r\n\r\n  const attendancesQuery = useQuery({\r\n    queryKey: ['student-all-attendances', meetingIds],\r\n    queryFn: async () => {\r\n      if (meetingIds.length === 0) return {};\r\n\r\n      const result: Record<number, AttendanceRecord> = {};\r\n\r\n      await Promise.all(\r\n        meetingIds.map(async (meetingId) => {\r\n          try {\r\n            const attendances = await apiService.getMeetingAttendances(meetingId);\r\n            const studentAttendance = attendances.find(a => a.nim === user?.studentId);\r\n            if (studentAttendance) {\r\n              result[meetingId] = studentAttendance;\r\n            }\r\n          } catch (error) {\r\n            console.error(`Failed to fetch attendances for meeting ${meetingId}:`, error);\r\n          }\r\n        })\r\n      );\r\n\r\n      return result;\r\n    },\r\n    enabled: meetingIds.length > 0,\r\n  });\r\n\r\n  // Process data into course attendance groups with stats\r\n  const courseAttendanceData = useMemo(() => {\r\n    if (!meetingsQueries.data || !studentClasses.length) return [];\r\n\r\n    return studentClasses\r\n      .map((course) => {\r\n        const meetings = (meetingsQueries.data?.[course.kelas_id] || []).sort((a, b) => a.pertemuan_ke - b.pertemuan_ke);\r\n\r\n        const courseData: CourseAttendanceData = {\r\n          course,\r\n          meetings: meetings.map(m => ({\r\n            id: m.id,\r\n            topik: extractString(m.topik as string | SqlNullString),\r\n            tgl_pertemuan: typeof m.tgl_pertemuan === 'string' ? m.tgl_pertemuan : m.tgl_pertemuan?.Time || '',\r\n            pertemuan_ke: m.pertemuan_ke,\r\n            attendance: attendancesQuery.data?.[m.id],\r\n          })),\r\n          stats: {\r\n            totalMeetings: meetings.length,\r\n            attended: 0,\r\n            excused: 0,\r\n            sick: 0,\r\n            late: 0,\r\n            substitute: 0,\r\n            absent: 0,\r\n            attendancePercentage: 0,\r\n          },\r\n        };\r\n\r\n        // Calculate stats\r\n        meetings.forEach(m => {\r\n          const attendance = attendancesQuery.data?.[m.id];\r\n          if (attendance) {\r\n            const status = extractString(attendance.status_kehadiran as string | SqlNullString)?.toLowerCase();\r\n            switch (status) {\r\n              case 'hadir':\r\n              case 'present':\r\n                courseData.stats.attended++;\r\n                break;\r\n              case 'izin':\r\n              case 'excused':\r\n                courseData.stats.excused++;\r\n                break;\r\n              case 'sakit':\r\n              case 'sick':\r\n                courseData.stats.sick++;\r\n                break;\r\n              case 'terlambat':\r\n              case 'late':\r\n                courseData.stats.late++;\r\n                break;\r\n              case 'pengganti':\r\n              case 'substitute':\r\n                courseData.stats.substitute++;\r\n                break;\r\n              case 'alpa':\r\n              case 'alfa':\r\n              case 'absent':\r\n                courseData.stats.absent++;\r\n                break;\r\n            }\r\n          }\r\n        });\r\n\r\n        if (courseData.stats.totalMeetings > 0) {\r\n          const presentMeetings = courseData.stats.attended + courseData.stats.late + courseData.stats.substitute;\r\n          courseData.stats.attendancePercentage = Math.round((presentMeetings / courseData.stats.totalMeetings) * 100);\r\n        }\r\n\r\n        return courseData;\r\n      })\r\n      .sort((a, b) => extractString(a.course.kode_mk || '').localeCompare(extractString(b.course.kode_mk || '')));\r\n  }, [studentClasses, meetingsQueries.data, attendancesQuery.data, user?.studentId]);\r\n\r\n  // Extract unique semesters for filter\r\n  const semesters = useMemo(() => {\r\n    const semesterSet = new Set<string>();\r\n    studentClasses.forEach(course => {\r\n      const semester = course.semester;\r\n      if (semester) semesterSet.add(semester);\r\n    });\r\n    return Array.from(semesterSet).sort().reverse();\r\n  }, [studentClasses]);\r\n\r\n  // Auto-select first semester if not selected\r\n  React.useEffect(() => {\r\n    if (!selectedSemester && semesters.length > 0) {\r\n      setSelectedSemester(semesters[0]);\r\n    }\r\n  }, [semesters, selectedSemester]);\r\n\r\n  const isLoading = loadingClasses || meetingsQueries.isLoading || attendancesQuery.isLoading;\r\n\r\n  const getStatusIcon = (status: string) => {\r\n    switch (status?.toLowerCase()) {\r\n      case 'hadir':\r\n      case 'present':\r\n        return <CheckCircle className=\"h-4 w-4 text-green-600\" />;\r\n      case 'izin':\r\n      case 'excused':\r\n        return <Clock className=\"h-4 w-4 text-blue-600\" />;\r\n      case 'sakit':\r\n      case 'sick':\r\n        return <AlertCircle className=\"h-4 w-4 text-yellow-600\" />;\r\n      case 'terlambat':\r\n      case 'late':\r\n        return <ClockAlert className=\"h-4 w-4 text-orange-600\" />;\r\n      case 'pengganti':\r\n      case 'substitute':\r\n        return <CheckCircle className=\"h-4 w-4 text-purple-600\" />;\r\n      case 'alpa':\r\n      case 'alfa':\r\n      case 'absent':\r\n        return <XCircle className=\"h-4 w-4 text-red-600\" />;\r\n      default:\r\n        return <Minus className=\"h-4 w-4 text-gray-300\" />;\r\n    }\r\n  };\r\n\r\n  const getAttendanceColorForPercentage = (percentage: number): string => {\r\n    if (percentage >= 80) return 'text-green-600';\r\n    if (percentage >= 70) return 'text-yellow-600';\r\n    return 'text-red-600';\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"p-6 space-y-6\">\r\n        <PageHeader title=\"Attendance Record\" />\r\n        <div className=\"flex justify-center items-center h-96\">\r\n          <LoadingSpinner />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <PageHeader title=\"Attendance Record\" subtitle=\"View your attendance for all enrolled courses\" />\r\n\r\n      {/* Semester Filter */}\r\n      {semesters.length > 1 && (\r\n        <Card>\r\n          <div className=\"flex items-center gap-4\">\r\n            <label htmlFor=\"semester-filter\" className=\"font-medium text-gray-700\">\r\n              Semester:\r\n            </label>\r\n            <select\r\n              id=\"semester-filter\"\r\n              value={selectedSemester}\r\n              onChange={(e) => setSelectedSemester(e.target.value)}\r\n              className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n            >\r\n              {semesters.map((sem) => (\r\n                <option key={sem} value={sem}>\r\n                  {sem}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Course Attendance Tables - Compact Transposed Layout */}\r\n      {courseAttendanceData.length === 0 ? (\r\n        <EmptyState\r\n          title=\"No Courses Found\"\r\n          description=\"You don't have any enrolled courses for the selected semester.\"\r\n        />\r\n      ) : (\r\n        <div className=\"space-y-3\">\r\n          {courseAttendanceData.map((courseData) => (\r\n            <Card key={courseData.course.kelas_id} className=\"p-0 overflow-hidden\">\r\n              {/* Course Info and Summary - Single Compact Row */}\r\n              <div className=\"bg-gradient-to-r from-primary-50 to-secondary-50 px-4 py-3 border-b border-gray-200\">\r\n                <div className=\"flex justify-between items-center gap-4\">\r\n                  <div className=\"flex-1\">\r\n                    <h3 className=\"font-semibold text-gray-900\">\r\n                      {extractString(courseData.course.kode_mk || '')} - {extractString(courseData.course.nama_mk || '')}\r\n                    </h3>\r\n                    <p className=\"text-xs text-gray-600\">\r\n                      {extractString(courseData.course.nama_kelas || '')}\r\n                    </p>\r\n                  </div>\r\n                  \r\n                  {/* Compact Stats */}\r\n                  <div className=\"flex items-center gap-2 text-xs\">\r\n                    <div className=\"text-center\">\r\n                      <div className={`font-bold text-lg ${getAttendanceColorForPercentage(courseData.stats.attendancePercentage)}`}>\r\n                        {courseData.stats.attendancePercentage}%\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"h-8 w-px bg-gray-300\"></div>\r\n                    <div className=\"flex gap-2\">\r\n                      <span className=\"bg-green-100 text-green-700 px-2 py-1 rounded text-xs font-medium\">{courseData.stats.attended}</span>\r\n                      <span className=\"bg-orange-100 text-orange-700 px-2 py-1 rounded text-xs font-medium\">{courseData.stats.late}</span>\r\n                      <span className=\"bg-blue-100 text-blue-700 px-2 py-1 rounded text-xs font-medium\">{courseData.stats.excused}</span>\r\n                      <span className=\"bg-yellow-100 text-yellow-700 px-2 py-1 rounded text-xs font-medium\">{courseData.stats.sick}</span>\r\n                      <span className=\"bg-purple-100 text-purple-700 px-2 py-1 rounded text-xs font-medium\">{courseData.stats.substitute}</span>\r\n                      <span className=\"bg-red-100 text-red-700 px-2 py-1 rounded text-xs font-medium\">{courseData.stats.absent}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Attendance Grid - Weeks as Columns */}\r\n              {courseData.meetings.length === 0 ? (\r\n                <div className=\"p-4 text-center text-sm text-gray-500\">\r\n                  No meetings recorded for this course.\r\n                </div>\r\n              ) : (\r\n                <div className=\"p-4\">\r\n                  <div className=\"flex gap-2 flex-wrap items-start\">\r\n                    {/* Legend and total info */}\r\n                    <div className=\"text-xs text-gray-600 mb-2 w-full\">\r\n                      <div className=\"flex gap-3 flex-wrap\">\r\n                        <div className=\"flex items-center gap-1\">\r\n                          <CheckCircle className=\"h-3.5 w-3.5 text-green-600\" />\r\n                          <span>Present</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1\">\r\n                          <ClockAlert className=\"h-3.5 w-3.5 text-orange-600\" />\r\n                          <span>Late</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1\">\r\n                          <Clock className=\"h-3.5 w-3.5 text-blue-600\" />\r\n                          <span>Excused</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1\">\r\n                          <AlertCircle className=\"h-3.5 w-3.5 text-yellow-600\" />\r\n                          <span>Sick</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1\">\r\n                          <CheckCircle className=\"h-3.5 w-3.5 text-purple-600\" />\r\n                          <span>Substitute</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1\">\r\n                          <XCircle className=\"h-3.5 w-3.5 text-red-600\" />\r\n                          <span>Absent</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1\">\r\n                          <Minus className=\"h-3.5 w-3.5 text-gray-400\" />\r\n                          <span>Not Marked</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Week columns with attendance status icons */}\r\n                    <div className=\"flex gap-1 flex-wrap\">\r\n                      {courseData.meetings.map((meeting) => {\r\n                        const attendance = meeting.attendance;\r\n                        const status = attendance ? extractString(attendance.status_kehadiran as string | SqlNullString) : undefined;\r\n                        const meetingDate = extractDate(meeting.tgl_pertemuan);\r\n                        const dateStr = meetingDate ? meetingDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }) : '';\r\n\r\n                        return (\r\n                          <div\r\n                            key={meeting.id}\r\n                            className=\"flex flex-col items-center gap-1 p-2 rounded border border-gray-200 hover:bg-gray-50 transition-colors cursor-help\"\r\n                            title={`Week ${meeting.pertemuan_ke} - ${dateStr}${meeting.topik ? ` - ${extractString(meeting.topik as string | SqlNullString)}` : ''}`}\r\n                          >\r\n                            <div className=\"text-xs font-semibold text-gray-600\">W{meeting.pertemuan_ke}</div>\r\n                            <div className=\"flex justify-center h-6\">\r\n                              {status ? (\r\n                                getStatusIcon(status)\r\n                              ) : (\r\n                                <Minus className=\"h-5 w-5 text-gray-300\" />\r\n                              )}\r\n                            </div>\r\n                            <div className=\"text-xs text-gray-500 text-center leading-tight max-w-12 break-words\">\r\n                              {dateStr}\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StudentAttendance;\r\n"],"names":["EmptyState","title","description","icon","action","className","jsxs","jsx","StudentAttendance","user","useAuth","selectedSemester","setSelectedSemester","useState","studentClasses","loadingClasses","useStudentClasses","classIds","useMemo","c","meetingsQueries","useQuery","result","classId","meetings","apiService","error","meetingIds","m","attendancesQuery","meetingId","studentAttendance","a","courseAttendanceData","course","b","courseData","extractString","attendance","presentMeetings","semesters","semesterSet","semester","React","isLoading","getStatusIcon","status","CheckCircle","Clock","AlertCircle","ClockAlert","XCircle","Minus","getAttendanceColorForPercentage","percentage","PageHeader","LoadingSpinner","Card","e","sem","meeting","meetingDate","extractDate","dateStr"],"mappings":"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"}