import{j as e}from"./query-vendor-B--u1oZD.js";import{r,g as q}from"./react-vendor-XXJdR_Id.js";import{a as re,g as N}from"./index-BYG0ekbM.js";import{u as le,a as ne,b as ie,c as de}from"./usePrograms-Bc43pFBX.js";import{P as z,s as ce,t as p,I as R,Y as b,G as y,a3 as U,K as B,X as M}from"./ui-vendor-CkH0jJa3.js";const pe=()=>{const{t:a}=re(),[j,A]=r.useState([]),{data:f,isLoading:G,error:h}=le(),[F,T]=r.useState(null),[v,K]=r.useState(""),[w,W]=r.useState("all"),[X,P]=r.useState(!1),[Y,k]=r.useState(!1),[H,S]=r.useState(!1),[c,u]=r.useState(null),[t,l]=r.useState({kode_prodi:"",nama_prodi:"",jenjang:""}),[o,n]=r.useState(null),[i,m]=r.useState(!1),[L,x]=r.useState(null);q.useEffect(()=>{Array.isArray(f)?A(f):f&&A([])},[f]),q.useEffect(()=>{T(h?h instanceof Error?h.message:String(h):null)},[h]);const{mutateAsync:J,isPending:C}=ne(),Q=async s=>{s.preventDefault(),n(null),m(!0);try{await J(t),x("Program created successfully"),P(!1),l({kode_prodi:"",nama_prodi:"",jenjang:""}),setTimeout(()=>x(null),3e3)}catch(d){n(d instanceof Error?d.message:"Failed to create program")}finally{m(!1)}},{mutateAsync:V,isPending:_}=ie(),Z=async s=>{if(s.preventDefault(),!!c){n(null),m(!0);try{const d={nama_prodi:t.nama_prodi,jenjang:t.jenjang};await V({kode_prodi:c.kode_prodi,data:d}),x("Program updated successfully"),k(!1),u(null),l({kode_prodi:"",nama_prodi:"",jenjang:""}),setTimeout(()=>x(null),3e3)}catch(d){n(d instanceof Error?d.message:"Failed to update program")}finally{m(!1)}}},{mutateAsync:$,isPending:D}=de(),ee=async()=>{if(c){n(null),m(!0);try{await $({kode_prodi:c.kode_prodi}),x("Program deleted successfully"),S(!1),u(null),setTimeout(()=>x(null),3e3)}catch(s){n(s instanceof Error?s.message:"Failed to delete program")}finally{m(!1)}}},se=s=>{u(s),l({kode_prodi:s.kode_prodi,nama_prodi:s.nama_prodi,jenjang:N(s.jenjang,"")}),n(null),k(!0)},ae=s=>{u(s),n(null),S(!0)},g=()=>{P(!1),k(!1),S(!1),u(null),l({kode_prodi:"",nama_prodi:"",jenjang:""}),n(null)},I=r.useMemo(()=>Array.isArray(j)?j:[],[j]),E=I.filter(s=>{const d=s.kode_prodi.toLowerCase().includes(v.toLowerCase())||s.nama_prodi.toLowerCase().includes(v.toLowerCase()),te=N(s.jenjang,"");return d&&(w==="all"||te===w)}),O=Array.from(new Set(I.map(s=>N(s.jenjang,"")).filter(Boolean)));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Programs Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage study programs and their information"})]}),e.jsxs("button",{onClick:()=>{l({kode_prodi:"",nama_prodi:"",jenjang:""}),n(null),P(!0)},className:"btn-primary flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5"}),"Add Program"]})]}),L&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(ce,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),e.jsx("p",{className:"text-green-800",children:L})]}),F&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(p,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),e.jsx("p",{className:"text-red-800",children:F})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by code or name...",value:v,onChange:s=>K(s.target.value),className:"input-field pl-10"})]})}),e.jsx("div",{className:"md:w-64",children:e.jsxs("select",{value:w,onChange:s=>W(s.target.value),className:"input-field",children:[e.jsx("option",{value:"all",children:"All Degrees"}),O.map(s=>e.jsx("option",{value:s,children:s},s))]})})]})}),e.jsx("div",{className:"card overflow-hidden",children:G?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(b,{className:"w-8 h-8 animate-spin text-blue-600"})}):E.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(y,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No programs found"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Try adjusting your search or filters"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Program Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Degree"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(y,{className:"w-5 h-5 text-blue-600"})}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.kode_prodi})})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900",children:s.nama_prodi})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:N(s.jenjang,"N/A")})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>se(s),className:"text-blue-600 hover:text-blue-900 mr-4",title:"Edit",children:e.jsx(U,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>ae(s),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(B,{className:"w-5 h-5"})})]})]},s.kode_prodi))})]})})}),X&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Create New Program"}),e.jsx("button",{onClick:g,className:"text-gray-400 hover:text-gray-600",children:e.jsx(M,{className:"w-6 h-6"})})]}),o&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-3 flex items-center gap-2",children:[e.jsx(p,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-800",children:o})]}),e.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Program Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.kode_prodi,onChange:s=>l({...t,kode_prodi:s.target.value}),className:"input-field",required:!0,placeholder:"e.g., IF, SI, MT"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Program Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.nama_prodi,onChange:s=>l({...t,nama_prodi:s.target.value}),className:"input-field",required:!0,placeholder:"e.g., Teknik Informatika"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Degree Level"}),e.jsxs("select",{value:t.jenjang||"",onChange:s=>l({...t,jenjang:s.target.value}),className:"input-field",children:[e.jsx("option",{value:"",children:"Select Degree"}),e.jsx("option",{value:"D3",children:"D3"}),e.jsx("option",{value:"D4",children:"D4"}),e.jsx("option",{value:"S1",children:"S1"}),e.jsx("option",{value:"S2",children:"S2"}),e.jsx("option",{value:"S3",children:"S3"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:g,className:"btn-secondary flex-1",disabled:i||C,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary flex-1 flex items-center justify-center gap-2",disabled:i||C,children:i||C?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-4 h-4"}),"Create Program"]})})]})]})]})}),Y&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Program"}),e.jsx("button",{onClick:g,className:"text-gray-400 hover:text-gray-600",children:e.jsx(M,{className:"w-6 h-6"})})]}),o&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-3 flex items-center gap-2",children:[e.jsx(p,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-800",children:o})]}),e.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Program Code"}),e.jsx("input",{type:"text",value:t.kode_prodi,className:"input-field bg-gray-100",disabled:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Program code cannot be changed"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Program Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.nama_prodi,onChange:s=>l({...t,nama_prodi:s.target.value}),className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("adminPrograms.degreeLevel")}),e.jsxs("select",{value:t.jenjang||"",onChange:s=>l({...t,jenjang:s.target.value}),className:"input-field",children:[e.jsx("option",{value:"",children:a("adminPrograms.selectDegree")}),e.jsx("option",{value:"D3",children:"D3"}),e.jsx("option",{value:"D4",children:"D4"}),e.jsx("option",{value:"S1",children:"S1"}),e.jsx("option",{value:"S2",children:"S2"}),e.jsx("option",{value:"S3",children:"S3"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:g,className:"btn-secondary flex-1",disabled:i||_,children:a("common.cancel")}),e.jsx("button",{type:"submit",className:"btn-primary flex-1 flex items-center justify-center gap-2",disabled:i||_,children:i||_?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"w-4 h-4 animate-spin"}),a("adminPrograms.updating")]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-4 h-4"}),a("adminPrograms.updateProgram")]})})]})]})]})}),H&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:a("adminPrograms.deleteProgram")}),e.jsx("button",{onClick:g,className:"text-gray-400 hover:text-gray-600",children:e.jsx(M,{className:"w-6 h-6"})})]}),o&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-3 flex items-center gap-2",children:[e.jsx(p,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-800",children:o})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsx(p,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-900",children:a("adminPrograms.deleteConfirm")}),e.jsxs("p",{className:"text-sm text-red-700 mt-1",children:[e.jsx("strong",{children:c.kode_prodi})," - ",c.nama_prodi]}),e.jsx("p",{className:"text-xs text-red-600 mt-2",children:a("adminPrograms.deleteWarning")})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:g,className:"btn-secondary flex-1",disabled:i||D,children:a("common.cancel")}),e.jsx("button",{onClick:ee,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:i||D,children:i||D?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"w-4 h-4 animate-spin"}),a("adminPrograms.deleting")]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-4 h-4"}),a("adminPrograms.deleteProgram")]})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(y,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:a("adminPrograms.totalPrograms")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j.length})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(R,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:a("adminPrograms.filteredResults")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E.length})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:e.jsx(y,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:a("adminPrograms.degreeTypes")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:O.length})]})]})})]})]})};export{pe as default};
//# sourceMappingURL=Programs-Cb4Xo6WJ.js.map
