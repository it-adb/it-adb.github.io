{"version":3,"mappings":"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","names":["LoginPage","isAuthenticated","login","useAuth","t","useTranslation","language","setLanguage","useLanguage","isLoading","setIsLoading","useState","isGoogleLoading","setIsGoogleLoading","gisReady","setGisReady","error","setError","username","setUsername","password","setPassword","showPassword","setShowPassword","showLanguagePicker","setShowLanguagePicker","googleBtnRef","useRef","mountedRef","clientId","Environment","showDemoLogin","handleGoogleCredential","useCallback","credential","backendError","e","logger","useEffect","initDelay","loadGoogleScript","resetGoogleInit","initGoogleSignIn","renderGoogleButton","err","renderDelay","handleUsernamePasswordLogin","response","apiService","userWithRoles","authResponse","extractString","__vitePreload","n","getPrimaryRole","availableRoles","r","primaryRole","userName","studentId","employeeId","applicationId","roleEntity","user","Navigate","jsxs","jsx","s","EyeOff","Eye","Fragment","LogIn","v","Globe"],"ignoreList":[],"sources":["../../src/pages/LoginPage.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { LogIn, Eye, EyeOff, Globe } from 'lucide-react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useTranslation, useLanguage } from '../contexts/LanguageContext';\r\nimport type { User, UserRole } from '../types';\r\nimport { initGoogleSignIn, loadGoogleScript, renderGoogleButton, resetGoogleInit } from '../utils/googleAuth';\r\nimport { Environment } from '../utils/environment';\r\nimport { apiService } from '../services/api';\r\nimport { logger } from '../utils/logger';\r\n\r\nconst LoginPage: React.FC = () => {\r\n  const { isAuthenticated, login } = useAuth();\r\n  const { t } = useTranslation();\r\n  const { language, setLanguage } = useLanguage();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isGoogleLoading, setIsGoogleLoading] = useState(false);\r\n  const [gisReady, setGisReady] = useState(false);\r\n  const [error, setError] = useState<string>('');\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [showLanguagePicker, setShowLanguagePicker] = useState(false);\r\n  const googleBtnRef = useRef<HTMLDivElement | null>(null);\r\n  const mountedRef = useRef(true);\r\n  \r\n  // Use environment-based configuration\r\n  const clientId = Environment.googleClientId;\r\n  const showDemoLogin = Environment.isDevelopment;\r\n\r\n  const handleGoogleCredential = useCallback(\r\n    async (credential: string) => {\r\n      try {\r\n        setIsGoogleLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n          // Try backend authentication\r\n          await login(credential);\r\n        } catch (backendError) {\r\n          setError(t('auth.userNotFound'));\r\n          throw backendError;\r\n        }\r\n      } catch (e) {\r\n        logger.error('Google login error:', e);\r\n      } finally {\r\n        setIsGoogleLoading(false);\r\n      }\r\n    },\r\n    [login, t]\r\n  );\r\n\r\n  // Initialize Google Identity Services and render button\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    if (!clientId) {\r\n      setGisReady(false);\r\n      return () => {\r\n        mountedRef.current = false;\r\n      };\r\n    }\r\n\r\n    setIsGoogleLoading(true);\r\n    setGisReady(false);\r\n\r\n    // Add a small delay to ensure DOM is stable after redirects\r\n    const initDelay = setTimeout(() => {\r\n      if (!mountedRef.current) return;\r\n\r\n      if (!clientId) {\r\n        setGisReady(false);\r\n        setIsGoogleLoading(false);\r\n        return;\r\n      }\r\n\r\n      loadGoogleScript()\r\n        .then(() => {\r\n          if (!mountedRef.current) return;\r\n\r\n          // Reset any previous initialization\r\n          resetGoogleInit();\r\n\r\n          setGisReady(true);\r\n          initGoogleSignIn(clientId, handleGoogleCredential);\r\n\r\n          // Ensure button container exists before rendering\r\n          if (googleBtnRef.current) {\r\n            renderGoogleButton(googleBtnRef.current);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          logger.error('Failed to load Google Identity Services:', err);\r\n          if (mountedRef.current) {\r\n            setGisReady(false);\r\n          }\r\n        })\r\n        .finally(() => {\r\n          if (mountedRef.current) {\r\n            setIsGoogleLoading(false);\r\n          }\r\n        });\r\n    }, 100);\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      clearTimeout(initDelay);\r\n    };\r\n  }, [clientId, handleGoogleCredential]);\r\n\r\n  // Re-render button when container ref changes\r\n  useEffect(() => {\r\n    if (gisReady && googleBtnRef.current && !isGoogleLoading && !isLoading) {\r\n      // Small delay to ensure DOM is ready\r\n      const renderDelay = setTimeout(() => {\r\n        if (mountedRef.current && googleBtnRef.current) {\r\n          renderGoogleButton(googleBtnRef.current);\r\n        }\r\n      }, 50);\r\n\r\n      return () => clearTimeout(renderDelay);\r\n    }\r\n  }, [gisReady, isGoogleLoading, isLoading]);\r\n\r\n  const handleUsernamePasswordLogin = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError('');\r\n\r\n    if (!username || !password) {\r\n      setError(t('loginPage.error'));\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      // Use apiService which respects VITE_API_BASE_URL\r\n      const response = await apiService.login(username, password);\r\n\r\n      // The apiService.login already sets the tokens, now fetch current user\r\n      const userWithRoles = await apiService.getCurrentUser();\r\n\r\n      // Convert backend user to frontend User format using the same logic as Google login\r\n      const authResponse = {\r\n        access_token: response.access_token,\r\n        refresh_token: response.refresh_token,\r\n        roles: userWithRoles.roles,\r\n        user: userWithRoles.user,\r\n      };\r\n\r\n      // Import helper functions\r\n      const { extractString } = await import('../utils/sqlNull');\r\n      const { getPrimaryRole } = await import('../constants');\r\n\r\n      // Extract all available roles\r\n      const availableRoles = authResponse.roles.map(r => r.role as UserRole);\r\n      const primaryRole = getPrimaryRole(availableRoles);\r\n      const userName = extractString(authResponse.user.name, authResponse.user.email.split('@')[0]);\r\n\r\n      // Extract entity IDs from roles array\r\n      let studentId: string | undefined;\r\n      let employeeId: string | undefined;\r\n      let applicationId: string | undefined;\r\n\r\n      for (const roleEntity of authResponse.roles) {\r\n        if (roleEntity.entity_type === 'mahasiswa' && roleEntity.entity_id) {\r\n          studentId = roleEntity.entity_id;\r\n        } else if (roleEntity.entity_type === 'dosen' && roleEntity.entity_id) {\r\n          employeeId = roleEntity.entity_id;\r\n        } else if (roleEntity.entity_type === 'applicant' && roleEntity.entity_id) {\r\n          applicationId = roleEntity.entity_id;\r\n        }\r\n      }\r\n\r\n      const user: User = {\r\n        id: String(authResponse.user.id),\r\n        email: authResponse.user.email,\r\n        name: userName,\r\n        role: primaryRole,\r\n        availableRoles,\r\n        studentId,\r\n        employeeId,\r\n        applicationId,\r\n        roleEntities: authResponse.roles,\r\n      };\r\n\r\n      await login(user);\r\n    } catch (err) {\r\n      console.error('Login failed:', err);\r\n      setError(err instanceof Error ? err.message : t('auth.loginFailed'));\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDemoLogin = async (role: UserRole) => {\r\n    const demoUsers: Record<UserRole, User> = {\r\n      guest: {\r\n        id: 'guest-demo',\r\n        email: 'guest@university.edu',\r\n        name: 'Guest User',\r\n        role: 'guest',\r\n      },\r\n      staff: {\r\n        id: 'staff-1',\r\n        email: 'staff@university.edu',\r\n        name: 'Maria Staff',\r\n        role: 'staff',\r\n        employeeId: 'STF001',\r\n      },\r\n      student_applicant: {\r\n        id: 'applicant-1',\r\n        email: 'applicant@university.edu',\r\n        name: 'John Applicant',\r\n        role: 'student_applicant',\r\n        applicationId: 'APP2024001',\r\n      },\r\n      student: {\r\n        id: 'student-1',\r\n        email: 'student@university.edu',\r\n        name: 'Ahmad Mahasiswa',\r\n        role: 'student',\r\n        studentId: '2021001',\r\n      },\r\n      lecturer: {\r\n        id: 'lecturer-1',\r\n        email: 'lecturer@university.edu',\r\n        name: 'Dr. Sarah Dosen',\r\n        role: 'lecturer',\r\n        employeeId: 'LEC001',\r\n      },\r\n      alumni: {\r\n        id: 'alumni-1',\r\n        email: 'alumni@university.edu',\r\n        name: 'David Alumni',\r\n        role: 'alumni',\r\n        studentId: '2018001',\r\n        graduationYear: 2022,\r\n      },\r\n      admin: {\r\n        id: 'admin-1',\r\n        email: 'admin@university.edu',\r\n        name: 'Admin System',\r\n        role: 'admin',\r\n        employeeId: 'ADM001',\r\n      },\r\n    };\r\n\r\n    await login(demoUsers[role]);\r\n  };\r\n\r\n  // Don't render redirect until we're sure we're not authenticated\r\n  if (isAuthenticated) {\r\n    return <Navigate to=\"/dashboard\" replace />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-100 flex items-center justify-center p-4\">\r\n      <div className=\"max-w-md w-full\">\r\n        {/* Logo and Title */}\r\n        <div className=\"text-center mb-8\">\r\n          <div className=\"inline-flex items-center justify-center w-16 h-16 mb-4\">\r\n            <img \r\n              src={import.meta.env.BASE_URL + 'logo.png'} \r\n              alt=\"ADB Academic System Logo\" \r\n              className=\"w-16 h-16 object-contain\"\r\n            />\r\n          </div>\r\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\r\n            ADB Academic System\r\n          </h1>\r\n          <p className=\"text-gray-600\">\r\n            {t('loginPage.subtitle')}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Login Card */}\r\n        <div className=\"bg-white rounded-xl shadow-lg p-8\">\r\n          <div className=\"space-y-6\">\r\n            {/* Error Message */}\r\n            {error && (\r\n              <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm\">\r\n                <p className=\"font-medium\">{t('loginPage.error')}</p>\r\n                <p className=\"mt-1\">{error}</p>\r\n              </div>\r\n            )}\r\n\r\n            {/* Username/Password Login Form */}\r\n            <form onSubmit={handleUsernamePasswordLogin} className=\"space-y-4\">\r\n              <div>\r\n                <p className=\"text-xs text-gray-600 mb-3 p-2 bg-blue-50 rounded border border-blue-200\">\r\n                  <strong>Kesulitan login dengan Google?</strong> Gunakan email sebagai username dan nama email diikuti \"ADB\" sebagai password.\r\n                  <br/><br/>Contoh: untuk email <code className=\"text-blue-700\">john.doe@digitalbdg.ac.id</code>, gunakan username: <code className=\"text-blue-700\">john.doe@digitalbdg.ac.id</code> dan password: <code className=\"text-blue-700\">john.doeADB</code>\r\n                  <br/><br/>Setelah berhasil login, anda dapat mengubah password Anda di dengan membuka profil anda di kanan atas kemudian memilih menu settings.\r\n                </p>\r\n                <label htmlFor=\"username\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  {t('loginPage.username')}\r\n                </label>\r\n                <input\r\n                  id=\"username\"\r\n                  type=\"text\"\r\n                  value={username}\r\n                  onChange={(e) => setUsername(e.target.value)}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n                  placeholder={t('loginPage.username')}\r\n                  disabled={isLoading || isGoogleLoading}\r\n                />\r\n              </div>\r\n              <div>\r\n                <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  {t('loginPage.password')}\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <input\r\n                    id=\"password\"\r\n                    type={showPassword ? 'text' : 'password'}\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                    className=\"w-full pr-10 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n                    placeholder={t('loginPage.password')}\r\n                    disabled={isLoading || isGoogleLoading}\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowPassword(s => !s)}\r\n                    disabled={isLoading || isGoogleLoading}\r\n                    className=\"absolute inset-y-0 right-2 flex items-center px-2 text-gray-500\"\r\n                    aria-label={showPassword ? t('loginPage.hidePassword') : t('loginPage.showPassword')}\r\n                    tabIndex={0}\r\n                  >\r\n                    {showPassword ? <EyeOff className=\"h-5 w-5\" /> : <Eye className=\"h-5 w-5\" />}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={isLoading || isGoogleLoading}\r\n                className=\"w-full btn-primary flex items-center justify-center\"\r\n              >\r\n                {isLoading ? (\r\n                  <>\r\n                    <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2\"></div>\r\n                    {t('loginPage.loggingIn')}\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <LogIn className=\"h-5 w-5 mr-2\" />\r\n                    {t('loginPage.login')}\r\n                  </>\r\n                )}\r\n              </button>\r\n            </form>\r\n\r\n            {/* Divider */}\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-0 flex items-center\">\r\n                <div className=\"w-full border-t border-gray-300\" />\r\n              </div>\r\n              <div className=\"relative flex justify-center text-sm\">\r\n                <span className=\"px-2 bg-white text-gray-500\">{t('common.or')}</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Google OAuth Button */}\r\n            <div className=\"w-full flex flex-col items-center\">\r\n              {(isGoogleLoading || isLoading) && (\r\n                <div className=\"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg bg-white text-sm text-gray-700\">\r\n                  <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-primary-600 mr-3\"></div>\r\n                  {isGoogleLoading ? t('loginPage.googleLoading') : t('auth.loading')}\r\n                </div>\r\n              )}\r\n              {!isGoogleLoading && !isLoading && gisReady && clientId && (\r\n                <div ref={googleBtnRef} className=\"w-full flex justify-center\" />\r\n              )}\r\n              {!isGoogleLoading && !isLoading && (!gisReady || !clientId) && (\r\n                <button\r\n                  disabled\r\n                  className=\"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-700 opacity-60\"\r\n                >\r\n                  <LogIn className=\"h-5 w-5 mr-3\" />\r\n                  {t('loginPage.clientIdMissing')}\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            {/* Demo Login Section - Only in demo mode */}\r\n            {showDemoLogin && (\r\n              <>\r\n                <div className=\"relative\">\r\n                  <div className=\"absolute inset-0 flex items-center\">\r\n                    <div className=\"w-full border-t border-gray-300\" />\r\n                  </div>\r\n                  <div className=\"relative flex justify-center text-sm\">\r\n                    <span className=\"px-2 bg-white text-gray-500\">{t('loginPage.demoLogin')}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-3\">\r\n                  <button\r\n                    onClick={() => handleDemoLogin('student')}\r\n                    disabled={isLoading || isGoogleLoading}\r\n                    className=\"w-full btn-primary cursor-pointer\"\r\n                  >\r\n                    {t('sidebar.studentPortal')}\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDemoLogin('lecturer')}\r\n                    disabled={isLoading || isGoogleLoading}\r\n                    className=\"w-full btn-secondary cursor-pointer\"\r\n                  >\r\n                    {t('sidebar.lecturerPortal')}\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDemoLogin('admin')}\r\n                    disabled={isLoading || isGoogleLoading}\r\n                    className=\"w-full btn-secondary cursor-pointer\"\r\n                  >\r\n                    {t('sidebar.adminPortal')}\r\n                  </button>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"mt-6 text-center\">\r\n            <p className=\"text-xs text-gray-500\">\r\n              {t('common.agreeTerms')}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Language Picker */}\r\n        <div className=\"mt-4 flex justify-center\">\r\n          <div className=\"relative\">\r\n            <button\r\n              onClick={() => setShowLanguagePicker(v => !v)}\r\n              className=\"flex items-center space-x-2 px-4 py-2 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 transition-colors cursor-pointer\"\r\n            >\r\n              <Globe className=\"h-4 w-4 text-gray-600\" />\r\n              <span className=\"text-sm font-medium text-gray-700\">{t(`language.${language}`)}</span>\r\n            </button>\r\n            \r\n            {showLanguagePicker && (\r\n              <div className=\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50\">\r\n                <div className=\"py-1\">\r\n                  <button\r\n                    onClick={() => {\r\n                      setLanguage('id');\r\n                      setShowLanguagePicker(false);\r\n                    }}\r\n                    className={`block w-full text-left px-4 py-2 text-sm cursor-pointer ${\r\n                      language === 'id'\r\n                        ? 'bg-primary-50 text-primary-700 font-medium'\r\n                        : 'text-gray-700 hover:bg-gray-100'\r\n                    }`}\r\n                  >\r\n                    {t('language.id')}\r\n                    {language === 'id' && <span className=\"ml-2 text-primary-600\">✓</span>}\r\n                  </button>\r\n                  <button\r\n                    onClick={() => {\r\n                      setLanguage('en');\r\n                      setShowLanguagePicker(false);\r\n                    }}\r\n                    className={`block w-full text-left px-4 py-2 text-sm cursor-pointer ${\r\n                      language === 'en'\r\n                        ? 'bg-primary-50 text-primary-700 font-medium'\r\n                        : 'text-gray-700 hover:bg-gray-100'\r\n                    }`}\r\n                  >\r\n                    {t('language.en')}\r\n                    {language === 'en' && <span className=\"ml-2 text-primary-600\">✓</span>}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"text-center mt-8 text-sm text-gray-500\">\r\n          © 2024 ADB Academic System. All rights reserved.\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;"],"file":"assets/LoginPage-BEbLsSkJ.js"}